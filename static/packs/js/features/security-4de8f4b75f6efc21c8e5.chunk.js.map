{"version":3,"file":"packs/js/features/security-4de8f4b75f6efc21c8e5.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/security/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp,_dec2,_class3,_class4,_temp2,_dec3,_class5,_class6,_temp3,_dec4,_class7,_class8,_temp4,_dec5,_class9,_class10,_temp5,_dec6,_class11,_class12,_temp6;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedDate}from'react-intl';import{connect}from'react-redux';import{withRouter}from'react-router-dom';import{changeEmail,changePassword,deleteAccount}from'soapbox/actions/security';import{fetchOAuthTokens,revokeOAuthTokenById}from'soapbox/actions/security';import{getSettings}from'soapbox/actions/settings';import snackbar from'soapbox/actions/snackbar';import Button from'soapbox/components/button';import ShowablePassword from'soapbox/components/showable_password';import{SimpleForm,FieldsGroup,TextInput}from'soapbox/features/forms';import{fetchMfa}from'../../actions/mfa';import Column from'../ui/components/column';/*\nSecurity settings page for user account\nRouted to /auth/edit\nIncludes following features:\n- Change Email\n- Change Password\n- Sessions\n- Deactivate Account\n*/const messages=defineMessages({heading:{\"id\":\"column.security\",\"defaultMessage\":\"Security\"},submit:{\"id\":\"security.submit\",\"defaultMessage\":\"Save changes\"},updateEmailSuccess:{\"id\":\"security.update_email.success\",\"defaultMessage\":\"Email successfully updated.\"},updateEmailFail:{\"id\":\"security.update_email.fail\",\"defaultMessage\":\"Update email failed.\"},updatePasswordSuccess:{\"id\":\"security.update_password.success\",\"defaultMessage\":\"Password successfully updated.\"},updatePasswordFail:{\"id\":\"security.update_password.fail\",\"defaultMessage\":\"Update password failed.\"},emailFieldLabel:{\"id\":\"security.fields.email.label\",\"defaultMessage\":\"Email address\"},passwordFieldLabel:{\"id\":\"security.fields.password.label\",\"defaultMessage\":\"Password\"},oldPasswordFieldLabel:{\"id\":\"security.fields.old_password.label\",\"defaultMessage\":\"Current password\"},newPasswordFieldLabel:{\"id\":\"security.fields.new_password.label\",\"defaultMessage\":\"New password\"},confirmationFieldLabel:{\"id\":\"security.fields.password_confirmation.label\",\"defaultMessage\":\"New password (again)\"},revoke:{\"id\":\"security.tokens.revoke\",\"defaultMessage\":\"Revoke\"},emailHeader:{\"id\":\"security.headers.update_email\",\"defaultMessage\":\"Change Email\"},passwordHeader:{\"id\":\"security.headers.update_password\",\"defaultMessage\":\"Change Password\"},tokenHeader:{\"id\":\"security.headers.tokens\",\"defaultMessage\":\"Sessions\"},deleteHeader:{\"id\":\"security.headers.delete\",\"defaultMessage\":\"Delete Account\"},deleteText:{\"id\":\"security.text.delete\",\"defaultMessage\":\"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone. Your account will be destroyed from this server, and a deletion request will be sent to other servers. It's not guaranteed that all servers will purge your account.\"},deleteSubmit:{\"id\":\"security.submit.delete\",\"defaultMessage\":\"Delete Account\"},deleteAccountSuccess:{\"id\":\"security.delete_account.success\",\"defaultMessage\":\"Account successfully deleted.\"},deleteAccountFail:{\"id\":\"security.delete_account.fail\",\"defaultMessage\":\"Account deletion failed.\"},mfa:{\"id\":\"security.mfa\",\"defaultMessage\":\"Set up 2-Factor Auth\"},mfa_setup_hint:{\"id\":\"security.mfa_setup_hint\",\"defaultMessage\":\"Configure multi-factor authentication with OTP\"},mfa_enabled:{\"id\":\"security.mfa_enabled\",\"defaultMessage\":\"You have multi-factor authentication set up with OTP.\"},disable_mfa:{\"id\":\"security.disable_mfa\",\"defaultMessage\":\"Disable\"},mfaHeader:{\"id\":\"security.mfa_header\",\"defaultMessage\":\"Authorization Methods\"}});const mapStateToProps=state=>({settings:getSettings(state),tokens:state.getIn(['security','tokens']),mfa:state.getIn(['security','mfa'])});let SecurityForm=(_dec6=connect(mapStateToProps),_dec6(_class11=injectIntl(_class11=(_temp6=_class12=class SecurityForm extends ImmutablePureComponent{render(){const{intl}=this.props;return/*#__PURE__*/_jsx(Column,{icon:\"lock\",heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ChangeEmailForm,{}),/*#__PURE__*/_jsx(ChangePasswordForm,{}),/*#__PURE__*/_jsx(SetUpMfa,{}),/*#__PURE__*/_jsx(AuthTokenList,{}),/*#__PURE__*/_jsx(DeactivateAccount,{}));}},_defineProperty(_class12,\"propTypes\",{dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_temp6))||_class11)||_class11);export{SecurityForm as default};let ChangeEmailForm=(_dec=connect(),_dec(_class=injectIntl(_class=(_temp=_class2=class ChangeEmailForm extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{email:'',password:'',isLoading:false});_defineProperty(this,\"handleInputChange\",e=>{this.setState({[e.target.name]:e.target.value});});_defineProperty(this,\"handleSubmit\",e=>{const{email,password}=this.state;const{dispatch,intl}=this.props;this.setState({isLoading:true});return dispatch(changeEmail(email,password)).then(()=>{this.setState({email:'',password:''});// TODO: Maybe redirect user\ndispatch(snackbar.success(intl.formatMessage(messages.updateEmailSuccess)));}).catch(error=>{this.setState({password:''});dispatch(snackbar.error(intl.formatMessage(messages.updateEmailFail)));}).then(()=>{this.setState({isLoading:false});});});}render(){const{intl}=this.props;return/*#__PURE__*/_jsx(SimpleForm,{onSubmit:this.handleSubmit},void 0,/*#__PURE__*/_jsx(\"h2\",{},void 0,intl.formatMessage(messages.emailHeader)),/*#__PURE__*/_jsx(\"fieldset\",{disabled:this.state.isLoading},void 0,/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(TextInput,{label:intl.formatMessage(messages.emailFieldLabel),placeholder:\"me@example.com\",name:\"email\",onChange:this.handleInputChange,value:this.state.email}),/*#__PURE__*/_jsx(ShowablePassword,{label:intl.formatMessage(messages.passwordFieldLabel),name:\"password\",onChange:this.handleInputChange,value:this.state.password}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\"},void 0,/*#__PURE__*/_jsx(\"button\",{name:\"button\",type:\"submit\",className:\"btn button button-primary\"},void 0,intl.formatMessage(messages.submit))))));}},_defineProperty(_class2,\"propTypes\",{email:PropTypes.string,dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_temp))||_class)||_class);let ChangePasswordForm=(_dec2=connect(),_dec2(_class3=injectIntl(_class3=(_temp2=_class4=class ChangePasswordForm extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{oldPassword:'',newPassword:'',confirmation:'',isLoading:false});_defineProperty(this,\"handleInputChange\",e=>{this.setState({[e.target.name]:e.target.value});});_defineProperty(this,\"clearForm\",()=>{this.setState({oldPassword:'',newPassword:'',confirmation:''});});_defineProperty(this,\"handleSubmit\",e=>{const{oldPassword,newPassword,confirmation}=this.state;const{dispatch,intl}=this.props;this.setState({isLoading:true});return dispatch(changePassword(oldPassword,newPassword,confirmation)).then(()=>{this.clearForm();// TODO: Maybe redirect user\ndispatch(snackbar.success(intl.formatMessage(messages.updatePasswordSuccess)));}).catch(error=>{this.clearForm();dispatch(snackbar.error(intl.formatMessage(messages.updatePasswordFail)));}).then(()=>{this.setState({isLoading:false});});});}render(){const{intl}=this.props;return/*#__PURE__*/_jsx(SimpleForm,{onSubmit:this.handleSubmit},void 0,/*#__PURE__*/_jsx(\"h2\",{},void 0,intl.formatMessage(messages.passwordHeader)),/*#__PURE__*/_jsx(\"fieldset\",{disabled:this.state.isLoading},void 0,/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(ShowablePassword,{label:intl.formatMessage(messages.oldPasswordFieldLabel),name:\"oldPassword\",onChange:this.handleInputChange,value:this.state.oldPassword}),/*#__PURE__*/_jsx(ShowablePassword,{label:intl.formatMessage(messages.newPasswordFieldLabel),name:\"newPassword\",onChange:this.handleInputChange,value:this.state.newPassword}),/*#__PURE__*/_jsx(ShowablePassword,{label:intl.formatMessage(messages.confirmationFieldLabel),name:\"confirmation\",onChange:this.handleInputChange,value:this.state.confirmation}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\"},void 0,/*#__PURE__*/_jsx(\"button\",{name:\"button\",type:\"submit\",className:\"btn button button-primary\"},void 0,intl.formatMessage(messages.submit))))));}},_defineProperty(_class4,\"propTypes\",{dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_temp2))||_class3)||_class3);let SetUpMfa=(_dec3=connect(mapStateToProps),_dec3(_class5=injectIntl(_class5=withRouter(_class5=(_temp3=_class6=class SetUpMfa extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleMfaClick\",e=>{this.props.history.push('../auth/mfa');});}componentDidMount(){this.props.dispatch(fetchMfa());}render(){const{intl,mfa}=this.props;return/*#__PURE__*/_jsx(SimpleForm,{},void 0,/*#__PURE__*/_jsx(\"h2\",{},void 0,intl.formatMessage(messages.mfaHeader)),!mfa.getIn(['settings','totp'])?/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"p\",{className:\"hint\"},void 0,intl.formatMessage(messages.mfa_setup_hint)),/*#__PURE__*/_jsx(Button,{className:\"button button-secondary set-up-mfa\",text:intl.formatMessage(messages.mfa),onClick:this.handleMfaClick})):/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"p\",{className:\"hint\"},void 0,intl.formatMessage(messages.mfa_enabled)),/*#__PURE__*/_jsx(Button,{className:\"button button--destructive disable-mfa\",text:intl.formatMessage(messages.disable_mfa),onClick:this.handleMfaClick})));}},_defineProperty(_class6,\"propTypes\",{intl:PropTypes.object.isRequired,mfa:ImmutablePropTypes.map.isRequired}),_temp3))||_class5)||_class5)||_class5);let AuthTokenList=(_dec4=connect(mapStateToProps),_dec4(_class7=injectIntl(_class7=(_temp4=_class8=class AuthTokenList extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleRevoke\",id=>{return e=>{this.props.dispatch(revokeOAuthTokenById(id));};});}componentDidMount(){this.props.dispatch(fetchOAuthTokens());}render(){const{tokens,intl}=this.props;if(tokens.isEmpty())return null;return/*#__PURE__*/_jsx(SimpleForm,{},void 0,/*#__PURE__*/_jsx(\"h2\",{},void 0,intl.formatMessage(messages.tokenHeader)),/*#__PURE__*/_jsx(\"div\",{className:\"authtokens\"},void 0,tokens.reverse().map((token,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"authtoken\"},i,/*#__PURE__*/_jsx(\"div\",{className:\"authtoken__app-name\"},void 0,token.get('app_name')),/*#__PURE__*/_jsx(\"div\",{className:\"authtoken__valid-until\"},void 0,/*#__PURE__*/_jsx(FormattedDate,{value:new Date(token.get('valid_until')),hour12:false,year:\"numeric\",month:\"short\",day:\"2-digit\",hour:\"2-digit\",minute:\"2-digit\"})),/*#__PURE__*/_jsx(\"div\",{className:\"authtoken__revoke\"},void 0,/*#__PURE__*/_jsx(\"button\",{onClick:this.handleRevoke(token.get('id'))},void 0,this.props.intl.formatMessage(messages.revoke)))))));}},_defineProperty(_class8,\"propTypes\",{dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired,tokens:ImmutablePropTypes.list}),_temp4))||_class7)||_class7);let DeactivateAccount=(_dec5=connect(mapStateToProps),_dec5(_class9=injectIntl(_class9=(_temp5=_class10=class DeactivateAccount extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{password:'',isLoading:false});_defineProperty(this,\"handleInputChange\",e=>{this.setState({[e.target.name]:e.target.value});});_defineProperty(this,\"handleSubmit\",e=>{const{password}=this.state;const{dispatch,intl}=this.props;this.setState({isLoading:true});return dispatch(deleteAccount(intl,password)).then(()=>{//this.setState({ email: '', password: '' }); // TODO: Maybe redirect user\ndispatch(snackbar.success(intl.formatMessage(messages.deleteAccountSuccess)));}).catch(error=>{this.setState({password:''});dispatch(snackbar.error(intl.formatMessage(messages.deleteAccountFail)));}).then(()=>{this.setState({isLoading:false});});});}render(){const{intl}=this.props;return/*#__PURE__*/_jsx(SimpleForm,{onSubmit:this.handleSubmit},void 0,/*#__PURE__*/_jsx(\"h2\",{},void 0,intl.formatMessage(messages.deleteHeader)),/*#__PURE__*/_jsx(\"p\",{className:\"hint\"},void 0,intl.formatMessage(messages.deleteText)),/*#__PURE__*/_jsx(\"fieldset\",{disabled:this.state.isLoading},void 0,/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(ShowablePassword,{label:intl.formatMessage(messages.passwordFieldLabel),name:\"password\",onChange:this.handleInputChange,value:this.state.password}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\"},void 0,/*#__PURE__*/_jsx(\"button\",{name:\"button\",type:\"submit\",className:\"btn button button-primary\"},void 0,intl.formatMessage(messages.deleteSubmit))))));}},_defineProperty(_class10,\"propTypes\",{dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_temp5))||_class9)||_class9);"],"names":["_class","_class2","_temp","_class3","_class4","_temp2","_class5","_class6","_temp3","_class7","_class8","_temp4","_class9","_class10","_temp5","_class11","_class12","_temp6","messages","heading","submit","updateEmailSuccess","updateEmailFail","updatePasswordSuccess","updatePasswordFail","emailFieldLabel","passwordFieldLabel","oldPasswordFieldLabel","newPasswordFieldLabel","confirmationFieldLabel","revoke","emailHeader","passwordHeader","tokenHeader","deleteHeader","deleteText","deleteSubmit","deleteAccountSuccess","deleteAccountFail","mfa","mfa_setup_hint","mfa_enabled","disable_mfa","mfaHeader","mapStateToProps","state","settings","tokens","getIn","SecurityForm","_dec6","render","intl","this","props","icon","formatMessage","ChangeEmailForm","ChangePasswordForm","SetUpMfa","AuthTokenList","DeactivateAccount","dispatch","_dec","args","email","password","isLoading","e","setState","target","name","value","then","catch","error","onSubmit","handleSubmit","disabled","label","placeholder","onChange","handleInputChange","className","type","_dec2","oldPassword","newPassword","confirmation","clearForm","_dec3","history","push","componentDidMount","text","onClick","handleMfaClick","_dec4","id","isEmpty","reverse","map","token","i","get","Date","hour12","year","month","day","hour","minute","handleRevoke","_dec5"],"sourceRoot":""}