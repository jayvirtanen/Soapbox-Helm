{"version":3,"file":"packs/js/features/scheduled_statuses-bea0bcb5301753d15df6.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/scheduled_statuses/builder.js","webpack://soapbox-fe/./app/soapbox/features/scheduled_statuses/components/scheduled_status_action_bar.js","webpack://soapbox-fe/./app/soapbox/features/scheduled_statuses/components/scheduled_status.js","webpack://soapbox-fe/./app/soapbox/features/scheduled_statuses/index.js"],"sourcesContent":["import\"core-js/modules/es.string.replace.js\";import{Map as ImmutableMap}from'immutable';import{normalizeStatus}from'soapbox/normalizers/status';import{calculateStatus}from'soapbox/reducers/statuses';import{makeGetAccount}from'soapbox/selectors';export const buildStatus=(state,scheduledStatus)=>{const getAccount=makeGetAccount();const me=state.get('me');const params=scheduledStatus.get('params');const account=getAccount(state,me);const status=ImmutableMap({account,content:params.get('text','').replace(new RegExp('\\n','g'),'<br>'),/* eslint-disable-line no-control-regex */created_at:params.get('scheduled_at'),id:scheduledStatus.get('id'),in_reply_to_id:params.get('in_reply_to_id'),media_attachments:scheduledStatus.get('media_attachments'),poll:params.get('poll'),sensitive:params.get('sensitive'),uri:\"/scheduled_statuses/\".concat(scheduledStatus.get('id')),url:\"/scheduled_statuses/\".concat(scheduledStatus.get('id')),visibility:params.get('visibility')});return calculateStatus(normalizeStatus(status));};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import{openModal}from'soapbox/actions/modals';import{cancelScheduledStatus}from'soapbox/actions/scheduled_statuses';import{getSettings}from'soapbox/actions/settings';import IconButton from'soapbox/components/icon_button';import SoapboxPropTypes from'soapbox/utils/soapbox_prop_types';const messages=defineMessages({cancel:{\"id\":\"scheduled_status.cancel\",\"defaultMessage\":\"Cancel\"},deleteConfirm:{\"id\":\"confirmations.scheduled_status_delete.confirm\",\"defaultMessage\":\"Cancel\"},deleteHeading:{\"id\":\"confirmations.scheduled_status_delete.heading\",\"defaultMessage\":\"Cancel scheduled post\"},deleteMessage:{\"id\":\"confirmations.scheduled_status_delete.message\",\"defaultMessage\":\"Are you sure you want to cancel this scheduled post?\"}});const mapStateToProps=state=>{const me=state.get('me');return{me};};const mapDispatchToProps=(dispatch,{intl})=>({onCancelClick:status=>{dispatch((_,getState)=>{const deleteModal=getSettings(getState()).get('deleteModal');if(!deleteModal){dispatch(cancelScheduledStatus(status.get('id')));}else{dispatch(openModal('CONFIRM',{icon:require('@tabler/icons/icons/calendar-stats.svg'),heading:intl.formatMessage(messages.deleteHeading),message:intl.formatMessage(messages.deleteMessage),confirm:intl.formatMessage(messages.deleteConfirm),onConfirm:()=>dispatch(cancelScheduledStatus(status.get('id')))}));}});}});class ScheduledStatusActionBar extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleCancelClick\",e=>{const{status,onCancelClick}=this.props;onCancelClick(status);});}render(){const{intl}=this.props;return/*#__PURE__*/_jsx(\"div\",{className:\"status__action-bar\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"status__button\"},void 0,/*#__PURE__*/_jsx(IconButton,{title:intl.formatMessage(messages.cancel),text:intl.formatMessage(messages.cancel),src:require('@tabler/icons/icons/x.svg'),onClick:this.handleCancelClick})));}}_defineProperty(ScheduledStatusActionBar,\"propTypes\",{status:ImmutablePropTypes.map.isRequired,intl:PropTypes.object.isRequired,me:SoapboxPropTypes.me,onCancelClick:PropTypes.func.isRequired});export default injectIntl(connect(mapStateToProps,mapDispatchToProps)(ScheduledStatusActionBar));","import _extends from\"@babel/runtime/helpers/esm/extends\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";const _excluded=[\"status\",\"account\"];var _dec,_class;import classNames from'classnames';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{connect}from'react-redux';import{Link,NavLink}from'react-router-dom';import AttachmentThumbs from'soapbox/components/attachment_thumbs';import Avatar from'soapbox/components/avatar';import DisplayName from'soapbox/components/display_name';import RelativeTimestamp from'soapbox/components/relative_timestamp';import StatusContent from'soapbox/components/status_content';import StatusReplyMentions from'soapbox/components/status_reply_mentions';import PollPreview from'soapbox/features/ui/components/poll_preview';import{getDomain}from'soapbox/utils/accounts';import{buildStatus}from'../builder';import ScheduledStatusActionBar from'./scheduled_status_action_bar';const mapStateToProps=(state,props)=>{const scheduledStatus=state.getIn(['scheduled_statuses',props.statusId]);return{status:buildStatus(state,scheduledStatus)};};let ScheduledStatus=(_dec=connect(mapStateToProps),_dec(_class=class ScheduledStatus extends ImmutablePureComponent{render(){const _this$props=this.props,{status,account}=_this$props,other=_objectWithoutProperties(_this$props,_excluded);if(!status.get('account'))return null;const statusUrl=\"/scheduled_statuses/\".concat(status.get('id'));const favicon=status.getIn(['account','pleroma','favicon']);const domain=getDomain(status.get('account'));return/*#__PURE__*/_jsx(\"div\",{className:\"scheduled-status\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:classNames('status__wrapper',\"status__wrapper-\".concat(status.get('visibility')),{'status__wrapper-reply':!!status.get('in_reply_to_id')}),tabIndex:this.props.muted?null:0},void 0,/*#__PURE__*/_jsx(\"div\",{className:classNames('status',\"status-\".concat(status.get('visibility')),{'status-reply':!!status.get('in_reply_to_id'),muted:this.props.muted}),\"data-id\":status.get('id')},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"status__expand\",role:\"presentation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"status__info\"},void 0,/*#__PURE__*/_jsx(NavLink,{to:statusUrl,className:\"status__relative-time\"},void 0,/*#__PURE__*/_jsx(RelativeTimestamp,{timestamp:status.get('created_at'),futureDate:true})),favicon&&/*#__PURE__*/_jsx(\"div\",{className:\"status__favicon\"},void 0,/*#__PURE__*/_jsx(Link,{to:\"/timeline/\".concat(domain)},void 0,/*#__PURE__*/_jsx(\"img\",{src:favicon,alt:\"\",title:domain}))),/*#__PURE__*/_jsx(\"div\",{className:\"status__profile\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"status__avatar\"},void 0,/*#__PURE__*/_jsx(NavLink,{to:\"/@\".concat(status.getIn(['account','acct'])),title:status.getIn(['account','acct'])},void 0,/*#__PURE__*/_jsx(Avatar,{account:status.get('account'),size:48}))),/*#__PURE__*/_jsx(NavLink,{to:\"/@\".concat(status.getIn(['account','acct'])),title:status.getIn(['account','acct']),className:\"status__display-name\"},void 0,/*#__PURE__*/_jsx(DisplayName,{account:status.get('account')})))),/*#__PURE__*/_jsx(StatusReplyMentions,{status:status}),/*#__PURE__*/_jsx(StatusContent,{status:status,expanded:true,collapsable:true}),status.get('media_attachments').size>0&&/*#__PURE__*/_jsx(AttachmentThumbs,{compact:true,media:status.get('media_attachments'),sensitive:status.get('sensitive')}),status.get('poll')&&/*#__PURE__*/_jsx(PollPreview,{poll:status.get('poll')}),/*#__PURE__*/React.createElement(ScheduledStatusActionBar,_extends({status:status,account:account},other)))));}})||_class);export{ScheduledStatus as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _debounce from\"lodash/debounce\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import ScrollableList from'soapbox/components/scrollable_list';import{fetchScheduledStatuses,expandScheduledStatuses}from'../../actions/scheduled_statuses';import Column from'../ui/components/column';import ScheduledStatus from'./components/scheduled_status';const messages=defineMessages({heading:{\"id\":\"column.scheduled_statuses\",\"defaultMessage\":\"Scheduled Posts\"}});const mapStateToProps=state=>({statusIds:state.getIn(['status_lists','scheduled_statuses','items']),isLoading:state.getIn(['status_lists','scheduled_statuses','isLoading'],true),hasMore:!!state.getIn(['status_lists','scheduled_statuses','next'])});let ScheduledStatuses=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class ScheduledStatuses extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleLoadMore\",_debounce(()=>{this.props.dispatch(expandScheduledStatuses());},300,{leading:true}));}componentDidMount(){const{dispatch}=this.props;dispatch(fetchScheduledStatuses());}render(){const{intl,statusIds,hasMore,isLoading}=this.props;const emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.scheduled_statuses\",defaultMessage:\"You don't have any scheduled statuses yet. When you add one, it will show up here.\"});return/*#__PURE__*/_jsx(Column,{icon:\"calendar\",heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"scheduled_statuses\",emptyMessage:emptyMessage,isLoading:isLoading,hasMore:hasMore},void 0,statusIds.map(id=>/*#__PURE__*/_jsx(ScheduledStatus,{statusId:id},id))));}},_defineProperty(_class2,\"propTypes\",{dispatch:PropTypes.func.isRequired,statusIds:ImmutablePropTypes.orderedSet.isRequired,intl:PropTypes.object.isRequired,hasMore:PropTypes.bool,isLoading:PropTypes.bool}),_temp))||_class)||_class);export{ScheduledStatuses as default};"],"names":["buildStatus","state","scheduledStatus","getAccount","me","get","params","account","status","content","replace","RegExp","created_at","id","in_reply_to_id","media_attachments","poll","sensitive","uri","concat","url","visibility","messages","cancel","deleteConfirm","deleteHeading","deleteMessage","args","e","props","onCancelClick","render","intl","this","className","title","formatMessage","text","src","onClick","handleCancelClick","ScheduledStatusActionBar","_class","_class2","_temp","injectIntl","dispatch","_","getState","deleteModal","icon","heading","message","confirm","onConfirm","_excluded","ScheduledStatus","getIn","statusId","_dec","_this$props","other","statusUrl","favicon","domain","ge","tabIndex","muted","role","to","timestamp","futureDate","alt","size","expanded","collapsable","compact","media","ScheduledStatuses","statusIds","isLoading","hasMore","leading","componentDidMount","emptyMessage","defaultMessage","scrollKey","map"],"sourceRoot":""}