{"version":3,"file":"packs/js/features/search-ec8646e0671f9f602ff0.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/compose/components/search_results.js","webpack://soapbox-fe/./app/soapbox/features/placeholder/components/placeholder_hashtag.js","webpack://soapbox-fe/./app/soapbox/features/compose/containers/search_results_container.js","webpack://soapbox-fe/./app/soapbox/features/search/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{FormattedMessage}from'react-intl';import{defineMessages,injectIntl}from'react-intl';import FilterBar from'soapbox/components/filter_bar';import Pullable from'soapbox/components/pullable';import ScrollableList from'soapbox/components/scrollable_list';import PlaceholderAccount from'soapbox/features/placeholder/components/placeholder_account';import PlaceholderHashtag from'soapbox/features/placeholder/components/placeholder_hashtag';import PlaceholderStatus from'soapbox/features/placeholder/components/placeholder_status';import Hashtag from'../../../components/hashtag';import AccountContainer from'../../../containers/account_container';import StatusContainer from'../../../containers/status_container';const messages=defineMessages({accounts:{\"id\":\"search_results.accounts\",\"defaultMessage\":\"People\"},statuses:{\"id\":\"search_results.statuses\",\"defaultMessage\":\"Posts\"},hashtags:{\"id\":\"search_results.hashtags\",\"defaultMessage\":\"Hashtags\"}});let SearchResults=injectIntl(_class=(_temp=_class2=class SearchResults extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleLoadMore\",()=>this.props.expandSearch(this.props.selectedFilter));_defineProperty(this,\"handleSelectFilter\",newActiveFilter=>this.props.selectFilter(newActiveFilter));}renderFilterBar(){const{intl,selectedFilter}=this.props;const items=[{text:intl.formatMessage(messages.accounts),action:()=>this.handleSelectFilter('accounts'),name:'accounts'},{text:intl.formatMessage(messages.statuses),action:()=>this.handleSelectFilter('statuses'),name:'statuses'},{text:intl.formatMessage(messages.hashtags),action:()=>this.handleSelectFilter('hashtags'),name:'hashtags'}];return/*#__PURE__*/_jsx(FilterBar,{className:\"search__filter-bar\",items:items,active:selectedFilter});}render(){const{value,results,submitted,selectedFilter,suggestions,trends}=this.props;let searchResults;let hasMore=false;let loaded;let noResultsMessage;let placeholderComponent=PlaceholderStatus;if(selectedFilter==='accounts'){hasMore=results.get('accountsHasMore');loaded=results.get('accountsLoaded');placeholderComponent=PlaceholderAccount;if(results.get('accounts')&&results.get('accounts').size>0){searchResults=results.get('accounts').map(accountId=>/*#__PURE__*/_jsx(AccountContainer,{id:accountId},accountId));}else if(!submitted&&suggestions&&!suggestions.isEmpty()){searchResults=suggestions.map(suggestion=>/*#__PURE__*/_jsx(AccountContainer,{id:suggestion.get('account')},suggestion.get('account')));}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.accounts\",defaultMessage:\"There are no people results for \\\"{term}\\\"\",values:{term:value}}));}}if(selectedFilter==='statuses'&&results.get('statuses')){hasMore=results.get('statusesHasMore');loaded=results.get('statusesLoaded');if(results.get('statuses').size>0){searchResults=results.get('statuses').map(statusId=>/*#__PURE__*/_jsx(StatusContainer,{id:statusId},statusId));}else{noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.statuses\",defaultMessage:\"There are no posts results for \\\"{term}\\\"\",values:{term:value}}));}}if(selectedFilter==='hashtags'){hasMore=results.get('hashtagsHasMore');loaded=results.get('hashtagsLoaded');placeholderComponent=PlaceholderHashtag;if(results.get('hashtags')&&results.get('hashtags').size>0){searchResults=results.get('hashtags').map(hashtag=>/*#__PURE__*/_jsx(Hashtag,{hashtag:hashtag},hashtag.get('name')));}else if(!submitted&&suggestions&&!suggestions.isEmpty()){searchResults=trends.map(hashtag=>/*#__PURE__*/_jsx(Hashtag,{hashtag:hashtag},hashtag.get('name')));}else if(loaded){noResultsMessage=/*#__PURE__*/_jsx(\"div\",{className:\"empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.search.hashtags\",defaultMessage:\"There are no hashtags results for \\\"{term}\\\"\",values:{term:value}}));}}return/*#__PURE__*/React.createElement(React.Fragment,null,this.renderFilterBar(),noResultsMessage||/*#__PURE__*/_jsx(Pullable,{},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"\".concat(selectedFilter,\":\").concat(value),isLoading:submitted&&!loaded,showLoading:submitted&&!loaded&&results.isEmpty(),hasMore:hasMore,onLoadMore:this.handleLoadMore,placeholderComponent:placeholderComponent,placeholderCount:20},selectedFilter,searchResults)));}},_defineProperty(_class2,\"propTypes\",{value:PropTypes.string,results:ImmutablePropTypes.map.isRequired,submitted:PropTypes.bool,expandSearch:PropTypes.func.isRequired,selectedFilter:PropTypes.string.isRequired,selectFilter:PropTypes.func.isRequired,features:PropTypes.object.isRequired,suggestions:ImmutablePropTypes.list,trends:ImmutablePropTypes.list,intl:PropTypes.object.isRequired}),_temp))||_class;export{SearchResults as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{generateText,randomIntFromInterval}from'../utils';export default class PlaceholderHashtag extends React.Component{render(){const length=randomIntFromInterval(15,30);return/*#__PURE__*/_jsx(\"div\",{className:\"placeholder-hashtag\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"trends__item\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"trends__item__name\"},void 0,generateText(length))));}}","import{connect}from'react-redux';import{getFeatures}from'soapbox/utils/features';import{expandSearch,setFilter}from'../../../actions/search';import{fetchSuggestions,dismissSuggestion}from'../../../actions/suggestions';import SearchResults from'../components/search_results';const mapStateToProps=state=>{const instance=state.get('instance');return{value:state.getIn(['search','submittedValue']),results:state.getIn(['search','results']),suggestions:state.getIn(['suggestions','items']),trends:state.getIn(['trends','items']),submitted:state.getIn(['search','submitted']),selectedFilter:state.getIn(['search','filter']),features:getFeatures(instance)};};const mapDispatchToProps=dispatch=>({fetchSuggestions:()=>dispatch(fetchSuggestions()),expandSearch:type=>dispatch(expandSearch(type)),dismissSuggestion:account=>dispatch(dismissSuggestion(account.get('id'))),selectFilter:newActiveFilter=>dispatch(setFilter(newActiveFilter))});export default connect(mapStateToProps,mapDispatchToProps)(SearchResults);","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{defineMessages,injectIntl}from'react-intl';import Column from'soapbox/components/column';import ColumnHeader from'soapbox/components/column_header';import SearchContainer from'soapbox/features/compose/containers/search_container';import SearchResultsContainer from'soapbox/features/compose/containers/search_results_container';const messages=defineMessages({heading:{\"id\":\"column.search\",\"defaultMessage\":\"Search\"}});const Search=({intl})=>/*#__PURE__*/_jsx(Column,{className:\"search-page\"},void 0,/*#__PURE__*/_jsx(ColumnHeader,{icon:\"search\",title:intl.formatMessage(messages.heading)}),/*#__PURE__*/_jsx(SearchContainer,{autoFocus:true,autoSubmit:true}),/*#__PURE__*/_jsx(SearchResultsContainer,{}));export default injectIntl(Search);"],"names":["_class","_class2","_temp","render","length","className","messages","accounts","statuses","hashtags","SearchResults","injectIntl","args","props","expandSearch","selectedFilter","newActiveFilter","selectFilter","renderFilterBar","this","intl","items","text","formatMessage","action","handleSelectFilter","name","active","searchResults","loaded","noResultsMessage","value","results","submitted","suggestions","trends","hasMore","placeholderComponent","get","size","map","accountId","id","isEmpty","defaultMessage","values","term","suggestion","statusId","hashtag","scrollKey","concat","isLoading","showLoading","onLoadMore","handleLoadMore","placeholderCount","features","state","instance","getIn","dispatch","fetchSuggestions","type","dismissSuggestion","account","heading","icon","title","autoFocus","autoSubmit"],"sourceRoot":""}