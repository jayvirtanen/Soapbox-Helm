{"version":3,"file":"packs/js/features/admin-36c945b0eaecff50a254.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/admin/components/admin_nav.js","webpack://soapbox-fe/./app/soapbox/features/ui/components/account_list_panel.js","webpack://soapbox-fe/./app/soapbox/features/admin/components/latest_accounts_panel.js","webpack://soapbox-fe/./app/soapbox/actions/email_list.js","webpack://soapbox-fe/./app/soapbox/features/admin/components/registration_mode_picker.js","webpack://soapbox-fe/./app/soapbox/features/admin/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";var _dec,_class;import React from'react';import{FormattedMessage}from'react-intl';import{connect}from'react-redux';import{NavLink}from'react-router-dom';import Icon from'soapbox/components/icon';import IconWithCounter from'soapbox/components/icon_with_counter';const mapStateToProps=(state,props)=>({instance:state.get('instance'),approvalCount:state.getIn(['admin','awaitingApproval']).count(),reportsCount:state.getIn(['admin','openReports']).count()});let AdminNav=(_dec=connect(mapStateToProps),_dec(_class=class AdminNav extends React.PureComponent{render(){const{instance,approvalCount,reportsCount}=this.props;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel promo-panel\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"promo-panel__container\"},void 0,/*#__PURE__*/_jsx(NavLink,{className:\"promo-panel-item\",to:\"/admin\"},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/dashboard.svg'),className:\"promo-panel-item__icon\"}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin_nav.dashboard\",defaultMessage:\"Dashboard\"})),/*#__PURE__*/_jsx(NavLink,{className:\"promo-panel-item\",to:\"/admin/reports\"},void 0,/*#__PURE__*/_jsx(IconWithCounter,{src:require('@tabler/icons/icons/gavel.svg'),count:reportsCount}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin_nav.reports\",defaultMessage:\"Reports\"})),(instance.get('registrations')&&instance.get('approval_required')||approvalCount>0)&&/*#__PURE__*/_jsx(NavLink,{className:\"promo-panel-item\",to:\"/admin/approval\"},void 0,/*#__PURE__*/_jsx(IconWithCounter,{src:require('@tabler/icons/icons/user.svg'),count:approvalCount}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin_nav.awaiting_approval\",defaultMessage:\"Awaiting Approval\"})))));}})||_class);export{AdminNav as default};","import _extends from\"@babel/runtime/helpers/esm/extends\";import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";const _excluded=[\"title\",\"icon\",\"accountIds\",\"limit\",\"total\",\"expandMessage\",\"expandRoute\"];import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{Link}from'react-router-dom';import Icon from'soapbox/components/icon';import AccountContainer from'../../../containers/account_container';export default class AccountListPanel extends ImmutablePureComponent{render(){const _this$props=this.props,{title,icon,accountIds,limit,total,expandMessage,expandRoute}=_this$props,props=_objectWithoutProperties(_this$props,_excluded);if(!accountIds||accountIds.isEmpty()){return null;}const canExpand=expandMessage&&expandRoute&&accountIds.size<total;return/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel-header\"},void 0,/*#__PURE__*/_jsx(Icon,{src:icon,className:\"wtf-panel-header__icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"wtf-panel-header__label\"},void 0,title)),/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel__content\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel__list\"},void 0,accountIds.take(limit).map(accountId=>/*#__PURE__*/React.createElement(AccountContainer,_extends({key:accountId,id:accountId},props))))),canExpand&&/*#__PURE__*/_jsx(Link,{className:\"wtf-panel__expand-btn\",to:expandRoute},void 0,expandMessage));}}_defineProperty(AccountListPanel,\"propTypes\",{title:PropTypes.node.isRequired,accountIds:ImmutablePropTypes.orderedSet.isRequired,icon:PropTypes.string.isRequired,limit:PropTypes.number,total:PropTypes.number,expandMessage:PropTypes.string,expandRoute:PropTypes.string});_defineProperty(AccountListPanel,\"defaultProps\",{limit:Infinity});","import _extends from\"@babel/runtime/helpers/esm/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/esm/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";const _excluded=[\"intl\",\"accountIds\",\"limit\",\"isSorted\"];var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import{is}from'immutable';import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{injectIntl,defineMessages}from'react-intl';import{connect}from'react-redux';import{fetchUsers}from'soapbox/actions/admin';import compareId from'soapbox/compare_id';import AccountListPanel from'soapbox/features/ui/components/account_list_panel';const messages=defineMessages({title:{\"id\":\"admin.latest_accounts_panel.title\",\"defaultMessage\":\"Latest Accounts\"},expand:{\"id\":\"admin.latest_accounts_panel.expand_message\",\"defaultMessage\":\"Click to see {count} more {count, plural, one {account} other {accounts}}\"}});const mapStateToProps=state=>{const accountIds=state.getIn(['admin','latestUsers']);// HACK: AdminAPI only recently started sorting new users at the top.\n// Try a dirty check to see if the users are sorted properly, or don't show the panel.\n// Probably works most of the time.\nconst sortedIds=accountIds.sort(compareId).reverse();const hasDates=accountIds.every(id=>state.getIn(['accounts',id,'created_at']));const isSorted=hasDates&&is(accountIds,sortedIds);return{isSorted,accountIds};};let LatestAccountsPanel=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class LatestAccountsPanel extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{total:0});}componentDidMount(){const{dispatch,limit}=this.props;dispatch(fetchUsers(['local','active'],1,null,limit)).then(({count})=>{this.setState({total:count});}).catch(()=>{});}render(){const _this$props=this.props,{intl,accountIds,limit,isSorted}=_this$props,props=_objectWithoutProperties(_this$props,_excluded);const{total}=this.state;if(!isSorted||!accountIds||accountIds.isEmpty()){return null;}const expandCount=total-accountIds.size;return/*#__PURE__*/React.createElement(AccountListPanel,_extends({icon:require('@tabler/icons/icons/users.svg'),title:intl.formatMessage(messages.title),accountIds:accountIds,limit:limit,total:total,expandMessage:intl.formatMessage(messages.expand,{count:expandCount}),expandRoute:\"/admin/users\",withDate:true,withRelationship:false},props));}},_defineProperty(_class2,\"propTypes\",{accountIds:ImmutablePropTypes.orderedSet.isRequired,limit:PropTypes.number}),_defineProperty(_class2,\"defaultProps\",{limit:5}),_temp))||_class)||_class);export{LatestAccountsPanel as default};","import api from'../api';export function getSubscribersCsv(){return(dispatch,getState)=>{return api(getState).get('/api/v1/pleroma/admin/email_list/subscribers.csv');};}export function getUnsubscribersCsv(){return(dispatch,getState)=>{return api(getState).get('/api/v1/pleroma/admin/email_list/unsubscribers.csv');};}export function getCombinedCsv(){return(dispatch,getState)=>{return api(getState).get('/api/v1/pleroma/admin/email_list/combined.csv');};}","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{injectIntl,defineMessages,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{updateConfig}from'soapbox/actions/admin';import snackbar from'soapbox/actions/snackbar';import{SimpleForm,FieldsGroup,RadioGroup,RadioItem}from'soapbox/features/forms';const messages=defineMessages({saved:{\"id\":\"admin.dashboard.settings_saved\",\"defaultMessage\":\"Settings saved!\"}});const mapStateToProps=(state,props)=>({mode:modeFromInstance(state.get('instance'))});const generateConfig=mode=>{const configMap={open:[{tuple:[':registrations_open',true]},{tuple:[':account_approval_required',false]}],approval:[{tuple:[':registrations_open',true]},{tuple:[':account_approval_required',true]}],closed:[{tuple:[':registrations_open',false]}]};return[{group:':pleroma',key:':instance',value:configMap[mode]}];};const modeFromInstance=instance=>{if(instance.get('approval_required')&&instance.get('registrations'))return'approval';return instance.get('registrations')?'open':'closed';};let RegistrationModePicker=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=class RegistrationModePicker extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"onChange\",e=>{const{dispatch,intl}=this.props;const config=generateConfig(e.target.value);dispatch(updateConfig(config)).then(()=>{dispatch(snackbar.success(intl.formatMessage(messages.saved)));}).catch(()=>{});});}render(){const{mode}=this.props;return/*#__PURE__*/_jsx(SimpleForm,{},void 0,/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(RadioGroup,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashboard.registration_mode_label\",defaultMessage:\"Registrations\"}),onChange:this.onChange},void 0,/*#__PURE__*/_jsx(RadioItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashboard.registration_mode.open_label\",defaultMessage:\"Open\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashboard.registration_mode.open_hint\",defaultMessage:\"Anyone can join.\"}),checked:mode==='open',value:\"open\"}),/*#__PURE__*/_jsx(RadioItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashboard.registration_mode.approval_label\",defaultMessage:\"Approval Required\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashboard.registration_mode.approval_hint\",defaultMessage:\"Users can sign up, but their account only gets activated when an admin approves it.\"}),checked:mode==='approval',value:\"approval\"}),/*#__PURE__*/_jsx(RadioItem,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashboard.registration_mode.closed_label\",defaultMessage:\"Closed\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashboard.registration_mode.closed_hint\",defaultMessage:\"Nobody can sign up. You can still invite people.\"}),checked:mode==='closed',value:\"closed\"}))));}})||_class)||_class);export{RegistrationModePicker as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage,FormattedNumber}from'react-intl';import{connect}from'react-redux';import{Link}from'react-router-dom';import{getSubscribersCsv,getUnsubscribersCsv,getCombinedCsv}from'soapbox/actions/email_list';import{isAdmin}from'soapbox/utils/accounts';import sourceCode from'soapbox/utils/code';import{parseVersion}from'soapbox/utils/features';import{getFeatures}from'soapbox/utils/features';import{isNumber}from'soapbox/utils/numbers';import Column from'../ui/components/column';import RegistrationModePicker from'./components/registration_mode_picker';// https://stackoverflow.com/a/53230807\nconst download=(response,filename)=>{const url=URL.createObjectURL(new Blob([response.data]));const link=document.createElement('a');link.href=url;link.setAttribute('download',filename);document.body.appendChild(link);link.click();link.remove();};const messages=defineMessages({heading:{\"id\":\"column.admin.dashboard\",\"defaultMessage\":\"Dashboard\"}});const mapStateToProps=(state,props)=>{const me=state.get('me');return{instance:state.get('instance'),supportsEmailList:getFeatures(state.get('instance')).emailList,account:state.getIn(['accounts',me])};};let Dashboard=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class Dashboard extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleSubscribersClick\",e=>{this.props.dispatch(getSubscribersCsv()).then(response=>{download(response,'subscribers.csv');}).catch(()=>{});e.preventDefault();});_defineProperty(this,\"handleUnsubscribersClick\",e=>{this.props.dispatch(getUnsubscribersCsv()).then(response=>{download(response,'unsubscribers.csv');}).catch(()=>{});e.preventDefault();});_defineProperty(this,\"handleCombinedClick\",e=>{this.props.dispatch(getCombinedCsv()).then(response=>{download(response,'combined.csv');}).catch(()=>{});e.preventDefault();});}render(){const{intl,instance,supportsEmailList,account}=this.props;const v=parseVersion(instance.get('version'));const userCount=instance.getIn(['stats','user_count']);const mau=instance.getIn(['pleroma','stats','mau']);const retention=userCount&&mau?Math.round(mau/userCount*100):null;if(!account)return null;return/*#__PURE__*/_jsx(Column,{icon:\"tachometer-alt\",heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"dashcounters\"},void 0,mau&&/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter\"},void 0,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__num\"},void 0,/*#__PURE__*/_jsx(FormattedNumber,{value:mau})),/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashcounters.mau_label\",defaultMessage:\"monthly active users\"})))),/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter\"},void 0,/*#__PURE__*/_jsx(Link,{to:\"/admin/users\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__num\"},void 0,/*#__PURE__*/_jsx(FormattedNumber,{value:userCount})),/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashcounters.user_count_label\",defaultMessage:\"total users\"})))),isNumber(retention)&&/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter\"},void 0,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__num\"},void 0,retention,\"%\"),/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashcounters.retention_label\",defaultMessage:\"user retention\"})))),/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter\"},void 0,/*#__PURE__*/_jsx(Link,{to:\"/timeline/local\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__num\"},void 0,/*#__PURE__*/_jsx(FormattedNumber,{value:instance.getIn(['stats','status_count'])})),/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashcounters.status_count_label\",defaultMessage:\"posts\"})))),/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter\"},void 0,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__num\"},void 0,/*#__PURE__*/_jsx(FormattedNumber,{value:instance.getIn(['stats','domain_count'])})),/*#__PURE__*/_jsx(\"div\",{className:\"dashcounter__label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashcounters.domain_count_label\",defaultMessage:\"peers\"}))))),isAdmin(account)&&/*#__PURE__*/_jsx(RegistrationModePicker,{}),/*#__PURE__*/_jsx(\"div\",{className:\"dashwidgets\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"dashwidget\"},void 0,/*#__PURE__*/_jsx(\"h4\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashwidgets.software_header\",defaultMessage:\"Software\"})),/*#__PURE__*/_jsx(\"ul\",{},void 0,/*#__PURE__*/_jsx(\"li\",{},void 0,sourceCode.displayName,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"pull-right\"},void 0,sourceCode.version)),/*#__PURE__*/_jsx(\"li\",{},void 0,v.software,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"pull-right\"},void 0,v.version)))),supportsEmailList&&isAdmin(account)&&/*#__PURE__*/_jsx(\"div\",{className:\"dashwidget\"},void 0,/*#__PURE__*/_jsx(\"h4\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"admin.dashwidgets.email_list_header\",defaultMessage:\"Email list\"})),/*#__PURE__*/_jsx(\"ul\",{},void 0,/*#__PURE__*/_jsx(\"li\",{},void 0,/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:this.handleSubscribersClick,target:\"_blank\"},void 0,\"subscribers.csv\")),/*#__PURE__*/_jsx(\"li\",{},void 0,/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:this.handleUnsubscribersClick,target:\"_blank\"},void 0,\"unsubscribers.csv\")),/*#__PURE__*/_jsx(\"li\",{},void 0,/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:this.handleCombinedClick,target:\"_blank\"},void 0,\"combined.csv\"))))));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,instance:ImmutablePropTypes.map.isRequired,supportsEmailList:PropTypes.bool,account:ImmutablePropTypes.map}),_temp))||_class)||_class);export{Dashboard as default};"],"names":["_class","AdminNav","state","props","instance","get","approvalCount","getIn","count","reportsCount","_dec","render","this","className","to","src","id","defaultMessage","_excluded","_this$props","title","icon","accountIds","limit","total","expandMessage","expandRoute","isEmpty","canExpand","size","take","map","accountId","key","AccountListPanel","Infinity","_class2","_temp","messages","expand","LatestAccountsPanel","sortedIds","sort","reverse","isSorted","every","is","injectIntl","args","componentDidMount","dispatch","then","setState","catch","intl","expandCount","formatMessage","withDate","withRelationship","getSubscribersCsv","getState","api","getUnsubscribersCsv","getCombinedCsv","saved","generateConfig","mode","group","value","open","tuple","approval","closed","RegistrationModePicker","e","config","target","snackbar","label","onChange","hint","checked","download","response","filename","url","URL","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","body","appendChild","click","remove","heading","Dashboard","me","supportsEmailList","emailList","account","preventDefault","v","userCount","mau","retention","Math","round","software","version","onClick","handleSubscribersClick","handleUnsubscribersClick","handleCombinedClick"],"sourceRoot":""}