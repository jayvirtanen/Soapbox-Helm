"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[46],{532:function(t,e,o){o.r(e),o.d(e,{default:function(){return U}});var s=o(1019),i=o(1018),n=o(3),a=o.n(n),r=o(4),u=o(1797),c=o(1017),l=o(2),p=o(30),f=o(13),d=(0,u.vU)({blocksSuccess:{id:"import_data.success.blocks",defaultMessage:"Blocks imported successfully"},followersSuccess:{id:"import_data.success.followers",defaultMessage:"Followers imported successfully"},mutesSuccess:{id:"import_data.success.mutes",defaultMessage:"Mutes imported successfully"}});function m(t,e){return function(o,s){return o({type:"IMPORT_FOLLOWS_REQUEST"}),(0,f.ZP)(s).post("/api/pleroma/follow_import",e).then((function(e){o(p.ZP.success(t.formatMessage(d.followersSuccess))),o({type:"IMPORT_FOLLOWS_SUCCESS",config:e.data})})).catch((function(t){o({type:"IMPORT_FOLLOWS_FAIL",error:t})}))}}function _(t,e){return function(o,s){return o({type:"IMPORT_BLOCKS_REQUEST"}),(0,f.ZP)(s).post("/api/pleroma/blocks_import",e).then((function(e){o(p.ZP.success(t.formatMessage(d.blocksSuccess))),o({type:"IMPORT_BLOCKS_SUCCESS",config:e.data})})).catch((function(t){o({type:"IMPORT_BLOCKS_FAIL",error:t})}))}}function g(t,e){return function(o,s){return o({type:"IMPORT_MUTES_REQUEST"}),(0,f.ZP)(s).post("/api/pleroma/mutes_import",e).then((function(e){o(p.ZP.success(t.formatMessage(d.mutesSuccess))),o({type:"IMPORT_MUTES_SUCCESS",config:e.data})})).catch((function(t){o({type:"IMPORT_MUTES_FAIL",error:t})}))}}var h,b,y,S,M,v,O,Z=o(10),w=o(16),P=(o(1),o(28)),C=(h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},h(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),T=(0,l.$j)()(b=(0,c.ZP)((S=y=function(t){function e(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var s=t.apply(this,e)||this;return(0,i.Z)(s,"state",{file:null,isLoading:!1}),(0,i.Z)(s,"handleSubmit",(function(t){var e=s.props,o=e.dispatch,i=e.action,n=e.intl,a=new FormData;a.append("list",s.state.file),s.setState({isLoading:!0}),o(i(n,a)).then((function(){s.setState({isLoading:!1})})).catch((function(t){s.setState({isLoading:!1})})),t.preventDefault()})),(0,i.Z)(s,"handleFileChange",(function(t){var e=(t.target.files||[])[0];s.setState({file:e})})),s}return C(e,t),e.prototype.render=function(){var t=this.props,e=t.intl,o=t.messages;return(0,s.Z)(P.NA,{onSubmit:this.handleSubmit},void 0,(0,s.Z)("fieldset",{disabled:this.state.isLoading},void 0,(0,s.Z)(P.H_,{},void 0,(0,s.Z)("div",{className:"fields-row file-picker"},void 0,(0,s.Z)("div",{className:"fields-row__column fields-group fields-row__column-6"},void 0,(0,s.Z)(P.Jc,{type:"file",accept:[".csv","text/csv"],label:e.formatMessage(o.input_label),hint:e.formatMessage(o.input_hint),onChange:this.handleFileChange,required:!0}))))),(0,s.Z)("div",{className:"actions"},void 0,(0,s.Z)("button",{name:"button",type:"submit",className:"btn button button-primary"},void 0,e.formatMessage(o.submit))))},e}(r.ZP),(0,i.Z)(y,"propTypes",{action:a().func.isRequired,messages:a().object.isRequired,dispatch:a().func.isRequired,intl:a().object.isRequired}),b=S))||b)||b,I=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function s(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}}(),L=(0,u.vU)({heading:{id:"column.import_data",defaultMessage:"Import data"},submit:{id:"import_data.actions.import",defaultMessage:"Import"}}),R=(0,u.vU)({input_label:{id:"import_data.follows_label",defaultMessage:"Follows"},input_hint:{id:"import_data.hints.follows",defaultMessage:"CSV file containing a list of followed accounts"},submit:{id:"import_data.actions.import_follows",defaultMessage:"Import follows"}}),k=(0,u.vU)({input_label:{id:"import_data.blocks_label",defaultMessage:"Blocks"},input_hint:{id:"import_data.hints.blocks",defaultMessage:"CSV file containing a list of blocked accounts"},submit:{id:"import_data.actions.import_blocks",defaultMessage:"Import blocks"}}),E=(0,u.vU)({input_label:{id:"import_data.mutes_label",defaultMessage:"Mutes"},input_hint:{id:"import_data.hints.mutes",defaultMessage:"CSV file containing a list of muted accounts"},submit:{id:"import_data.actions.import_mutes",defaultMessage:"Import mutes"}}),U=(0,l.$j)((function(t){return{features:(0,Z.N$)(t.get("instance"))}}))(M=(0,c.ZP)((O=v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return I(e,t),e.prototype.render=function(){var t=this.props,e=t.intl,o=t.features;return(0,s.Z)(w.Z,{icon:"cloud-upload-alt",heading:e.formatMessage(L.heading)},void 0,(0,s.Z)(T,{action:m,messages:R}),(0,s.Z)(T,{action:_,messages:k}),o.importMutes&&(0,s.Z)(T,{action:g,messages:E}))},e}(r.ZP),(0,i.Z)(v,"propTypes",{intl:a().object.isRequired,features:a().object}),M=O))||M)||M}}]);
//# sourceMappingURL=import_data-8f59d82bb2379d800240.chunk.js.map