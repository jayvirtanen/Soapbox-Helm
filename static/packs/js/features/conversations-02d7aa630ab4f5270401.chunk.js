"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[24],{521:function(o,t,n){n.r(t),n.d(t,{default:function(){return K}});var e,r,i,s,a=n(1019),c=n(1018),u=(n(1),n(0)),p=n(1797),l=n(1017),d=n(1021),f=n(2),h=n(22),v=n(652),y=n(195),g=n(51),M=n(36),_=n(145),Z=n(1015),w=n(1020),m=n(24),I=n.n(m),b=n(3),L=n.n(b),O=n(5),C=n.n(O),P=n(4),k=n(25),j=n(1794),S=n(245),x=(e=function(o,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])},e(o,t)},function(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),U=(0,j.EN)((s=i=function(o){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=o.apply(this,t)||this;return(0,c.Z)(e,"handleClick",(function(){if(e.props.history){var o=e.props,t=o.lastStatusId,n=o.unread,r=o.markRead;n&&r(),e.props.history.push("/statuses/".concat(t))}})),(0,c.Z)(e,"handleHotkeyMoveUp",(function(){e.props.onMoveUp(e.props.conversationId)})),(0,c.Z)(e,"handleHotkeyMoveDown",(function(){e.props.onMoveDown(e.props.conversationId)})),e}return x(t,o),t.prototype.render=function(){var o=this.props,t=o.accounts,n=o.lastStatusId,e=o.unread;return null===n?null:(0,a.Z)(S.Z,{id:n,unread:e,otherAccounts:t,onMoveUp:this.handleHotkeyMoveUp,onMoveDown:this.handleHotkeyMoveDown,onClick:this.handleClick})},t}(P.ZP),(0,c.Z)(i,"propTypes",{conversationId:L().string.isRequired,accounts:C().list.isRequired,lastStatusId:L().string,unread:L().bool.isRequired,onMoveUp:L().func,onMoveDown:L().func,markRead:L().func.isRequired,history:L().object}),r=s))||r,D=(0,f.$j)((function(o,t){var n=t.conversationId,e=o.getIn(["conversations","items"]).find((function(o){return o.get("id")===n}));return{accounts:e.get("accounts").map((function(t){return o.getIn(["accounts",t],null)})),unread:e.get("unread"),lastStatusId:e.get("last_status",null)}}),(function(o,t){var n=t.conversationId;return{markRead:function(){return o((0,y.v3)(n))}}}))(U),R=function(){var o=function(t,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])},o(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),T=["conversations","isLoading","onLoadMore"],q=function(o){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=o.apply(this,t)||this;return(0,c.Z)(e,"getCurrentIndex",(function(o){return e.props.conversations.findIndex((function(t){return t.get("id")===o}))})),(0,c.Z)(e,"handleMoveUp",(function(o){var t=e.getCurrentIndex(o)-1;e._selectChild(t,!0)})),(0,c.Z)(e,"handleMoveDown",(function(o){var t=e.getCurrentIndex(o)+1;e._selectChild(t,!1)})),(0,c.Z)(e,"setRef",(function(o){e.node=o})),(0,c.Z)(e,"handleLoadOlder",I()((function(){var o=e.props.conversations.getIn([-1,"id"]);o&&e.props.onLoadMore(o)}),300,{leading:!0})),e}return R(t,o),t.prototype._selectChild=function(o,t){var n=this.node.node,e=n.querySelector("article:nth-of-type(".concat(o+1,") .focusable"));e&&(t&&n.scrollTop>e.offsetTop?e.scrollIntoView(!0):!t&&n.scrollTop+n.clientHeight<e.offsetTop+e.offsetHeight&&e.scrollIntoView(!1),e.focus())},t.prototype.render=function(){var o=this,t=this.props,n=t.conversations,e=t.isLoading,r=t.onLoadMore,i=(0,w.Z)(t,T);return u.createElement(k.Z,(0,Z.Z)({},i,{onLoadMore:r&&this.handleLoadOlder,scrollKey:"direct",ref:this.setRef,isLoading:e,showLoading:e&&0===n.size}),n.map((function(t){return(0,a.Z)(D,{conversationId:t.get("id"),onMoveUp:o.handleMoveUp,onMoveDown:o.handleMoveDown},t.get("id"))})))},t}(P.ZP),H=q;(0,c.Z)(q,"propTypes",{conversations:C().list.isRequired,hasMore:L().bool,isLoading:L().bool,onLoadMore:L().func});var E,A=(0,f.$j)((function(o){return{conversations:o.getIn(["conversations","items"]),isLoading:o.getIn(["conversations","isLoading"],!0),hasMore:o.getIn(["conversations","hasMore"],!1)}}),(function(o){return{onLoadMore:function(t){return o((0,y.P4)({maxId:t}))}}}))(H),W=function(){var o=function(t,n){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])},o(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}(),$=(0,p.vU)({title:{id:"column.direct",defaultMessage:"Direct messages"},searchPlaceholder:{id:"direct.search_placeholder",defaultMessage:"Send a message toâ€¦"}}),K=(0,f.$j)()(E=(0,l.ZP)(E=function(o){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=o.apply(this,t)||this;return(0,c.Z)(e,"handleSuggestion",(function(o){e.props.dispatch((0,h.W3)(o))})),(0,c.Z)(e,"handleLoadMore",(function(o){e.props.dispatch((0,y.P4)({maxId:o}))})),e}return W(t,o),t.prototype.componentDidMount=function(){var o=this.props.dispatch;o((0,y.ol)()),o((0,y.P4)()),this.disconnect=o((0,g._o)())},t.prototype.componentWillUnmount=function(){this.props.dispatch((0,y.eC)()),this.disconnect&&(this.disconnect(),this.disconnect=null)},t.prototype.render=function(){var o=this.props,t=o.intl,n=o.hasUnread;return(0,a.Z)(M.Z,{label:t.formatMessage($.title)},void 0,(0,a.Z)(_.Z,{icon:"envelope",active:n,title:t.formatMessage($.title)}),(0,a.Z)(v.Z,{placeholder:t.formatMessage($.searchPlaceholder),onSelected:this.handleSuggestion}),(0,a.Z)(A,{scrollKey:"direct_timeline",timelineId:"direct",onLoadMore:this.handleLoadMore,emptyMessage:(0,a.Z)(d.Z,{id:"empty_column.direct",defaultMessage:"You don't have any direct messages yet. When you send or receive one, it will show up here."})}))},t}(u.PureComponent))||E)||E}}]);
//# sourceMappingURL=conversations-02d7aa630ab4f5270401.chunk.js.map