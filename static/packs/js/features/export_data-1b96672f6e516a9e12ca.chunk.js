"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[32],{531:function(t,e,n){n.r(e),n.d(e,{default:function(){return X}});var o=n(1019),r=n(1018),s=n(3),a=n.n(s),i=n(4),c=n(1797),u=n(1017),l=n(2),f=(n(1),n(30)),p=n(13),d=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,s=e.length;r<s;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},h=(0,c.vU)({blocksSuccess:{id:"export_data.success.blocks",defaultMessage:"Blocks exported successfully"},followersSuccess:{id:"export_data.success.followers",defaultMessage:"Followers exported successfully"},mutesSuccess:{id:"export_data.success.mutes",defaultMessage:"Mutes exported successfully"}});function _(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function y(t){var e=this;return function(n){return o=e,r=void 0,a=function(){var e,o,r;return function(t,e){var n,o,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}(this,(function(s){switch(s.label){case 0:e=n.data,o=[],r=(0,p.rx)(n).refs.find((function(t){return"next"===t.rel})),s.label=1;case 1:return r?[4,(0,p.ZP)(t).get(r.uri)]:[3,3];case 2:return n=s.sent(),r=(0,p.rx)(n).refs.find((function(t){return"next"===t.rel})),Array.prototype.push.apply(e,n.data),[3,1];case 3:return o=e.map((function(t){return t.fqn})),[2,d([],new Set(o),!0)]}}))},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{c(a.next(t))}catch(t){e(t)}}function i(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof s?o:new s((function(t){t(o)}))).then(n,i)}c((a=a.apply(o,r||[])).next())}));var o,r,s,a}}function b(t){return function(e,n){e({type:"EXPORT_FOLLOWS_REQUEST"});var o=n().get("me");return(0,p.ZP)(n).get("/api/v1/accounts/".concat(o,"/following?limit=40")).then(y(n)).then((function(n){(n=n.map((function(t){return t+",true"}))).unshift("Account address,Show boosts"),_(n.join("\n"),"export_followings.csv"),e(f.ZP.success(t.formatMessage(h.followersSuccess))),e({type:"EXPORT_FOLLOWS_SUCCESS"})})).catch((function(t){e({type:"EXPORT_FOLLOWS_FAIL",error:t})}))}}function g(t){return function(e,n){return e({type:"EXPORT_BLOCKS_REQUEST"}),(0,p.ZP)(n).get("/api/v1/blocks?limit=40").then(y(n)).then((function(n){_(n.join("\n"),"export_block.csv"),e(f.ZP.success(t.formatMessage(h.blocksSuccess))),e({type:"EXPORT_BLOCKS_SUCCESS"})})).catch((function(t){e({type:"EXPORT_BLOCKS_FAIL",error:t})}))}}function m(t){return function(e,n){return e({type:"EXPORT_MUTES_REQUEST"}),(0,p.ZP)(n).get("/api/v1/mutes?limit=40").then(y(n)).then((function(n){_(n.join("\n"),"export_mutes.csv"),e(f.ZP.success(t.formatMessage(h.mutesSuccess))),e({type:"EXPORT_MUTES_SUCCESS"})})).catch((function(t){e({type:"EXPORT_MUTES_FAIL",error:t})}))}}var v,x,S,w,E,O,M,P=n(10),Z=n(16),k=n(28),C=(v=function(t,e){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},v(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),T=(0,l.$j)()(x=(0,u.ZP)((w=S=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=t.apply(this,e)||this;return(0,r.Z)(o,"state",{isLoading:!1}),(0,r.Z)(o,"handleClick",(function(t){var e=o.props,n=e.dispatch,r=e.action,s=e.intl;o.setState({isLoading:!0}),n(r(s)).then((function(){o.setState({isLoading:!1})})).catch((function(t){o.setState({isLoading:!1})}))})),o}return C(e,t),e.prototype.render=function(){var t=this.props,e=t.intl,n=t.messages;return(0,o.Z)(k.NA,{},void 0,(0,o.Z)("h2",{className:"export-title"},void 0,e.formatMessage(n.input_label)),(0,o.Z)("div",{},void 0,(0,o.Z)("p",{className:"export-hint hint"},void 0,e.formatMessage(n.input_hint)),(0,o.Z)("button",{name:"button",type:"button",className:"button button-primary",onClick:this.handleClick},void 0,e.formatMessage(n.submit))))},e}(i.ZP),(0,r.Z)(S,"propTypes",{action:a().func.isRequired,messages:a().object.isRequired,dispatch:a().func.isRequired,intl:a().object.isRequired}),x=w))||x)||x,R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L=(0,c.vU)({heading:{id:"column.export_data",defaultMessage:"Export data"},submit:{id:"export_data.actions.export",defaultMessage:"Export"}}),j=(0,c.vU)({input_label:{id:"export_data.follows_label",defaultMessage:"Follows"},input_hint:{id:"export_data.hints.follows",defaultMessage:"Get a CSV file containing a list of followed accounts"},submit:{id:"export_data.actions.export_follows",defaultMessage:"Export follows"}}),U=(0,c.vU)({input_label:{id:"export_data.blocks_label",defaultMessage:"Blocks"},input_hint:{id:"export_data.hints.blocks",defaultMessage:"Get a CSV file containing a list of blocked accounts"},submit:{id:"export_data.actions.export_blocks",defaultMessage:"Export blocks"}}),A=(0,c.vU)({input_label:{id:"export_data.mutes_label",defaultMessage:"Mutes"},input_hint:{id:"export_data.hints.mutes",defaultMessage:"Get a CSV file containing a list of muted accounts"},submit:{id:"export_data.actions.export_mutes",defaultMessage:"Export mutes"}}),X=(0,l.$j)((function(t){return{features:(0,P.N$)(t.get("instance"))}}))(E=(0,u.ZP)((M=O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype.render=function(){var t=this.props.intl;return(0,o.Z)(Z.Z,{icon:"cloud-download-alt",heading:t.formatMessage(L.heading)},void 0,(0,o.Z)(T,{action:b,messages:j}),(0,o.Z)(T,{action:g,messages:U}),(0,o.Z)(T,{action:m,messages:A}))},e}(i.ZP),(0,r.Z)(O,"propTypes",{intl:a().object.isRequired,features:a().object}),E=M))||E)||E}}]);
//# sourceMappingURL=export_data-1b96672f6e516a9e12ca.chunk.js.map