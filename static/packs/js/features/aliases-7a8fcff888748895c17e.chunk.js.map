{"version":3,"file":"packs/js/features/aliases-7a8fcff888748895c17e.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/aliases/components/account.js","webpack://soapbox-fe/./app/soapbox/features/aliases/components/search.js","webpack://soapbox-fe/./app/soapbox/features/aliases/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import{addToAliases}from'soapbox/actions/aliases';import Avatar from'soapbox/components/avatar';import DisplayName from'soapbox/components/display_name';import IconButton from'soapbox/components/icon_button';import{makeGetAccount}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';const messages=defineMessages({add:{\"id\":\"aliases.account.add\",\"defaultMessage\":\"Create alias\"}});const makeMapStateToProps=()=>{const getAccount=makeGetAccount();const mapStateToProps=(state,{accountId,added,aliases})=>{const me=state.get('me');const instance=state.get('instance');const features=getFeatures(instance);const account=getAccount(state,accountId);const apId=account.getIn(['pleroma','ap_id']);const name=features.accountMoving?account.get('acct'):apId;return{account,apId,added:typeof added==='undefined'?aliases.includes(name):added,me};};return mapStateToProps;};const mapDispatchToProps=dispatch=>({onAdd:(intl,apId)=>dispatch(addToAliases(intl,apId))});let Account=(_dec=connect(makeMapStateToProps,mapDispatchToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class Account extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleOnAdd\",()=>this.props.onAdd(this.props.intl,this.props.account));}render(){const{account,accountId,intl,added,me}=this.props;let button;if(!added&&accountId!==me){button=/*#__PURE__*/_jsx(\"div\",{className:\"account__relationship\"},void 0,/*#__PURE__*/_jsx(IconButton,{src:require('@tabler/icons/icons/plus.svg'),title:intl.formatMessage(messages.add),onClick:this.handleOnAdd}));}return/*#__PURE__*/_jsx(\"div\",{className:\"account\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__wrapper\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__display-name\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"account__avatar-wrapper\"},void 0,/*#__PURE__*/_jsx(Avatar,{account:account,size:36})),/*#__PURE__*/_jsx(DisplayName,{account:account})),button));}},_defineProperty(_class2,\"propTypes\",{account:ImmutablePropTypes.map.isRequired,apId:PropTypes.string.isRequired,intl:PropTypes.object.isRequired,onAdd:PropTypes.func.isRequired,added:PropTypes.bool}),_defineProperty(_class2,\"defaultProps\",{added:false}),_temp))||_class)||_class);export{Account as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import classNames from'classnames';import React from'react';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import Button from'soapbox/components/button';import Icon from'soapbox/components/icon';import{fetchAliasesSuggestions,clearAliasesSuggestions,changeAliasesSuggestions}from'../../../actions/aliases';const messages=defineMessages({search:{\"id\":\"aliases.search\",\"defaultMessage\":\"Search your old account\"},searchTitle:{\"id\":\"tabs_bar.search\",\"defaultMessage\":\"Search\"}});const mapStateToProps=state=>({value:state.getIn(['aliases','suggestions','value'])});const mapDispatchToProps=dispatch=>({onSubmit:value=>dispatch(fetchAliasesSuggestions(value)),onClear:()=>dispatch(clearAliasesSuggestions()),onChange:value=>dispatch(changeAliasesSuggestions(value))});let Search=(_dec=connect(mapStateToProps,mapDispatchToProps),_dec(_class=injectIntl(_class=class Search extends React.PureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleChange\",e=>{this.props.onChange(e.target.value);});_defineProperty(this,\"handleKeyUp\",e=>{if(e.keyCode===13){this.props.onSubmit(this.props.value);}});_defineProperty(this,\"handleSubmit\",()=>{this.props.onSubmit(this.props.value);});_defineProperty(this,\"handleClear\",()=>{this.props.onClear();});}render(){const{value,intl}=this.props;const hasValue=value.length>0;return/*#__PURE__*/_jsx(\"div\",{className:\"aliases_search search\"},void 0,/*#__PURE__*/_jsx(\"label\",{},void 0,/*#__PURE__*/_jsx(\"span\",{style:{display:'none'}},void 0,intl.formatMessage(messages.search)),/*#__PURE__*/_jsx(\"input\",{className:\"search__input\",type:\"text\",value:value,onChange:this.handleChange,onKeyUp:this.handleKeyUp,placeholder:intl.formatMessage(messages.search)})),/*#__PURE__*/_jsx(\"div\",{role:\"button\",tabIndex:\"0\",className:\"search__icon\",onClick:this.handleClear},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/backspace.svg'),\"aria-label\":intl.formatMessage(messages.search),className:classNames('svg-icon--backspace',{active:hasValue})})),/*#__PURE__*/_jsx(Button,{onClick:this.handleSubmit},void 0,intl.formatMessage(messages.searchTitle)));}})||_class)||_class);export{Search as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import{List as ImmutableList}from'immutable';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{fetchAliases,removeFromAliases}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import ScrollableList from'soapbox/components/scrollable_list';import{makeGetAccount}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';import Column from'../ui/components/column';import ColumnSubheading from'../ui/components/column_subheading';import Account from'./components/account';import Search from'./components/search';const messages=defineMessages({heading:{\"id\":\"column.aliases\",\"defaultMessage\":\"Account aliases\"},subheading_add_new:{\"id\":\"column.aliases.subheading_add_new\",\"defaultMessage\":\"Add New Alias\"},create_error:{\"id\":\"column.aliases.create_error\",\"defaultMessage\":\"Error creating alias\"},delete_error:{\"id\":\"column.aliases.delete_error\",\"defaultMessage\":\"Error deleting alias\"},subheading_aliases:{\"id\":\"column.aliases.subheading_aliases\",\"defaultMessage\":\"Current aliases\"},delete:{\"id\":\"column.aliases.delete\",\"defaultMessage\":\"Delete\"}});const makeMapStateToProps=()=>{const getAccount=makeGetAccount();const mapStateToProps=state=>{const me=state.get('me');const account=getAccount(state,me);const instance=state.get('instance');const features=getFeatures(instance);let aliases;if(features.accountMoving)aliases=state.getIn(['aliases','aliases','items'],ImmutableList());else aliases=account.getIn(['pleroma','also_known_as']);return{aliases,searchAccountIds:state.getIn(['aliases','suggestions','items']),loaded:state.getIn(['aliases','suggestions','loaded'])};};return mapStateToProps;};let Aliases=(_dec=connect(makeMapStateToProps),_dec(_class=injectIntl(_class=class Aliases extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"componentDidMount\",e=>{const{dispatch}=this.props;dispatch(fetchAliases);});_defineProperty(this,\"handleFilterDelete\",e=>{const{dispatch,intl}=this.props;dispatch(removeFromAliases(intl,e.currentTarget.dataset.value));});}render(){const{intl,aliases,searchAccountIds,loaded}=this.props;const emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases\",defaultMessage:\"You haven't created any account alias yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"aliases-settings-panel\",icon:\"suitcase\",heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ColumnSubheading,{text:intl.formatMessage(messages.subheading_add_new)}),/*#__PURE__*/_jsx(Search,{}),loaded&&searchAccountIds.size===0?/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases.suggestions\",defaultMessage:\"There are no account suggestions available for the provided term.\"})):/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts\"},void 0,searchAccountIds.map(accountId=>/*#__PURE__*/_jsx(Account,{accountId:accountId,aliases:aliases},accountId))),/*#__PURE__*/_jsx(ColumnSubheading,{text:intl.formatMessage(messages.subheading_aliases)}),/*#__PURE__*/_jsx(\"div\",{className:\"aliases-settings-panel\"},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"aliases\",emptyMessage:emptyMessage},void 0,aliases.map((alias,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"alias__container\"},i,/*#__PURE__*/_jsx(\"div\",{className:\"alias__details\"},void 0,/*#__PURE__*/_jsx(\"span\",{className:\"alias__list-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.account_label\",defaultMessage:\"Old account:\"})),/*#__PURE__*/_jsx(\"span\",{className:\"alias__list-value\"},void 0,alias)),/*#__PURE__*/_jsx(\"div\",{className:\"alias__delete\",role:\"button\",tabIndex:\"0\",onClick:this.handleFilterDelete,\"data-value\":alias,\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(Icon,{className:\"alias__delete-icon\",id:\"times\",size:40}),/*#__PURE__*/_jsx(\"span\",{className:\"alias__delete-label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.aliases_list_delete\",defaultMessage:\"Unlink alias\"}))))))));}})||_class)||_class);export{Aliases as default};"],"names":["_dec","_class","_class2","_temp","messages","add","Account","getAccount","state","accountId","added","aliases","me","get","instance","features","account","apId","getIn","name","accountMoving","includes","dispatch","onAdd","intl","injectIntl","args","props","render","button","this","className","src","title","formatMessage","onClick","handleOnAdd","size","search","searchTitle","Search","value","onSubmit","onClear","onChange","e","target","keyCode","hasValue","length","style","display","type","handleChange","onKeyUp","handleKeyUp","placeholder","role","tabIndex","handleClear","active","handleSubmit","heading","subheading_add_new","create_error","delete_error","subheading_aliases","delete","Aliases","searchAccountIds","loaded","currentTarget","dataset","emptyMessage","id","defaultMessage","icon","text","map","scrollKey","alias","i","handleFilterDelete"],"sourceRoot":""}