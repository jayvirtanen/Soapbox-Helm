"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[8],{1188:function(e,t,o){o.r(t),o.d(t,{default:function(){return P}});var n,a,i,s,r=o(1019),c=o(1018),l=(o(1),o(320)),d=o(3),p=o.n(d),u=o(5),f=o.n(u),m=o(4),h=o(1021),_=o(2),g=o(1800),v=o(9),Z=o(26),y=o(36),w=o(8),b=o(1267),M=o(172),N=o(12),I=o(10),k=o(15),L=o(673),O=o(394),S=o(33),C=o(1259),j=o(511),T=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),P=(0,_.$j)((function(){var e=(0,N.$r)();return function(t,o){var n=o.params,a=o.withReplies,i=void 0!==a&&a,s=n.username||"",r=t.get("me"),c=(t.getIn(["accounts",-1,"username"])||"").toLowerCase()===s.toLowerCase(),d=(0,Z.UX)(t),p=(0,I.N$)(t.get("instance")),u=-1,f=s,m=null;if(c)u=null;else{var h=(0,N.XO)(t,s);u=h?h.getIn(["id"],null):-1,f=h?h.getIn(["acct"],""):"",m=h?h.get("url"):""}var _=i?"".concat(u,":with_replies"):u,g=t.getIn(["relationships",u,"blocked_by"],!1),y=r!==u&&g&&!p.blockersVisible,w=(0,v.Gw)(t).getIn(["account_timeline","shows","pinned"])&&!i;return{accountId:u,unavailable:y,accountUsername:f,accountApId:m,isBlocked:g,isAccount:!!t.getIn(["accounts",u]),statusIds:e(t,{type:"account:".concat(_),prefix:"account_timeline"}),featuredStatusIds:w?e(t,{type:"account:".concat(u,":pinned"),prefix:"account_timeline"}):(0,l.OrderedSet)(),isLoading:t.getIn(["timelines","account:".concat(_),"isLoading"]),hasMore:t.getIn(["timelines","account:".concat(_),"hasMore"]),me:r,patronEnabled:d.getIn(["extensions","patron","enabled"])}}}))((s=i=function(e){function t(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var n=e.apply(this,t)||this;return(0,c.Z)(n,"state",{collapsed:!0,animating:!1}),(0,c.Z)(n,"handleLoadMore",(function(e){n.props.accountId&&-1!==n.props.accountId&&n.props.dispatch((0,S.Cn)(n.props.accountId,{maxId:e,withReplies:n.props.withReplies}))})),(0,c.Z)(n,"handleToggleClick",(function(e){e.stopPropagation(),n.setState({collapsed:!n.state.collapsed,animating:!0})})),(0,c.Z)(n,"handleTransitionEnd",(function(){n.setState({animating:!1})})),n}return T(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.params.username,o=e.accountId,n=e.accountApId,a=e.withReplies,i=e.me,s=e.patronEnabled;o&&-1!==o?(this.props.dispatch((0,k.$G)(o)),i&&this.props.dispatch((0,L.gL)(o)),a||this.props.dispatch((0,S.hj)(o)),s&&n&&this.props.dispatch((0,O.wp)(n)),this.props.dispatch((0,S.Cn)(o,{withReplies:a}))):this.props.dispatch((0,k.UL)(t))},t.prototype.componentDidUpdate=function(e){var t=this.props,o=t.params.username,n=t.me,a=t.accountId,i=t.withReplies,s=t.accountApId,r=t.patronEnabled;a&&-1!==a&&a!==e.accountId||i!==e.withReplies?(this.props.dispatch((0,k.$G)(a)),n&&this.props.dispatch((0,L.gL)(a)),i||this.props.dispatch((0,S.hj)(a)),r&&s&&this.props.dispatch((0,O.wp)(s)),this.props.dispatch((0,S.Cn)(a,{withReplies:i}))):o&&o!==e.params.username&&this.props.dispatch((0,k.UL)(o))},t.prototype.render=function(){var e=this.props,t=e.statusIds,o=e.featuredStatusIds,n=e.isLoading,a=e.hasMore,i=e.isBlocked,s=e.isAccount,c=e.accountId,l=e.unavailable,d=e.accountUsername;return s||-1===c?-1===c||!t&&n?(0,r.Z)(y.Z,{},void 0,(0,r.Z)(C.Z,{})):l?(0,r.Z)(y.Z,{},void 0,(0,r.Z)("div",{className:"empty-column-indicator"},void 0,i?(0,r.Z)(h.Z,{id:"empty_column.account_blocked",defaultMessage:"You are blocked by @{accountUsername}.",values:{accountUsername:d}}):(0,r.Z)(h.Z,{id:"empty_column.account_unavailable",defaultMessage:"Profile unavailable"}))):(0,r.Z)(y.Z,{className:"account-timeline",transparent:!0},void 0,(0,r.Z)(M.Z,{message:"@".concat(d)}),(0,r.Z)("div",{className:"account__section-headline"},void 0,(0,r.Z)(g.OL,{exact:!0,to:"/@".concat(d)},void 0,(0,r.Z)(h.Z,{id:"account.posts",defaultMessage:"Posts"})),(0,r.Z)(g.OL,{exact:!0,to:"/@".concat(d,"/with_replies")},void 0,(0,r.Z)(h.Z,{id:"account.posts_with_replies",defaultMessage:"Posts and replies"})),(0,r.Z)(g.OL,{exact:!0,to:"/@".concat(d,"/media")},void 0,(0,r.Z)(h.Z,{id:"account.media",defaultMessage:"Media"})),(0,r.Z)("div",{className:"column-header__buttons"},void 0,(0,r.Z)("button",{onClick:this.handleToggleClick},void 0,(0,r.Z)(w.Z,{id:"sliders"})))),(0,r.Z)(j.Z,{scrollKey:"account_timeline",statusIds:t,featuredStatusIds:o,isLoading:n,hasMore:a,onLoadMore:this.handleLoadMore,emptyMessage:(0,r.Z)(h.Z,{id:"empty_column.account_timeline",defaultMessage:"No posts here!"})})):(0,r.Z)(y.Z,{},void 0,(0,r.Z)(b.Z,{}))},t}(m.ZP),(0,c.Z)(i,"propTypes",{params:p().object.isRequired,dispatch:p().func.isRequired,statusIds:f().orderedSet,featuredStatusIds:f().orderedSet,isLoading:p().bool,hasMore:p().bool,withReplies:p().bool,isAccount:p().bool,unavailable:p().bool}),a=s))||a},1120:function(e,t,o){o.r(t),o.d(t,{default:function(){return A}});var n,a,i=o(1019),s=o(1018),r=(o(1),o(7)),c=o.n(r),l=o(320),d=o(3),p=o.n(d),u=o(5),f=o.n(u),m=o(4),h=o(1797),_=o(1021),g=o(1017),v=o(2),Z=o(189),y=o(1257),w=o(8),b=o(183),M=o(45),N=o(34),I=o(17),k=o(55),L=o(0),O=o(1800),S=o(1254),C=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),j=(0,h.vU)({followers:{id:"account.followers",defaultMessage:"Followers"},follows:{id:"account.follows",defaultMessage:"Follows"}}),T=(0,g.ZP)(a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.intl,o=e.className,n=this.props.account;if(!n)return null;var a=n.get("acct");return(0,i.Z)("div",{className:c()("profile-stats",o)},void 0,(0,i.Z)(O.OL,{className:"profile-stat",to:"/@".concat(a,"/followers"),onClick:this.handleClose,title:t.formatNumber(n.get("followers_count"))},void 0,(0,i.Z)("strong",{className:"profile-stat__value"},void 0,(0,S.w8)(n.get("followers_count"))),(0,i.Z)("span",{className:"profile-stat__label"},void 0,t.formatMessage(j.followers))),(0,i.Z)(O.OL,{className:"profile-stat",to:"/@".concat(a,"/following"),onClick:this.handleClose,title:t.formatNumber(n.get("following_count"))},void 0,(0,i.Z)("strong",{className:"profile-stat__value"},void 0,(0,S.w8)(n.get("following_count"))),(0,i.Z)("span",{className:"profile-stat__label"},void 0,t.formatMessage(j.follows))))},t}(L.PureComponent))||a,P=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),x=/\$([a-zA-Z]*)/i,D=function(e){return(e.match(x)||[])[1]},R=(0,h.vU)({linkVerifiedOn:{id:"account.link_verified_on",defaultMessage:"Ownership of this link was checked on {date}"},account_locked:{id:"account.locked_info",defaultMessage:"This account privacy status is set to locked. The owner manually reviews who can follow them."},deactivated:{id:"account.deactivated",defaultMessage:"Deactivated"},bot:{id:"account.badges.bot",defaultMessage:"Bot"}}),B={month:"short",day:"numeric",year:"numeric",hour12:!1,hour:"2-digit",minute:"2-digit"},U=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=e.apply(this,t)||this;return(0,s.Z)(a,"getStaffBadge",(function(){var e=a.props.account;return(0,I.GJ)(e)?(0,i.Z)(y.Z,{slug:"admin",title:"Admin"},"staff"):(0,I.vJ)(e)?(0,i.Z)(y.Z,{slug:"moderator",title:"Moderator"},"staff"):null})),(0,s.Z)(a,"getBadges",(function(){var e=a.props.account,t=a.getStaffBadge(),o=e.getIn(["patron","is_patron"]),n=[];return t&&n.push(t),o&&n.push((0,i.Z)(y.Z,{slug:"patron",title:"Patron"},"patron")),n})),(0,s.Z)(a,"getBirthday",(function(){var e=a.props,t=e.account,n=e.intl,s=t.get("birthday");if(!s)return null;var r=n.formatDate(s,{timeZone:"UTC",day:"numeric",month:"long",year:"numeric"}),c=new Date(s),l=new Date;return c.getDate()===l.getDate()&&c.getMonth()===l.getMonth()?(0,i.Z)("div",{className:"profile-info-panel-content__birthday",title:r},void 0,(0,i.Z)(w.Z,{src:o(289)}),(0,i.Z)(_.Z,{id:"account.birthday_today",defaultMessage:"Birthday is today!"})):(0,i.Z)("div",{className:"profile-info-panel-content__birthday"},void 0,(0,i.Z)(w.Z,{src:o(289)}),(0,i.Z)(_.Z,{id:"account.birthday",defaultMessage:"Born {date}",values:{date:r}}))})),(0,s.Z)(a,"handleShowNote",(function(e){var t=a.props,o=t.account,n=t.onShowNote;e.preventDefault(),n(o)})),a}return P(t,e),t.prototype.render=function(){var e=this.props,t=e.account,n=e.displayFqn,a=e.intl,s=e.identity_proofs,r=e.username;if(!t)return(0,i.Z)("div",{className:"profile-info-panel"},void 0,(0,i.Z)("div",{className:"profile-info-panel__content"},void 0,(0,i.Z)("div",{className:"profile-info-panel-content__name"},void 0,(0,i.Z)("h1",{},void 0,(0,i.Z)("span",{}),(0,i.Z)("small",{},void 0,"@",r)))));var l={__html:t.get("note_emojified")},d=t.get("fields"),p=!t.getIn(["pleroma","is_active"],!0),u=p?{__html:a.formatMessage(R.deactivated)}:{__html:t.get("display_name_html")},f=a.formatDate(t.get("created_at"),{month:"long",year:"numeric"}),m=t.get("verified"),h=this.getBadges();return(0,i.Z)("div",{className:c()("profile-info-panel",{deactivated:p})},void 0,(0,i.Z)("div",{className:"profile-info-panel__content"},void 0,(0,i.Z)("div",{className:"profile-info-panel-content__name"},void 0,(0,i.Z)("h1",{},void 0,(0,i.Z)("span",{dangerouslySetInnerHTML:u,className:"profile-info-panel__name-content"}),m&&(0,i.Z)(b.Z,{}),t.get("bot")&&(0,i.Z)(y.Z,{slug:"bot",title:a.formatMessage(R.bot)}),(0,i.Z)("small",{},void 0,"@",(0,I.F7)(t,n),t.get("locked")&&(0,i.Z)(w.Z,{src:o(87),title:a.formatMessage(R.account_locked)})))),h.length>0&&(0,i.Z)("div",{className:"profile-info-panel-content__badges"},void 0,h),(0,i.Z)("div",{className:"profile-info-panel-content__deactivated"},void 0,(0,i.Z)(_.Z,{id:"account.deactivated_description",defaultMessage:"This account has been deactivated."})),t.get("note").length>0&&"<p></p>"!==t.get("note")&&(0,i.Z)("div",{className:"profile-info-panel-content__bio",dangerouslySetInnerHTML:l}),(0,I.D0)(t)&&(0,i.Z)("div",{className:"profile-info-panel-content__join-date"},void 0,(0,i.Z)(w.Z,{src:o(1234)}),(0,i.Z)(_.Z,{id:"account.member_since",defaultMessage:"Joined {date}",values:{date:f}})),this.getBirthday(),t.get("location")&&(0,i.Z)("div",{className:"profile-info-panel-content__location"},void 0,(0,i.Z)(w.Z,{src:o(1235)}),t.get("location")),!!t.getIn(["relationship","note"])&&(0,i.Z)("a",{href:"#",className:"profile-info-panel-content__note",onClick:this.handleShowNote},void 0,(0,i.Z)(w.Z,{src:o(386)}),(0,i.Z)(_.Z,{id:"account.show_note",defaultMessage:"Show note"})),(0,i.Z)(T,{className:"profile-info-panel-content__stats",account:t}),(d.size>0||s.size>0)&&(0,i.Z)("div",{className:"profile-info-panel-content__fields"},void 0,s.map((function(e,t){return(0,i.Z)("dl",{className:"test"},t,(0,i.Z)("dt",{dangerouslySetInnerHTML:{__html:e.get("provider")}}),(0,i.Z)("dd",{className:"verified"},void 0,(0,i.Z)("a",{href:e.get("proof_url"),target:"_blank",rel:"noopener"},void 0,(0,i.Z)("span",{title:a.formatMessage(R.linkVerifiedOn,{date:a.formatDate(e.get("updated_at"),B)})},void 0,(0,i.Z)(w.Z,{id:"check",className:"verified__mark"}))),(0,i.Z)("a",{href:e.get("profile_url"),target:"_blank",rel:"noopener"},void 0,(0,i.Z)("span",{dangerouslySetInnerHTML:{__html:" "+e.get("provider_username")}}))))})),d.map((function(e,t){return o=e.get("name",""),Boolean(D(o))?(0,i.Z)(M.Z,{fetchComponent:N.UE},t,(function(o){return(0,i.Z)(o,{ticker:D(e.get("name")).toLowerCase(),address:e.get("value_plain")},t)})):(0,i.Z)("dl",{className:"profile-info-panel-content__fields__item"},t,(0,i.Z)("dt",{dangerouslySetInnerHTML:{__html:e.get("name_emojified")},title:e.get("name")}),(0,i.Z)("dd",{className:e.get("verified_at")&&"verified",title:e.get("value_plain")},void 0,e.get("verified_at")&&(0,i.Z)("span",{title:a.formatMessage(R.linkVerifiedOn,{date:a.formatDate(e.get("verified_at"),B)})},void 0,(0,i.Z)(w.Z,{id:"check",className:"verified__mark"}))," ",(0,i.Z)("span",{dangerouslySetInnerHTML:{__html:e.get("value_emojified")}})));var o})))))},t}(m.ZP);(0,s.Z)(U,"propTypes",{account:f().map,identity_proofs:f().list,intl:p().object.isRequired,username:p().string,displayFqn:p().bool,onShowNote:p().func});var A=(0,g.ZP)((0,v.$j)((function(e,t){var o=t.account;return{identity_proofs:o?e.getIn(["identity_proofs",o.get("id")],(0,l.List)()):(0,l.List)(),domain:e.getIn(["meta","domain"]),displayFqn:(0,k.$X)(e)}}),(function(e){return{onShowNote:function(t){e((0,Z.px)(t))}}}),null,{forwardRef:!0})(U))},1234:function(e,t,o){e.exports=o.p+"packs/icons/calendar-350530e0.svg"},1235:function(e,t,o){e.exports=o.p+"packs/icons/map-pin-883d564a.svg"}}]);
//# sourceMappingURL=account_timeline-378bfe70abb073f2de77.chunk.js.map