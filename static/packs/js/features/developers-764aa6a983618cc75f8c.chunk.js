"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[26],{830:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var n,o,s,r,i=a(1019),l=a(1018),c=(a(1),a(320)),p=a(3),d=a.n(p),u=a(5),f=a.n(u),h=a(4),v=a(1797),g=a(1017),Z=a(1021),_=a(2),m=a(333),b=a(334),y=a(28),w=a(148),S=a(16),N=a(17),M=a(10),O=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),C=(0,v.vU)({heading:{id:"column.app_create",defaultMessage:"Create app"},namePlaceholder:{id:"app_create.name_placeholder",defaultMessage:"e.g. 'Soapbox'"},scopesPlaceholder:{id:"app_create.scopes_placeholder",defaultMessage:"e.g. 'read write follow'"}}),P=(0,_.$j)((function(e){var t=e.get("me"),a=e.getIn(["accounts",t]),n=e.get("instance");return{account:a,defaultScopes:(0,M.N$)(n).scopes}}))(o=(0,g.ZP)((r=s=function(e){function t(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=e.apply(this,t)||this;return(0,l.Z)(n,"initialState",(function(){return{params:(0,c.Map)({client_name:"",redirect_uris:"urn:ietf:wg:oauth:2.0:oob",scopes:"",website:""}),app:null,token:null,isLoading:!1,explanationExpanded:!0}})),(0,l.Z)(n,"state",n.initialState()),(0,l.Z)(n,"handleCreateApp",(function(){var e=n.props,t=e.dispatch,a=e.account,o=n.state.params,s=(0,N.BS)(a);return t((0,m.ri)(o.toJS(),s)).then((function(e){return n.setState({app:e})}))})),(0,l.Z)(n,"handleCreateToken",(function(){var e=n.props,t=e.dispatch,a=e.account,o=n.state,s=o.app,r=o.params,i=(0,N.BS)(a),l={client_id:s.client_id,client_secret:s.client_secret,redirect_uri:r.get("redirect_uri"),grant_type:"client_credentials",scope:r.get("scopes")};return t((0,b.eQ)(l,i)).then((function(e){return n.setState({token:e})}))})),(0,l.Z)(n,"handleSubmit",(function(e){n.setState({isLoading:!0}),n.handleCreateApp().then(n.handleCreateToken).then((function(){n.scrollToTop(),n.setState({isLoading:!1})})).catch((function(e){console.error(e),n.setState({isLoading:!1})}))})),(0,l.Z)(n,"setParam",(function(e,t){var a=n.state.params.set(e,t);n.setState({params:a})})),(0,l.Z)(n,"handleParamChange",(function(e){return function(t){n.setParam(e,t.target.value)}})),(0,l.Z)(n,"resetState",(function(){n.setState(n.initialState())})),(0,l.Z)(n,"handleReset",(function(e){n.resetState(),n.scrollToTop()})),(0,l.Z)(n,"toggleExplanation",(function(e){n.setState({explanationExpanded:e})})),(0,l.Z)(n,"scrollToTop",(function(){window.scrollTo({top:0,behavior:"smooth"})})),(0,l.Z)(n,"renderResults",(function(){var e=n.props.intl,t=n.state,a=t.app,o=t.token,s=t.explanationExpanded;return(0,i.Z)(S.Z,{heading:e.formatMessage(C.heading)},void 0,(0,i.Z)(y.NA,{},void 0,(0,i.Z)(y.H_,{},void 0,(0,i.Z)(w.Z,{headline:(0,i.Z)(Z.Z,{id:"app_create.results.explanation_title",defaultMessage:"App created successfully"}),expanded:s,onToggle:n.toggleExplanation},void 0,(0,i.Z)(Z.Z,{id:"app_create.results.explanation_text",defaultMessage:"You created a new app and token! Please copy the credentials somewhere; you will not see them again after navigating away from this page."}))),(0,i.Z)(y.H_,{},void 0,(0,i.Z)("div",{className:"code-editor"},void 0,(0,i.Z)(y.pm,{label:(0,i.Z)(Z.Z,{id:"app_create.results.app_label",defaultMessage:"App"}),value:JSON.stringify(a,null,2),rows:10,readOnly:!0}))),(0,i.Z)(y.H_,{},void 0,(0,i.Z)("div",{className:"code-editor"},void 0,(0,i.Z)(y.pm,{label:(0,i.Z)(Z.Z,{id:"app_create.results.token_label",defaultMessage:"OAuth token"}),value:JSON.stringify(o,null,2),rows:10,readOnly:!0}))),(0,i.Z)("div",{className:"actions"},void 0,(0,i.Z)("button",{name:"button",onClick:n.handleReset,className:"btn button button-primary"},void 0,(0,i.Z)(Z.Z,{id:"app_create.restart",defaultMessage:"Create another"})))))})),n}return O(t,e),t.prototype.render=function(){var e=this.props.intl,t=this.state,a=t.params,n=t.app,o=t.token,s=t.isLoading;return n&&o?this.renderResults():(0,i.Z)(S.Z,{heading:e.formatMessage(C.heading)},void 0,(0,i.Z)(y.NA,{onSubmit:this.handleSubmit},void 0,(0,i.Z)("fieldset",{disabled:s},void 0,(0,i.Z)(y.oi,{label:(0,i.Z)(Z.Z,{id:"app_create.name_label",defaultMessage:"App name"}),placeholder:e.formatMessage(C.namePlaceholder),onChange:this.handleParamChange("client_name"),value:a.get("client_name"),required:!0}),(0,i.Z)(y.oi,{label:(0,i.Z)(Z.Z,{id:"app_create.website_label",defaultMessage:"Website"}),placeholder:"https://soapbox.pub",onChange:this.handleParamChange("website"),value:a.get("website")}),(0,i.Z)(y.oi,{label:(0,i.Z)(Z.Z,{id:"app_create.redirect_uri_label",defaultMessage:"Redirect URIs"}),placeholder:"https://example.com",onChange:this.handleParamChange("redirect_uris"),value:a.get("redirect_uris"),required:!0}),(0,i.Z)(y.oi,{label:(0,i.Z)(Z.Z,{id:"app_create.scopes_label",defaultMessage:"Scopes"}),placeholder:e.formatMessage(C.scopesPlaceholder),onChange:this.handleParamChange("scopes"),value:a.get("scopes"),required:!0}),(0,i.Z)("div",{className:"actions"},void 0,(0,i.Z)("button",{name:"button",type:"submit",className:"btn button button-primary"},void 0,(0,i.Z)(Z.Z,{id:"app_create.submit",defaultMessage:"Create app"}))))))},t}(h.ZP),(0,l.Z)(s,"propTypes",{intl:d().object.isRequired,dispatch:d().func.isRequired,account:f().map.isRequired,defaultScopes:d().string}),o=r))||o)||o},1129:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var n,o,s,r,i=a(1019),l=a(0),c=a(2),p=a(9),d=a(1018),u=(a(1),a(1797)),f=a(1017),h=a(1021),v=a(30),g=a(28),Z=a(16),_=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),m=(0,u.vU)({heading:{id:"column.developers",defaultMessage:"Developers"},answerLabel:{id:"developers.challenge.answer_label",defaultMessage:"Answer"},answerPlaceholder:{id:"developers.challenge.answer_placeholder",defaultMessage:"Your answer"},success:{id:"developers.challenge.success",defaultMessage:"You are now a developer"},fail:{id:"developers.challenge.fail",defaultMessage:"Wrong answer"}}),b=(0,c.$j)()(o=(0,f.ZP)(o=function(e){function t(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=e.apply(this,t)||this;return(0,d.Z)(n,"state",{answer:""}),(0,d.Z)(n,"handleChangeAnswer",(function(e){n.setState({answer:e.target.value})})),(0,d.Z)(n,"handleSubmit",(function(e){var t=n.props,a=t.intl,o=t.dispatch;"boxsoap"===n.state.answer?(o((0,p.yD)(["isDeveloper"],!0)),o(v.ZP.success(a.formatMessage(m.success)))):o(v.ZP.error(a.formatMessage(m.fail)))})),n}return _(t,e),t.prototype.render=function(){var e=this.props.intl;return(0,i.Z)(Z.Z,{heading:e.formatMessage(m.heading)},void 0,(0,i.Z)("div",{className:"developers-challenge"},void 0,(0,i.Z)(g.NA,{onSubmit:this.handleSubmit},void 0,(0,i.Z)(h.Z,{id:"developers.challenge.message",defaultMessage:"What is the result of calling {function}?",values:{function:(0,i.Z)("span",{className:"code"},void 0,"soapbox()")}}),(0,i.Z)("pre",{className:"code"},void 0,"function soapbox() {\n  return 'soap|box'.split('|').reverse().join('');\n}"),(0,i.Z)(g.oi,{name:"answer",label:e.formatMessage(m.answerLabel),placeholder:e.formatMessage(m.answerPlaceholder),onChange:this.handleChangeAnswer,value:this.state.answer}),(0,i.Z)("div",{className:"actions"},void 0,(0,i.Z)("button",{name:"button",type:"submit",className:"btn button button-primary"},void 0,(0,i.Z)(h.Z,{id:"developers.challenge.submit",defaultMessage:"Become a developer"}))))))},t}(l.Component))||o)||o,y=a(1800),w=a(1794),S=a(8),N=function(){var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},e(t,a)};return function(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),M=(0,u.vU)({heading:{id:"column.developers",defaultMessage:"Developers"},leave:{id:"developers.leave",defaultMessage:"You have left developers"}}),O=(0,c.$j)()(s=(0,f.ZP)(s=(0,w.EN)(s=function(e){function t(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=e.apply(this,t)||this;return(0,d.Z)(n,"leaveDevelopers",(function(e){var t=n.props,a=t.intl,o=t.dispatch;o((0,p.yD)(["isDeveloper"],!1)),o(v.ZP.success(a.formatMessage(M.leave))),n.props.history.push("/"),e.preventDefault()})),n}return N(t,e),t.prototype.render=function(){var e=this.props.intl;return(0,i.Z)(Z.Z,{heading:e.formatMessage(M.heading)},void 0,(0,i.Z)("div",{className:"dashcounters"},void 0,(0,i.Z)("div",{className:"dashcounter"},void 0,(0,i.Z)(y.rU,{to:"/developers/apps/create"},void 0,(0,i.Z)("div",{className:"dashcounter__icon"},void 0,(0,i.Z)(S.Z,{src:a(1731)})),(0,i.Z)("div",{className:"dashcounter__label"},void 0,(0,i.Z)(h.Z,{id:"developers.navigation.app_create_label",defaultMessage:"Create an app"})))),(0,i.Z)("div",{className:"dashcounter"},void 0,(0,i.Z)(y.rU,{to:"/developers/settings_store"},void 0,(0,i.Z)("div",{className:"dashcounter__icon"},void 0,(0,i.Z)(S.Z,{src:a(1732)})),(0,i.Z)("div",{className:"dashcounter__label"},void 0,(0,i.Z)(h.Z,{id:"developers.navigation.settings_store_label",defaultMessage:"Settings store"})))),(0,i.Z)("div",{className:"dashcounter"},void 0,(0,i.Z)(y.rU,{to:"/error"},void 0,(0,i.Z)("div",{className:"dashcounter__icon"},void 0,(0,i.Z)(S.Z,{src:a(907)})),(0,i.Z)("div",{className:"dashcounter__label"},void 0,(0,i.Z)(h.Z,{id:"developers.navigation.intentional_error_label",defaultMessage:"Trigger an error"})))),(0,i.Z)("div",{className:"dashcounter"},void 0,(0,i.Z)("a",{href:"#",onClick:this.leaveDevelopers},void 0,(0,i.Z)("div",{className:"dashcounter__icon"},void 0,(0,i.Z)(S.Z,{src:a(387)})),(0,i.Z)("div",{className:"dashcounter__label"},void 0,(0,i.Z)(h.Z,{id:"developers.navigation.leave_developers_label",defaultMessage:"Leave developers"}))))))},t}(l.Component))||s)||s)||s,C=function(){var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},e(t,a)};return function(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),P=(0,c.$j)((function(e){return{isDeveloper:(0,p.Gw)(e).get("isDeveloper")}}))(r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.render=function(){return this.props.isDeveloper?(0,i.Z)(O,{}):(0,i.Z)(b,{})},t}(l.Component))||r},831:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var n,o,s,r,i=a(1019),l=a(1018),c=(a(1),a(3)),p=a.n(c),d=a(5),u=a.n(d),f=a(4),h=a(1797),v=a(1017),g=a(1021),Z=a(2),_=a(81),m=a(71),b=a(9),y=a(28),w=a(16),S=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),N=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},M=(0,h.vU)({heading:{id:"column.settings_store",defaultMessage:"Settings store"},hint:{id:"developers.settings_store.hint",defaultMessage:"It is possible to directly edit your user settings here. BE CAREFUL! Editing this section can break your account, and you will only be able to recover through the API."}}),O=(0,Z.$j)((function(e){return{settingsStore:e.get("settings")}}))(o=(0,v.ZP)((r=s=function(e){function t(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=e.apply(this,t)||this;return(0,l.Z)(n,"state",{rawJSON:JSON.stringify(n.props.settingsStore,null,2),jsonValid:!0,isLoading:!1}),(0,l.Z)(n,"handleEditJSON",(function(e){var t=e.target.value;n.setState({rawJSON:t,jsonValid:N(t)})})),(0,l.Z)(n,"handleSubmit",(function(e){var t,a=n.props.dispatch,o=n.state.rawJSON,s=JSON.parse(o);n.setState({isLoading:!0}),a((0,m.sQ)({pleroma_settings_store:(t={},t[b.v1]=s,t)})).then((function(e){a({type:b.Y8,settings:s}),n.setState({isLoading:!1})})).catch((function(e){a((0,_.yg)(e)),n.setState({isLoading:!1})}))})),n}return S(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.settingsStore;t!==e.settingsStore&&this.setState({rawJSON:JSON.stringify(t,null,2),jsonValid:!0})},t.prototype.render=function(){var e=this.props.intl,t=this.state,a=t.rawJSON,n=t.jsonValid,o=t.isLoading;return(0,i.Z)(w.Z,{heading:e.formatMessage(M.heading)},void 0,(0,i.Z)(y.NA,{onSubmit:this.handleSubmit,disabled:!n||o},void 0,(0,i.Z)("div",{className:n?"code-editor":"code-editor code-editor--invalid"},void 0,(0,i.Z)(y.pm,{hint:e.formatMessage(M.hint),value:a,onChange:this.handleEditJSON,disabled:o,rows:12})),(0,i.Z)("div",{className:"actions"},void 0,(0,i.Z)("button",{name:"button",type:"submit",className:"btn button button-primary",disabled:!n||o},void 0,(0,i.Z)(g.Z,{id:"soapbox_config.save",defaultMessage:"Save"})))))},t}(f.ZP),(0,l.Z)(s,"propTypes",{intl:p().object.isRequired,dispatch:p().func.isRequired,settingsStore:u().map.isRequired}),o=r))||o)||o},1731:function(e,t,a){e.exports=a.p+"packs/icons/apps-076fd39c.svg"},1732:function(e,t,a){e.exports=a.p+"packs/icons/code-plus-890aad81.svg"}}]);
//# sourceMappingURL=developers-764aa6a983618cc75f8c.chunk.js.map