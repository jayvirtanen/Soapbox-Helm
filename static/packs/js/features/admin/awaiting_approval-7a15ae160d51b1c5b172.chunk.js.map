{"version":3,"file":"packs/js/features/admin/awaiting_approval-7a15ae160d51b1c5b172.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/admin/components/unapproved_account.js","webpack://soapbox-fe/./app/soapbox/features/admin/awaiting_approval.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import{approveUsers}from'soapbox/actions/admin';import snackbar from'soapbox/actions/snackbar';import IconButton from'soapbox/components/icon_button';import{makeGetAccount}from'soapbox/selectors';import{rejectUserModal}from'../../../actions/moderation';const messages=defineMessages({approved:{\"id\":\"admin.awaiting_approval.approved_message\",\"defaultMessage\":\"{acct} was approved!\"},rejected:{\"id\":\"admin.awaiting_approval.rejected_message\",\"defaultMessage\":\"{acct} was rejected.\"}});const makeMapStateToProps=()=>{const getAccount=makeGetAccount();const mapStateToProps=(state,{accountId})=>{return{account:getAccount(state,accountId)};};return mapStateToProps;};let UnapprovedAccount=(_dec=connect(makeMapStateToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class UnapprovedAccount extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleApprove\",()=>{const{dispatch,intl,account}=this.props;dispatch(approveUsers([account.get('id')])).then(()=>{const message=intl.formatMessage(messages.approved,{acct:\"@\".concat(account.get('acct'))});dispatch(snackbar.success(message));}).catch(()=>{});});_defineProperty(this,\"handleReject\",()=>{const{dispatch,intl,account}=this.props;dispatch(rejectUserModal(intl,account.get('id'),()=>{const message=intl.formatMessage(messages.rejected,{acct:\"@\".concat(account.get('acct'))});dispatch(snackbar.info(message));}));});}render(){const{account}=this.props;return/*#__PURE__*/_jsx(\"div\",{className:\"unapproved-account\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"unapproved-account__bio\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"unapproved-account__nickname\"},void 0,\"@\",account.get('acct')),/*#__PURE__*/_jsx(\"blockquote\",{className:\"md\"},void 0,account.getIn(['pleroma','admin','registration_reason']))),/*#__PURE__*/_jsx(\"div\",{className:\"unapproved-account__actions\"},void 0,/*#__PURE__*/_jsx(IconButton,{src:require('@tabler/icons/icons/check.svg'),onClick:this.handleApprove}),/*#__PURE__*/_jsx(IconButton,{src:require('@tabler/icons/icons/x.svg'),onClick:this.handleReject})));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,account:ImmutablePropTypes.map.isRequired}),_temp))||_class)||_class);export{UnapprovedAccount as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import{fetchUsers}from'soapbox/actions/admin';import ScrollableList from'soapbox/components/scrollable_list';import Column from'../ui/components/column';import UnapprovedAccount from'./components/unapproved_account';const messages=defineMessages({heading:{\"id\":\"column.admin.awaiting_approval\",\"defaultMessage\":\"Awaiting Approval\"},emptyMessage:{\"id\":\"admin.awaiting_approval.empty_message\",\"defaultMessage\":\"There is nobody waiting for approval. When a new user signs up, you can review them here.\"}});const mapStateToProps=state=>({accountIds:state.getIn(['admin','awaitingApproval'])});let AwaitingApproval=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class AwaitingApproval extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{isLoading:true});}componentDidMount(){const{dispatch}=this.props;dispatch(fetchUsers(['local','need_approval'])).then(()=>this.setState({isLoading:false})).catch(()=>{});}render(){const{intl,accountIds}=this.props;const{isLoading}=this.state;const showLoading=isLoading&&accountIds.count()===0;return/*#__PURE__*/_jsx(Column,{icon:\"user\",heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(ScrollableList,{isLoading:isLoading,showLoading:showLoading,scrollKey:\"awaiting-approval\",emptyMessage:intl.formatMessage(messages.emptyMessage)},void 0,accountIds.map(id=>/*#__PURE__*/_jsx(UnapprovedAccount,{accountId:id},id))));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,accountIds:ImmutablePropTypes.orderedSet.isRequired}),_temp))||_class)||_class);export{AwaitingApproval as default};"],"names":["_class","_class2","_temp","messages","approved","rejected","UnapprovedAccount","getAccount","state","accountId","account","_dec","injectIntl","args","props","dispatch","intl","get","then","message","formatMessage","acct","concat","snackbar","catch","render","this","className","getIn","src","onClick","handleApprove","handleReject","heading","emptyMessage","AwaitingApproval","accountIds","isLoading","componentDidMount","setState","showLoading","count","icon","scrollKey","map","id"],"sourceRoot":""}