{"version":3,"file":"packs/js/features/admin/user_index-c12e4f695578ec94fa11.chunk.js","mappings":"8JAAwKA,EAAOC,EAAQC,E,klBAAwoBC,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,qBAAqB,eAAiB,SAASC,MAAM,CAAC,GAAK,yBAAyB,eAAiB,mBAAmBC,kBAAkB,CAAC,GAAK,4CAA4C,eAAiB,8BAAkCC,GAAgB,SAAUC,CAAKR,GAAO,SAAmBE,EAAMD,EAAO,YAAgD,a,IAAY,sDAAZ,mBAA8BQ,IAAI,K,OAAE,OAAgB,EAAK,QAAQ,CAACC,WAAU,EAAKC,SAAQ,SAAa,CAAC,QAAQ,WAAWC,YAAW,kBAAsBC,MAAMC,EAAAA,EAASC,SAAS,GAAGC,KAAK,EAAEC,MAAM,MAAK,OAAgB,EAAK,cAAa,SAAAC,GAAW,EAAKC,SAAS,CAACT,WAAU,EAAKE,YAAW,kBAAsBI,KAAK,GAAGE,OAAa,OAAgB,EAAK,iBAAgB,WAAU,MAA8B,EAAKE,MAAlCT,EAAO,UAACK,EAAI,OAACC,EAAK,QAACF,EAAQ,WAAmBM,EAASL,EAAK,EAAE,EAAKM,MAAMC,UAAS,QAAWZ,EAAQU,EAASJ,EAAMF,IAAWS,MAAK,SAAC,G,IAACC,EAAK,QAACC,EAAK,QAAWC,EAAOF,EAAMG,KAAI,SAAAC,GAAM,OAAAA,EAAKC,MAAI,EAAKX,SAAS,CAACT,WAAU,EAAME,WAAW,EAAKQ,MAAMR,WAAWmB,MAAMJ,GAAQd,MAAMa,EAAMV,KAAKK,OAAcW,OAAM,mBAAW,OAAgB,EAAK,WAAU,WAAK,EAAKC,YAAW,WAAK,EAAKC,uBAAsB,OAAgB,EAAK,iBAAiB,KAAU,WAAK,EAAKA,kBAAkB,IAAK,CAACC,SAAQ,MAAQ,OAAgB,EAAK,cAAc,KAAU,SAAAlB,GAAQ,EAAKE,SAAS,CAACF,MAAK,MAAK,OAAM,OAAgB,EAAK,qBAAoB,SAAAmB,GAAI,EAAKC,YAAYD,EAAEE,OAAOC,U,EAAu+B,OAAlgE,OAAsiC,YAAAC,kBAAA,WAAoBC,KAAKP,iBAAiB,YAAAQ,mBAAA,SAAmBC,EAAUC,GAAgB,MAAgBH,KAAKrB,MAApBT,EAAO,UAACM,EAAK,QAAmB4B,IAAgB,IAAAC,IAAGnC,EAAQiC,EAAUjC,SAAeoC,EAAa9B,IAAQ2B,EAAU3B,OAAS4B,GAAgBE,IAAcN,KAAKO,WAAY,YAAAC,OAAA,WAAe,IAAAC,EAAMT,KAAKnB,MAAK,KAAM,EAAuBmB,KAAKrB,MAA3BR,EAAU,aAACF,EAAS,YAAmByC,EAAQvC,EAAWc,QAAQe,KAAKrB,MAAMP,MAAYuC,EAAY1C,GAAWE,EAAWyC,UAAU,OAAmB,OAAK,IAAO,CAACjD,QAAQ8C,EAAKI,cAAcnD,EAASC,eAAU,GAAoB,OAAK,KAAW,CAACmD,MAAM,CAACC,cAAc,SAAI,GAAoB,OAAK,KAAU,CAACC,SAAShB,KAAKiB,kBAAkBC,YAAYT,EAAKI,cAAcnD,EAASG,uBAAmC,OAAK,IAAe,CAACsD,UAAU,aAAaT,QAAQA,EAAQzC,UAAUA,EAAU0C,YAAYA,EAAYS,WAAWpB,KAAKqB,eAAeC,aAAab,EAAKI,cAAcnD,EAASE,aAAQ,EAAOO,EAAWgB,KAAI,SAAAE,GAAiB,cAAK,IAAiB,CAACA,GAAGA,EAAGkC,UAAS,GAAMlC,SAAQ,EAA3hE,CAAyB,OAAogE,OAAgB7B,EAAQ,YAAY,CAACsB,SAAS,sBAAhmEvB,EAA4nEE,KAASF,IAASA","sources":["webpack://soapbox-fe/./app/soapbox/features/admin/user_index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _debounce from\"lodash/debounce\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import{Set as ImmutableSet,OrderedSet as ImmutableOrderedSet,is}from'immutable';import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{injectIntl,defineMessages}from'react-intl';import{connect}from'react-redux';import{fetchUsers}from'soapbox/actions/admin';import ScrollableList from'soapbox/components/scrollable_list';import AccountContainer from'soapbox/containers/account_container';import{SimpleForm,TextInput}from'soapbox/features/forms';import Column from'soapbox/features/ui/components/column';const messages=defineMessages({heading:{\"id\":\"column.admin.users\",\"defaultMessage\":\"Users\"},empty:{\"id\":\"admin.user_index.empty\",\"defaultMessage\":\"No users found.\"},searchPlaceholder:{\"id\":\"admin.user_index.search_input_placeholder\",\"defaultMessage\":\"Who are you looking for?\"}});let UserIndex=(_dec=connect(),_dec(_class=injectIntl(_class=(_temp=_class2=class UserIndex extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{isLoading:true,filters:ImmutableSet(['local','active']),accountIds:ImmutableOrderedSet(),total:Infinity,pageSize:50,page:0,query:''});_defineProperty(this,\"clearState\",callback=>{this.setState({isLoading:true,accountIds:ImmutableOrderedSet(),page:0},callback);});_defineProperty(this,\"fetchNextPage\",()=>{const{filters,page,query,pageSize}=this.state;const nextPage=page+1;this.props.dispatch(fetchUsers(filters,nextPage,query,pageSize)).then(({users,count})=>{const newIds=users.map(user=>user.id);this.setState({isLoading:false,accountIds:this.state.accountIds.union(newIds),total:count,page:nextPage});}).catch(()=>{});});_defineProperty(this,\"refresh\",()=>{this.clearState(()=>{this.fetchNextPage();});});_defineProperty(this,\"handleLoadMore\",_debounce(()=>{this.fetchNextPage();},2000,{leading:true}));_defineProperty(this,\"updateQuery\",_debounce(query=>{this.setState({query});},900));_defineProperty(this,\"handleQueryChange\",e=>{this.updateQuery(e.target.value);});}componentDidMount(){this.fetchNextPage();}componentDidUpdate(prevProps,prevState){const{filters,query}=this.state;const filtersChanged=!is(filters,prevState.filters);const queryChanged=query!==prevState.query;if(filtersChanged||queryChanged){this.refresh();}}render(){const{intl}=this.props;const{accountIds,isLoading}=this.state;const hasMore=accountIds.count()<this.state.total;const showLoading=isLoading&&accountIds.isEmpty();return/*#__PURE__*/_jsx(Column,{heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(SimpleForm,{style:{paddingBottom:0}},void 0,/*#__PURE__*/_jsx(TextInput,{onChange:this.handleQueryChange,placeholder:intl.formatMessage(messages.searchPlaceholder)})),/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"user-index\",hasMore:hasMore,isLoading:isLoading,showLoading:showLoading,onLoadMore:this.handleLoadMore,emptyMessage:intl.formatMessage(messages.empty)},void 0,accountIds.map(id=>/*#__PURE__*/_jsx(AccountContainer,{id:id,withDate:true},id))));}},_defineProperty(_class2,\"propTypes\",{dispatch:PropTypes.func.isRequired}),_temp))||_class)||_class);export{UserIndex as default};"],"names":["_class","_class2","_temp","messages","heading","empty","searchPlaceholder","UserIndex","_dec","args","isLoading","filters","accountIds","total","Infinity","pageSize","page","query","callback","setState","state","nextPage","props","dispatch","then","users","count","newIds","map","user","id","union","catch","clearState","fetchNextPage","leading","e","updateQuery","target","value","componentDidMount","this","componentDidUpdate","prevProps","prevState","filtersChanged","is","queryChanged","refresh","render","intl","hasMore","showLoading","isEmpty","formatMessage","style","paddingBottom","onChange","handleQueryChange","placeholder","scrollKey","onLoadMore","handleLoadMore","emptyMessage","withDate"],"sourceRoot":""}