"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[13],{827:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var o,a,r,i,s=n(1019),u=n(1018),c=n(24),d=n.n(c),p=(n(1),n(320)),f=n(3),h=n.n(f),l=n(4),g=n(1797),y=n(1017),Z=n(2),m=n(38),v=n(25),_=n(46),M=n(28),S=n(16),x=(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),P=(0,g.vU)({heading:{id:"column.admin.users",defaultMessage:"Users"},empty:{id:"admin.user_index.empty",defaultMessage:"No users found."},searchPlaceholder:{id:"admin.user_index.search_input_placeholder",defaultMessage:"Who are you looking for?"}}),L=(0,Z.$j)()(a=(0,y.ZP)((i=r=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=e.apply(this,t)||this;return(0,u.Z)(o,"state",{isLoading:!0,filters:(0,p.Set)(["local","active"]),accountIds:(0,p.OrderedSet)(),total:1/0,pageSize:50,page:0,query:""}),(0,u.Z)(o,"clearState",(function(e){o.setState({isLoading:!0,accountIds:(0,p.OrderedSet)(),page:0},e)})),(0,u.Z)(o,"fetchNextPage",(function(){var e=o.state,t=e.filters,n=e.page,a=e.query,r=e.pageSize,i=n+1;o.props.dispatch((0,m.uh)(t,i,a,r)).then((function(e){var t=e.users,n=e.count,a=t.map((function(e){return e.id}));o.setState({isLoading:!1,accountIds:o.state.accountIds.union(a),total:n,page:i})})).catch((function(){}))})),(0,u.Z)(o,"refresh",(function(){o.clearState((function(){o.fetchNextPage()}))})),(0,u.Z)(o,"handleLoadMore",d()((function(){o.fetchNextPage()}),2e3,{leading:!0})),(0,u.Z)(o,"updateQuery",d()((function(e){o.setState({query:e})}),900)),(0,u.Z)(o,"handleQueryChange",(function(e){o.updateQuery(e.target.value)})),o}return x(t,e),t.prototype.componentDidMount=function(){this.fetchNextPage()},t.prototype.componentDidUpdate=function(e,t){var n=this.state,o=n.filters,a=n.query,r=!(0,p.is)(o,t.filters),i=a!==t.query;(r||i)&&this.refresh()},t.prototype.render=function(){var e=this.props.intl,t=this.state,n=t.accountIds,o=t.isLoading,a=n.count()<this.state.total,r=o&&n.isEmpty();return(0,s.Z)(S.Z,{heading:e.formatMessage(P.heading)},void 0,(0,s.Z)(M.NA,{style:{paddingBottom:0}},void 0,(0,s.Z)(M.oi,{onChange:this.handleQueryChange,placeholder:e.formatMessage(P.searchPlaceholder)})),(0,s.Z)(v.Z,{scrollKey:"user-index",hasMore:a,isLoading:o,showLoading:r,onLoadMore:this.handleLoadMore,emptyMessage:e.formatMessage(P.empty)},void 0,n.map((function(e){return(0,s.Z)(_.Z,{id:e,withDate:!0},e)}))))},t}(l.ZP),(0,u.Z)(r,"propTypes",{dispatch:h().func.isRequired}),a=i))||a)||a}}]);
//# sourceMappingURL=user_index-c12e4f695578ec94fa11.chunk.js.map