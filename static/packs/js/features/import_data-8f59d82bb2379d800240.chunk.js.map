{"version":3,"file":"packs/js/features/import_data-8f59d82bb2379d800240.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/actions/import_data.js","webpack://soapbox-fe/./app/soapbox/features/import_data/components/csv_importer.js","webpack://soapbox-fe/./app/soapbox/features/import_data/index.js"],"sourcesContent":["import{defineMessages}from'react-intl';import snackbar from'soapbox/actions/snackbar';import api from'../api';export const IMPORT_FOLLOWS_REQUEST='IMPORT_FOLLOWS_REQUEST';export const IMPORT_FOLLOWS_SUCCESS='IMPORT_FOLLOWS_SUCCESS';export const IMPORT_FOLLOWS_FAIL='IMPORT_FOLLOWS_FAIL';export const IMPORT_BLOCKS_REQUEST='IMPORT_BLOCKS_REQUEST';export const IMPORT_BLOCKS_SUCCESS='IMPORT_BLOCKS_SUCCESS';export const IMPORT_BLOCKS_FAIL='IMPORT_BLOCKS_FAIL';export const IMPORT_MUTES_REQUEST='IMPORT_MUTES_REQUEST';export const IMPORT_MUTES_SUCCESS='IMPORT_MUTES_SUCCESS';export const IMPORT_MUTES_FAIL='IMPORT_MUTES_FAIL';const messages=defineMessages({blocksSuccess:{\"id\":\"import_data.success.blocks\",\"defaultMessage\":\"Blocks imported successfully\"},followersSuccess:{\"id\":\"import_data.success.followers\",\"defaultMessage\":\"Followers imported successfully\"},mutesSuccess:{\"id\":\"import_data.success.mutes\",\"defaultMessage\":\"Mutes imported successfully\"}});export function importFollows(intl,params){return(dispatch,getState)=>{dispatch({type:IMPORT_FOLLOWS_REQUEST});return api(getState).post('/api/pleroma/follow_import',params).then(response=>{dispatch(snackbar.success(intl.formatMessage(messages.followersSuccess)));dispatch({type:IMPORT_FOLLOWS_SUCCESS,config:response.data});}).catch(error=>{dispatch({type:IMPORT_FOLLOWS_FAIL,error});});};}export function importBlocks(intl,params){return(dispatch,getState)=>{dispatch({type:IMPORT_BLOCKS_REQUEST});return api(getState).post('/api/pleroma/blocks_import',params).then(response=>{dispatch(snackbar.success(intl.formatMessage(messages.blocksSuccess)));dispatch({type:IMPORT_BLOCKS_SUCCESS,config:response.data});}).catch(error=>{dispatch({type:IMPORT_BLOCKS_FAIL,error});});};}export function importMutes(intl,params){return(dispatch,getState)=>{dispatch({type:IMPORT_MUTES_REQUEST});return api(getState).post('/api/pleroma/mutes_import',params).then(response=>{dispatch(snackbar.success(intl.formatMessage(messages.mutesSuccess)));dispatch({type:IMPORT_MUTES_SUCCESS,config:response.data});}).catch(error=>{dispatch({type:IMPORT_MUTES_FAIL,error});});};}","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{injectIntl}from'react-intl';import{connect}from'react-redux';import{SimpleInput,SimpleForm,FieldsGroup}from'soapbox/features/forms';let CSVImporter=(_dec=connect(),_dec(_class=injectIntl(_class=(_temp=_class2=class CSVImporter extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{file:null,isLoading:false});_defineProperty(this,\"handleSubmit\",event=>{const{dispatch,action,intl}=this.props;const params=new FormData();params.append('list',this.state.file);this.setState({isLoading:true});dispatch(action(intl,params)).then(()=>{this.setState({isLoading:false});}).catch(error=>{this.setState({isLoading:false});});event.preventDefault();});_defineProperty(this,\"handleFileChange\",e=>{const[file]=e.target.files||[];this.setState({file});});}render(){const{intl,messages}=this.props;return/*#__PURE__*/_jsx(SimpleForm,{onSubmit:this.handleSubmit},void 0,/*#__PURE__*/_jsx(\"fieldset\",{disabled:this.state.isLoading},void 0,/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"fields-row file-picker\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"fields-row__column fields-group fields-row__column-6\"},void 0,/*#__PURE__*/_jsx(SimpleInput,{type:\"file\",accept:['.csv','text/csv'],label:intl.formatMessage(messages.input_label),hint:intl.formatMessage(messages.input_hint),onChange:this.handleFileChange,required:true}))))),/*#__PURE__*/_jsx(\"div\",{className:\"actions\"},void 0,/*#__PURE__*/_jsx(\"button\",{name:\"button\",type:\"submit\",className:\"btn button button-primary\"},void 0,intl.formatMessage(messages.submit))));}},_defineProperty(_class2,\"propTypes\",{action:PropTypes.func.isRequired,messages:PropTypes.object.isRequired,dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_temp))||_class)||_class);export{CSVImporter as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl}from'react-intl';import{connect}from'react-redux';import{importFollows,importBlocks,importMutes}from'soapbox/actions/import_data';import{getFeatures}from'soapbox/utils/features';import Column from'../ui/components/column';import CSVImporter from'./components/csv_importer';const messages=defineMessages({heading:{\"id\":\"column.import_data\",\"defaultMessage\":\"Import data\"},submit:{\"id\":\"import_data.actions.import\",\"defaultMessage\":\"Import\"}});const followMessages=defineMessages({input_label:{\"id\":\"import_data.follows_label\",\"defaultMessage\":\"Follows\"},input_hint:{\"id\":\"import_data.hints.follows\",\"defaultMessage\":\"CSV file containing a list of followed accounts\"},submit:{\"id\":\"import_data.actions.import_follows\",\"defaultMessage\":\"Import follows\"}});const blockMessages=defineMessages({input_label:{\"id\":\"import_data.blocks_label\",\"defaultMessage\":\"Blocks\"},input_hint:{\"id\":\"import_data.hints.blocks\",\"defaultMessage\":\"CSV file containing a list of blocked accounts\"},submit:{\"id\":\"import_data.actions.import_blocks\",\"defaultMessage\":\"Import blocks\"}});const muteMessages=defineMessages({input_label:{\"id\":\"import_data.mutes_label\",\"defaultMessage\":\"Mutes\"},input_hint:{\"id\":\"import_data.hints.mutes\",\"defaultMessage\":\"CSV file containing a list of muted accounts\"},submit:{\"id\":\"import_data.actions.import_mutes\",\"defaultMessage\":\"Import mutes\"}});const mapStateToProps=state=>({features:getFeatures(state.get('instance'))});let ImportData=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class ImportData extends ImmutablePureComponent{render(){const{intl,features}=this.props;return/*#__PURE__*/_jsx(Column,{icon:\"cloud-upload-alt\",heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CSVImporter,{action:importFollows,messages:followMessages}),/*#__PURE__*/_jsx(CSVImporter,{action:importBlocks,messages:blockMessages}),features.importMutes&&/*#__PURE__*/_jsx(CSVImporter,{action:importMutes,messages:muteMessages}));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,features:PropTypes.object}),_temp))||_class)||_class);export{ImportData as default};"],"names":["messages","blocksSuccess","followersSuccess","mutesSuccess","importFollows","intl","params","dispatch","getState","type","api","post","then","response","snackbar","formatMessage","config","data","catch","error","importBlocks","importMutes","_class","_class2","_temp","CSVImporter","_dec","injectIntl","args","file","isLoading","event","props","action","FormData","append","state","setState","preventDefault","e","target","files","render","this","onSubmit","handleSubmit","disabled","className","accept","label","input_label","hint","input_hint","onChange","handleFileChange","required","name","submit","heading","followMessages","blockMessages","muteMessages","ImportData","features","get","icon"],"sourceRoot":""}