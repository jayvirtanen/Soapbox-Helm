{"version":3,"file":"packs/js/features/edit_profile-cbf73db9e24667c5194b.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./node_modules/lodash/_unescapeHtmlChar.js","webpack://soapbox-fe/./node_modules/lodash/unescape.js","webpack://soapbox-fe/./app/soapbox/features/edit_profile/index.js","webpack://soapbox-fe/./app/soapbox/features/edit_profile/components/profile_preview.js"],"sourcesContent":["var basePropertyOf = require('./_basePropertyOf');\n/** Used to map HTML entities to characters. */\n\n\nvar htmlUnescapes = {\n  '&amp;': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&quot;': '\"',\n  '&#39;': \"'\"\n};\n/**\n * Used by `_.unescape` to convert HTML entities to characters.\n *\n * @private\n * @param {string} chr The matched character to unescape.\n * @returns {string} Returns the unescaped character.\n */\n\nvar unescapeHtmlChar = basePropertyOf(htmlUnescapes);\nmodule.exports = unescapeHtmlChar;","require(\"core-js/modules/es.string.replace.js\");\n\nvar toString = require('./toString'),\n    unescapeHtmlChar = require('./_unescapeHtmlChar');\n/** Used to match HTML entities and HTML characters. */\n\n\nvar reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n    reHasEscapedHtml = RegExp(reEscapedHtml.source);\n/**\n * The inverse of `_.escape`; this method converts the HTML entities\n * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n * their corresponding characters.\n *\n * **Note:** No other HTML entities are unescaped. To unescape additional\n * HTML entities use a third-party library like [_he_](https://mths.be/he).\n *\n * @static\n * @memberOf _\n * @since 0.6.0\n * @category String\n * @param {string} [string=''] The string to unescape.\n * @returns {string} Returns the unescaped string.\n * @example\n *\n * _.unescape('fred, barney, &amp; pebbles');\n * // => 'fred, barney, & pebbles'\n */\n\nfunction unescape(string) {\n  string = toString(string);\n  return string && reHasEscapedHtml.test(string) ? string.replace(reEscapedHtml, unescapeHtmlChar) : string;\n}\n\nmodule.exports = unescape;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _unescape from\"lodash/unescape\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import\"core-js/modules/web.url.js\";import{Map as ImmutableMap,List as ImmutableList}from'immutable';import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{updateNotificationSettings}from'soapbox/actions/accounts';import{patchMe}from'soapbox/actions/me';import snackbar from'soapbox/actions/snackbar';import{getSoapboxConfig}from'soapbox/actions/soapbox';import BirthdayInput from'soapbox/components/birthday_input';import Icon from'soapbox/components/icon';import{SimpleForm,FieldsGroup,TextInput,Checkbox,FileChooser,SimpleTextarea}from'soapbox/features/forms';import{makeGetAccount}from'soapbox/selectors';import{getFeatures}from'soapbox/utils/features';import resizeImage from'soapbox/utils/resize_image';import Column from'../ui/components/column';import ProfilePreview from'./components/profile_preview';const hidesNetwork=account=>{const pleroma=account.get('pleroma');if(!pleroma)return false;const{hide_followers,hide_follows,hide_followers_count,hide_follows_count}=pleroma.toJS();return hide_followers&&hide_follows&&hide_followers_count&&hide_follows_count;};const messages=defineMessages({heading:{\"id\":\"column.edit_profile\",\"defaultMessage\":\"Edit profile\"},metaFieldLabel:{\"id\":\"edit_profile.fields.meta_fields.label_placeholder\",\"defaultMessage\":\"Label\"},metaFieldContent:{\"id\":\"edit_profile.fields.meta_fields.content_placeholder\",\"defaultMessage\":\"Content\"},verified:{\"id\":\"edit_profile.fields.verified_display_name\",\"defaultMessage\":\"Verified users may not update their display name\"},success:{\"id\":\"edit_profile.success\",\"defaultMessage\":\"Profile saved!\"},error:{\"id\":\"edit_profile.error\",\"defaultMessage\":\"Profile update failed\"},bioPlaceholder:{\"id\":\"edit_profile.fields.bio_placeholder\",\"defaultMessage\":\"Tell us about yourself.\"},displayNamePlaceholder:{\"id\":\"edit_profile.fields.display_name_placeholder\",\"defaultMessage\":\"Name\"},view:{\"id\":\"snackbar.view\",\"defaultMessage\":\"View\"},birthdayPlaceholder:{\"id\":\"edit_profile.fields.birthday_placeholder\",\"defaultMessage\":\"Your birthday\"}});const makeMapStateToProps=()=>{const getAccount=makeGetAccount();const mapStateToProps=state=>{const me=state.get('me');const account=getAccount(state,me);const soapbox=getSoapboxConfig(state);const features=getFeatures(state.get('instance'));return{account,maxFields:state.getIn(['instance','pleroma','metadata','fields_limits','max_fields'],4),verifiedCanEditName:soapbox.get('verifiedCanEditName'),supportsEmailList:features.emailList,supportsBirthdays:features.birthdays};};return mapStateToProps;};// Forces fields to be maxFields size, filling empty values\nconst normalizeFields=(fields,maxFields)=>ImmutableList(fields).setSize(Math.max(fields.size,maxFields)).map(field=>field?field:ImmutableMap({name:'',value:''}));// HTML unescape for special chars, eg <br>\nconst unescapeParams=(map,params)=>params.reduce((map,param)=>map.set(param,_unescape(map.get(param))),map);let EditProfile=(_dec=connect(makeMapStateToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class EditProfile extends ImmutablePureComponent{constructor(props){super(props);_defineProperty(this,\"state\",{isLoading:false});_defineProperty(this,\"makePreviewAccount\",()=>{const{account}=this.props;return account.merge(ImmutableMap({header:this.state.header,avatar:this.state.avatar,display_name:this.state.display_name||account.get('username')}));});_defineProperty(this,\"getFieldParams\",()=>{let params=ImmutableMap();this.state.fields.forEach((f,i)=>params=params.set(\"fields_attributes[\".concat(i,\"][name]\"),f.get('name')).set(\"fields_attributes[\".concat(i,\"][value]\"),f.get('value')));return params;});_defineProperty(this,\"getParams\",()=>{const{state}=this;return Object.assign({discoverable:state.discoverable,bot:state.bot,display_name:state.display_name,note:state.note,avatar:state.avatar_file,header:state.header_file,locked:state.locked,accepts_email_list:state.accepts_email_list,hide_followers:state.hide_network,hide_follows:state.hide_network,hide_followers_count:state.hide_network,hide_follows_count:state.hide_network,birthday:state.birthday?new Date(state.birthday.getTime()-state.birthday.getTimezoneOffset()*60000).toISOString().slice(0,10):undefined,show_birthday:state.show_birthday},this.getFieldParams().toJS());});_defineProperty(this,\"getFormdata\",()=>{const data=this.getParams();const formData=new FormData();for(const key in data){// Compact the submission. This should probably be done better.\nconst shouldAppend=Boolean(data[key]!==undefined||key.startsWith('fields_attributes'));if(shouldAppend)formData.append(key,data[key]||'');}return formData;});_defineProperty(this,\"handleSubmit\",event=>{const{dispatch,intl,account}=this.props;const credentials=dispatch(patchMe(this.getFormdata()));const notifications=dispatch(updateNotificationSettings({block_from_strangers:this.state.stranger_notifications||false}));this.setState({isLoading:true});Promise.all([credentials,notifications]).then(()=>{this.setState({isLoading:false});dispatch(snackbar.success(intl.formatMessage(messages.success),intl.formatMessage(messages.view),\"/@\".concat(account.get('acct'))));}).catch(error=>{this.setState({isLoading:false});dispatch(snackbar.error(intl.formatMessage(messages.error)));});event.preventDefault();});_defineProperty(this,\"handleCheckboxChange\",e=>{this.setState({[e.target.name]:e.target.checked});});_defineProperty(this,\"handleTextChange\",e=>{this.setState({[e.target.name]:e.target.value});});_defineProperty(this,\"handleFieldChange\",(i,key)=>{return e=>{this.setState({fields:this.state.fields.setIn([i,key],e.target.value)});};});_defineProperty(this,\"handleFileChange\",maxPixels=>{return e=>{const{name}=e.target;const[f]=e.target.files||[];resizeImage(f,maxPixels).then(file=>{const url=file?URL.createObjectURL(file):this.state[name];this.setState({[name]:url,[\"\".concat(name,\"_file\")]:file});}).catch(console.error);};});_defineProperty(this,\"handleBirthdayChange\",birthday=>{this.setState({birthday});});_defineProperty(this,\"handleAddField\",()=>{this.setState({fields:this.state.fields.push(ImmutableMap({name:'',value:''}))});});_defineProperty(this,\"handleDeleteField\",i=>{return()=>{this.setState({fields:normalizeFields(this.state.fields.delete(i),Math.min(this.props.maxFields,4))});};});const{account:_account,maxFields}=this.props;const strangerNotifications=_account.getIn(['pleroma','notification_settings','block_from_strangers']);const acceptsEmailList=_account.getIn(['pleroma','accepts_email_list']);const discoverable=_account.getIn(['source','pleroma','discoverable']);const _birthday=_account.get('birthday');const showBirthday=_account.getIn(['source','pleroma','show_birthday']);const initialState=ImmutableMap(_account).withMutations(map=>{map.merge(map.get('source'));map.delete('source');map.set('fields',normalizeFields(map.get('fields'),Math.min(maxFields,4)));map.set('stranger_notifications',strangerNotifications);map.set('accepts_email_list',acceptsEmailList);map.set('hide_network',hidesNetwork(_account));map.set('discoverable',discoverable);map.set('show_birthday',showBirthday);if(_birthday){const date=new Date(_birthday);map.set('birthday',new Date(date.getTime()+date.getTimezoneOffset()*60000));}unescapeParams(map,['display_name','bio']);});this.state=initialState.toObject();}render(){const{intl,maxFields,account,verifiedCanEditName,supportsBirthdays,supportsEmailList}=this.props;const verified=account.get('verified');const canEditName=verifiedCanEditName||!verified;return/*#__PURE__*/_jsx(Column,{icon:\"user\",heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(SimpleForm,{onSubmit:this.handleSubmit},void 0,/*#__PURE__*/_jsx(\"fieldset\",{disabled:this.state.isLoading},void 0,/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(TextInput,{className:canEditName?'':'disabled',label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.display_name_label\",defaultMessage:\"Display name\"}),placeholder:intl.formatMessage(messages.displayNamePlaceholder),name:\"display_name\",value:this.state.display_name,onChange:this.handleTextChange,disabled:!canEditName,hint:!canEditName&&intl.formatMessage(messages.verified)}),/*#__PURE__*/_jsx(SimpleTextarea,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.bio_label\",defaultMessage:\"Bio\"}),placeholder:intl.formatMessage(messages.bioPlaceholder),name:\"note\",autoComplete:\"off\",value:this.state.note,wrap:\"hard\",onChange:this.handleTextChange,rows:3}),supportsBirthdays&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/_jsx(BirthdayInput,{hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.birthday_label\",defaultMessage:\"Birthday\"}),value:this.state.birthday,onChange:this.handleBirthdayChange}),/*#__PURE__*/_jsx(Checkbox,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.show_birthday_label\",defaultMessage:\"Show my birthday\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.show_birthday\",defaultMessage:\"Your birthday will be visible on your profile.\"}),name:\"show_birthday\",checked:this.state.show_birthday,onChange:this.handleCheckboxChange})),/*#__PURE__*/_jsx(\"div\",{className:\"fields-row\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"fields-row__column fields-row__column-6\"},void 0,/*#__PURE__*/_jsx(ProfilePreview,{account:this.makePreviewAccount()})),/*#__PURE__*/_jsx(\"div\",{className:\"fields-row__column fields-group fields-row__column-6\"},void 0,/*#__PURE__*/_jsx(FileChooser,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.header_label\",defaultMessage:\"Header\"}),name:\"header\",hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.header\",defaultMessage:\"PNG, GIF or JPG. Will be downscaled to {size}\",values:{size:'1920x1080px'}}),onChange:this.handleFileChange(1920*1080)}),/*#__PURE__*/_jsx(FileChooser,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.avatar_label\",defaultMessage:\"Avatar\"}),name:\"avatar\",hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.avatar\",defaultMessage:\"PNG, GIF or JPG. Will be downscaled to {size}\",values:{size:'400x400px'}}),onChange:this.handleFileChange(400*400)}))),/*#__PURE__*/_jsx(Checkbox,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.locked_label\",defaultMessage:\"Lock account\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.locked\",defaultMessage:\"Requires you to manually approve followers\"}),name:\"locked\",checked:this.state.locked,onChange:this.handleCheckboxChange}),/*#__PURE__*/_jsx(Checkbox,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.hide_network_label\",defaultMessage:\"Hide network\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.hide_network\",defaultMessage:\"Who you follow and who follows you will not be shown on your profile\"}),name:\"hide_network\",checked:this.state.hide_network,onChange:this.handleCheckboxChange}),/*#__PURE__*/_jsx(Checkbox,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.bot_label\",defaultMessage:\"This is a bot account\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.bot\",defaultMessage:\"This account mainly performs automated actions and might not be monitored\"}),name:\"bot\",checked:this.state.bot,onChange:this.handleCheckboxChange}),/*#__PURE__*/_jsx(Checkbox,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.stranger_notifications_label\",defaultMessage:\"Block notifications from strangers\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.stranger_notifications\",defaultMessage:\"Only show notifications from people you follow\"}),name:\"stranger_notifications\",checked:this.state.stranger_notifications,onChange:this.handleCheckboxChange}),/*#__PURE__*/_jsx(Checkbox,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.discoverable_label\",defaultMessage:\"Allow account discovery\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.discoverable\",defaultMessage:\"Display account in profile directory and allow indexing by external services\"}),name:\"discoverable\",checked:this.state.discoverable,onChange:this.handleCheckboxChange}),supportsEmailList&&/*#__PURE__*/_jsx(Checkbox,{label:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.accepts_email_list_label\",defaultMessage:\"Subscribe to newsletter\"}),hint:/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.accepts_email_list\",defaultMessage:\"Opt-in to news and marketing updates.\"}),name:\"accepts_email_list\",checked:this.state.accepts_email_list,onChange:this.handleCheckboxChange})),/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"fields-row__column fields-group\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"input with_block_label\"},void 0,/*#__PURE__*/_jsx(\"label\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.fields.meta_fields_label\",defaultMessage:\"Profile metadata\"})),/*#__PURE__*/_jsx(\"span\",{className:\"hint\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.hints.meta_fields\",defaultMessage:\"You can have up to {count, plural, one {# item} other {# items}} displayed as a table on your profile\",values:{count:maxFields}})),this.state.fields.map((field,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"row\"},i,/*#__PURE__*/_jsx(TextInput,{placeholder:intl.formatMessage(messages.metaFieldLabel),value:field.get('name'),onChange:this.handleFieldChange(i,'name')}),/*#__PURE__*/_jsx(TextInput,{placeholder:intl.formatMessage(messages.metaFieldContent),value:field.get('value'),onChange:this.handleFieldChange(i,'value')}),this.state.fields.size>4&&/*#__PURE__*/_jsx(Icon,{className:\"delete-field\",src:require('@tabler/icons/icons/circle-x.svg'),onClick:this.handleDeleteField(i)}))),this.state.fields.size<maxFields&&/*#__PURE__*/_jsx(\"div\",{className:\"actions add-row\"},void 0,/*#__PURE__*/_jsx(\"div\",{name:\"button\",type:\"button\",role:\"presentation\",className:\"btn button button-secondary\",onClick:this.handleAddField},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/icons/circle-plus.svg')}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.meta_fields.add\",defaultMessage:\"Add new item\"}))))))),/*#__PURE__*/_jsx(\"div\",{className:\"actions\"},void 0,/*#__PURE__*/_jsx(\"button\",{name:\"button\",type:\"submit\",className:\"btn button button-primary\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"edit_profile.save\",defaultMessage:\"Save\"})))));}},_defineProperty(_class2,\"propTypes\",{dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired,account:ImmutablePropTypes.map,maxFields:PropTypes.number,verifiedCanEditName:PropTypes.bool,supportsEmailList:PropTypes.bool,supportsBirthdays:PropTypes.bool}),_temp))||_class)||_class);export{EditProfile as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React from'react';import{connect}from'react-redux';import{Link}from'react-router-dom';import StillImage from'soapbox/components/still_image';import VerificationBadge from'soapbox/components/verification_badge';import{getAcct}from'soapbox/utils/accounts';import{displayFqn}from'soapbox/utils/state';const mapStateToProps=state=>({displayFqn:displayFqn(state)});const ProfilePreview=({account,displayFqn})=>/*#__PURE__*/_jsx(\"div\",{className:\"card h-card\"},void 0,/*#__PURE__*/_jsx(Link,{to:\"/@\".concat(account.get('acct'))},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"card__img\"},void 0,/*#__PURE__*/_jsx(StillImage,{alt:\"\",src:account.get('header')})),/*#__PURE__*/_jsx(\"div\",{className:\"card__bar\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"avatar\"},void 0,/*#__PURE__*/_jsx(StillImage,{alt:\"\",className:\"u-photo\",src:account.get('avatar'),width:\"48\",height:\"48\"})),/*#__PURE__*/_jsx(\"div\",{className:\"display-name\"},void 0,/*#__PURE__*/_jsx(\"span\",{style:{display:'none'}},void 0,account.get('username')),/*#__PURE__*/_jsx(\"bdi\",{},void 0,/*#__PURE__*/_jsx(\"strong\",{className:\"emojify p-name\"},void 0,account.get('display_name'),account.get('verified')&&/*#__PURE__*/_jsx(VerificationBadge,{}))),/*#__PURE__*/_jsx(\"span\",{},void 0,\"@\",getAcct(account,displayFqn))))));export default connect(mapStateToProps)(ProfilePreview);"],"names":["unescapeHtmlChar","basePropertyOf","module","exports","toString","reEscapedHtml","reHasEscapedHtml","RegExp","source","string","test","replace","_dec","_class","_class2","_temp","state","displayFqn","account","className","to","concat","get","alt","src","width","height","style","display","messages","heading","metaFieldLabel","metaFieldContent","verified","success","error","bioPlaceholder","displayNamePlaceholder","view","birthdayPlaceholder","normalizeFields","fields","maxFields","setSize","Math","max","size","map","field","name","value","EditProfile","getAccount","me","soapbox","features","getIn","verifiedCanEditName","supportsEmailList","emailList","supportsBirthdays","birthdays","injectIntl","props","isLoading","merge","header","avatar","display_name","params","forEach","f","i","set","Object","assign","discoverable","bot","note","avatar_file","header_file","locked","accepts_email_list","hide_followers","hide_network","hide_follows","hide_followers_count","hide_follows_count","birthday","Date","getTime","getTimezoneOffset","toISOString","slice","undefined","show_birthday","getFieldParams","toJS","data","getParams","formData","FormData","key","Boolean","startsWith","append","event","dispatch","intl","credentials","getFormdata","notifications","block_from_strangers","stranger_notifications","setState","Promise","all","then","snackbar","formatMessage","catch","preventDefault","e","target","checked","setIn","maxPixels","files","file","url","URL","createObjectURL","console","push","delete","min","_account","strangerNotifications","acceptsEmailList","_birthday","showBirthday","initialState","withMutations","pleroma","hidesNetwork","date","reduce","param","unescapeParams","toObject","render","this","canEditName","icon","onSubmit","handleSubmit","disabled","label","id","defaultMessage","placeholder","onChange","handleTextChange","hint","autoComplete","wrap","rows","handleBirthdayChange","handleCheckboxChange","makePreviewAccount","values","handleFileChange","count","handleFieldChange","onClick","handleDeleteField","type","role","handleAddField"],"sourceRoot":""}