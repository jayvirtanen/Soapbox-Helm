{"version":3,"file":"packs/js/features/remote_timeline-1c3a887808a440b919c1.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./app/soapbox/features/remote_timeline/index.js","webpack://soapbox-fe/./app/soapbox/actions/remote_timeline.js","webpack://soapbox-fe/./app/soapbox/features/ui/components/instance_info_panel.js","webpack://soapbox-fe/./app/soapbox/features/ui/components/instance_moderation_panel.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import React from'react';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{withRouter}from'react-router-dom';import{getSettings}from'soapbox/actions/settings';import IconButton from'soapbox/components/icon_button';import Column from'soapbox/features/ui/components/column';import{connectRemoteStream}from'../../actions/streaming';import{expandRemoteTimeline}from'../../actions/timelines';import StatusListContainer from'../ui/containers/status_list_container';import PinnedHostsPicker from'./components/pinned_hosts_picker';const messages=defineMessages({title:{\"id\":\"column.remote\",\"defaultMessage\":\"Federated timeline\"}});const mapStateToProps=(state,props)=>{const instance=props.params.instance;const settings=getSettings(state);const onlyMedia=settings.getIn(['remote','other','onlyMedia']);const timelineId='remote';return{timelineId,onlyMedia,hasUnread:state.getIn(['timelines',\"\".concat(timelineId).concat(onlyMedia?':media':'',\":\").concat(instance),'unread'])>0,instance,pinned:settings.getIn(['remote_timeline','pinnedHosts']).includes(instance)};};let RemoteTimeline=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=withRouter(_class=class RemoteTimeline extends React.PureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleCloseClick\",e=>{this.props.history.push('/timeline/fediverse');});_defineProperty(this,\"handleLoadMore\",maxId=>{const{dispatch,onlyMedia,instance}=this.props;dispatch(expandRemoteTimeline(instance,{maxId,onlyMedia}));});}componentDidMount(){const{dispatch,onlyMedia,instance}=this.props;dispatch(expandRemoteTimeline(instance,{onlyMedia}));this.disconnect=dispatch(connectRemoteStream(instance,{onlyMedia}));}componentDidUpdate(prevProps){if(prevProps.onlyMedia!==this.props.onlyMedia){const{dispatch,onlyMedia,instance}=this.props;this.disconnect();dispatch(expandRemoteTimeline(instance,{onlyMedia}));this.disconnect=dispatch(connectRemoteStream(instance,{onlyMedia}));}}componentWillUnmount(){if(this.disconnect){this.disconnect();this.disconnect=null;}}render(){const{intl,onlyMedia,timelineId,instance,pinned}=this.props;return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title),heading:instance,transparent:true},void 0,/*#__PURE__*/_jsx(PinnedHostsPicker,{host:instance}),!pinned&&/*#__PURE__*/_jsx(\"div\",{className:\"timeline-filter-message\"},void 0,/*#__PURE__*/_jsx(IconButton,{src:require('@tabler/icons/icons/x.svg'),onClick:this.handleCloseClick}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"remote_timeline.filter_message\",defaultMessage:\"You are viewing the timeline of {instance}.\",values:{instance}})),/*#__PURE__*/_jsx(StatusListContainer,{scrollKey:\"\".concat(timelineId,\"_\").concat(instance,\"_timeline\"),timelineId:\"\".concat(timelineId).concat(onlyMedia?':media':'',\":\").concat(instance),onLoadMore:this.handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.remote\",defaultMessage:\"There is nothing here! Manually follow users from {instance} to fill it up.\",values:{instance}})}));}})||_class)||_class)||_class);export{RemoteTimeline as default};","import{getSettings,changeSetting}from'soapbox/actions/settings';const getPinnedHosts=state=>{const settings=getSettings(state);return settings.getIn(['remote_timeline','pinnedHosts']);};export function pinHost(host){return(dispatch,getState)=>{const state=getState();const pinnedHosts=getPinnedHosts(state);return dispatch(changeSetting(['remote_timeline','pinnedHosts'],pinnedHosts.add(host)));};}export function unpinHost(host){return(dispatch,getState)=>{const state=getState();const pinnedHosts=getPinnedHosts(state);return dispatch(changeSetting(['remote_timeline','pinnedHosts'],pinnedHosts.delete(host)));};}","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{injectIntl,defineMessages}from'react-intl';import{connect}from'react-redux';import{pinHost,unpinHost}from'soapbox/actions/remote_timeline';import{getSettings}from'soapbox/actions/settings';import DropdownMenu from'soapbox/containers/dropdown_menu_container';import{makeGetRemoteInstance}from'soapbox/selectors';const getRemoteInstance=makeGetRemoteInstance();const messages=defineMessages({pinHost:{\"id\":\"remote_instance.pin_host\",\"defaultMessage\":\"Pin {host}\"},unpinHost:{\"id\":\"remote_instance.unpin_host\",\"defaultMessage\":\"Unpin {host}\"}});const mapStateToProps=(state,{host})=>{const settings=getSettings(state);return{instance:state.get('instance'),remoteInstance:getRemoteInstance(state,host),pinned:settings.getIn(['remote_timeline','pinnedHosts']).includes(host)};};let InstanceInfoPanel=(_dec=connect(mapStateToProps,null,null,{forwardRef:true}),_dec(_class=injectIntl(_class=(_temp=_class2=class InstanceInfoPanel extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handlePinHost\",e=>{const{dispatch,host,pinned}=this.props;if(!pinned){dispatch(pinHost(host));}else{dispatch(unpinHost(host));}});_defineProperty(this,\"makeMenu\",()=>{const{intl,host,pinned}=this.props;return[{text:intl.formatMessage(pinned?messages.unpinHost:messages.pinHost,{host}),action:this.handlePinHost,icon:require(pinned?'@tabler/icons/icons/pinned-off.svg':'@tabler/icons/icons/pin.svg')}];});}render(){const{remoteInstance,pinned}=this.props;const menu=this.makeMenu();const icon=pinned?'thumbtack':'globe-w';return/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel instance-federation-panel\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel-header\"},void 0,/*#__PURE__*/_jsx(\"i\",{role:\"img\",alt:icon,className:\"fa fa-\".concat(icon,\" wtf-panel-header__icon\")}),/*#__PURE__*/_jsx(\"span\",{className:\"wtf-panel-header__label\"},void 0,/*#__PURE__*/_jsx(\"span\",{},void 0,remoteInstance.get('host'))),/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel__menu\"},void 0,/*#__PURE__*/_jsx(DropdownMenu,{items:menu,src:require('@tabler/icons/icons/dots-vertical.svg'),direction:\"right\"}))));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,host:PropTypes.string.isRequired,instance:ImmutablePropTypes.map,remoteInstance:ImmutablePropTypes.map,pinned:PropTypes.bool}),_temp))||_class)||_class);export{InstanceInfoPanel as default};","'use strict';import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{injectIntl,defineMessages,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{openModal}from'soapbox/actions/modals';import DropdownMenu from'soapbox/containers/dropdown_menu_container';import InstanceRestrictions from'soapbox/features/federation_restrictions/components/instance_restrictions';import{makeGetRemoteInstance}from'soapbox/selectors';import{isAdmin}from'soapbox/utils/accounts';const getRemoteInstance=makeGetRemoteInstance();const messages=defineMessages({editFederation:{\"id\":\"remote_instance.edit_federation\",\"defaultMessage\":\"Edit federation\"}});const mapStateToProps=(state,{host})=>{const me=state.get('me');const account=state.getIn(['accounts',me]);return{instance:state.get('instance'),remoteInstance:getRemoteInstance(state,host),isAdmin:isAdmin(account)};};let InstanceModerationPanel=(_dec=connect(mapStateToProps,null,null,{forwardRef:true}),_dec(_class=injectIntl(_class=(_temp=_class2=class InstanceModerationPanel extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleEditFederation\",e=>{const{dispatch,host}=this.props;dispatch(openModal('EDIT_FEDERATION',{host}));});_defineProperty(this,\"makeMenu\",()=>{const{intl}=this.props;return[{text:intl.formatMessage(messages.editFederation),action:this.handleEditFederation,icon:require('@tabler/icons/icons/edit.svg')}];});}render(){const{remoteInstance,isAdmin}=this.props;const menu=this.makeMenu();return/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel instance-federation-panel\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel-header\"},void 0,/*#__PURE__*/_jsx(\"i\",{role:\"img\",alt:\"gavel\",className:\"fa fa-gavel wtf-panel-header__icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"wtf-panel-header__label\"},void 0,/*#__PURE__*/_jsx(\"span\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"remote_instance.federation_panel.heading\",defaultMessage:\"Federation Restrictions\"}))),isAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel__menu\"},void 0,/*#__PURE__*/_jsx(DropdownMenu,{items:menu,src:require('@tabler/icons/icons/dots-vertical.svg'),direction:\"right\"}))),/*#__PURE__*/_jsx(\"div\",{className:\"wtf-panel__content\"},void 0,/*#__PURE__*/_jsx(InstanceRestrictions,{remoteInstance:remoteInstance})));}},_defineProperty(_class2,\"propTypes\",{intl:PropTypes.object.isRequired,host:PropTypes.string.isRequired,instance:ImmutablePropTypes.map,remoteInstance:ImmutablePropTypes.map,isAdmin:PropTypes.bool}),_temp))||_class)||_class);export{InstanceModerationPanel as default};"],"names":["_class","messages","title","RemoteTimeline","state","props","instance","params","settings","onlyMedia","getIn","timelineId","hasUnread","concat","pinned","includes","_dec","args","e","history","push","maxId","dispatch","componentDidMount","this","disconnect","componentDidUpdate","prevProps","componentWillUnmount","render","intl","label","formatMessage","heading","transparent","host","className","src","onClick","handleCloseClick","id","defaultMessage","values","scrollKey","onLoadMore","handleLoadMore","emptyMessage","getPinnedHosts","pinHost","getState","pinnedHosts","add","unpinHost","delete","_class2","_temp","getRemoteInstance","InstanceInfoPanel","get","remoteInstance","forwardRef","injectIntl","text","action","handlePinHost","icon","menu","makeMenu","role","alt","items","direction","editFederation","InstanceModerationPanel","me","account","isAdmin","handleEditFederation"],"sourceRoot":""}