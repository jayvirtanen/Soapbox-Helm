{"version":3,"file":"packs/js/features/migration-29e3d169626cb39b03c1.chunk.js","mappings":"+JAAiIA,EAAOC,EAAQC,E,8kBAA4mBC,GAAS,QAAe,CAACC,QAAQ,CAAC,GAAK,mBAAmB,eAAiB,qBAAqBC,OAAO,CAAC,GAAK,mBAAmB,eAAiB,kBAAkBC,mBAAmB,CAAC,GAAK,iCAAiC,eAAiB,+BAA+BC,gBAAgB,CAAC,GAAK,8BAA8B,eAAiB,6BAA6BC,eAAe,CAAC,GAAK,8BAA8B,eAAiB,6BAA6BC,qBAAqB,CAAC,GAAK,oCAAoC,eAAiB,mBAAmBC,0BAA0B,CAAC,GAAK,0CAA0C,eAAiB,sBAA0BC,GAAgB,SAAUC,CAAKZ,GAAO,SAAmBE,EAAMD,EAAO,YAAgD,a,IAAY,sDAAZ,mBAA8BY,IAAI,K,OAAE,OAAgB,EAAK,QAAQ,CAACC,cAAc,GAAGC,SAAS,GAAGC,WAAU,KAAQ,OAAgB,EAAK,qBAAoB,SAAAC,G,MAAI,EAAKC,WAAQ,MAAGD,EAAEE,OAAOC,MAAMH,EAAEE,OAAOE,MAAK,QAAM,OAAgB,EAAK,aAAY,WAAK,EAAKH,SAAS,CAACJ,cAAc,GAAGC,SAAS,SAAQ,OAAgB,EAAK,gBAAe,SAAAE,GAAS,MAAyB,EAAKK,MAA7BR,EAAa,gBAACC,EAAQ,WAAkB,EAAgB,EAAKQ,MAApBC,EAAQ,WAACC,EAAI,OAA6C,OAAhC,EAAKP,SAAS,CAACF,WAAU,IAAcQ,GAAS,QAAYV,EAAcC,IAAWW,MAAK,WAAK,EAAKC,YAAYH,EAAS,aAAiBC,EAAKG,cAAczB,EAASG,yBAAyBuB,OAAM,SAAAC,GAAQN,EAAS,WAAeC,EAAKG,cAAczB,EAASI,sBAAsBmB,MAAK,WAAK,EAAKR,SAAS,CAACF,WAAU,U,EAA63C,OAAvmE,OAAyvB,YAAAe,OAAA,WAAe,IAAAN,EAAMO,KAAKT,MAAK,KAAC,OAAmB,OAAK,IAAO,CAACnB,QAAQqB,EAAKG,cAAczB,EAASC,eAAU,GAAoB,OAAK,KAAW,CAAC6B,SAASD,KAAKE,mBAAc,GAAoB,OAAK,WAAW,CAACC,SAASH,KAAKV,MAAMN,gBAAW,GAAoB,OAAK,KAAY,QAAG,GAAoB,OAAK,IAAI,CAACoB,UAAU,aAAQ,GAAoB,OAAK,IAAiB,CAACC,GAAG,iBAAiBC,eAAe,qJAAqJC,OAAO,CAACC,MAAkB,OAAK,KAAK,CAACC,GAAG,0BAAqB,GAAoB,OAAK,IAAiB,CAACJ,GAAG,sBAAsBC,eAAe,kCAA8C,OAAK,KAAU,CAACI,MAAMjB,EAAKG,cAAczB,EAASK,gBAAgBmC,YAAYlB,EAAKG,cAAczB,EAASM,sBAAsBW,KAAK,gBAAgBC,MAAMW,KAAKV,MAAMR,cAAc8B,SAASZ,KAAKa,qBAAiC,OAAK,IAAiB,CAACH,MAAMjB,EAAKG,cAAczB,EAASO,2BAA2BU,KAAK,WAAWC,MAAMW,KAAKV,MAAMP,SAAS6B,SAASZ,KAAKa,qBAAiC,OAAK,MAAM,CAACT,UAAU,gBAAW,GAAoB,OAAK,SAAS,CAAChB,KAAK,SAAS0B,KAAK,SAASV,UAAU,4BAA4BD,UAAUH,KAAKV,MAAMP,WAAWiB,KAAKV,MAAMR,oBAAe,EAAOW,EAAKG,cAAczB,EAASE,eAAe,EAAhoE,CAAyB,OAAymE,OAAgBJ,EAAQ,YAAY,CAACuB,SAAS,oBAA0BC,KAAK,wBAApuEzB,EAAkwEE,KAASF,IAASA","sources":["webpack://soapbox-fe/./app/soapbox/features/migration/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,FormattedMessage,injectIntl}from'react-intl';import{connect}from'react-redux';import{Link}from'react-router-dom';import{moveAccount}from'soapbox/actions/security';import snackbar from'soapbox/actions/snackbar';import ShowablePassword from'soapbox/components/showable_password';import{FieldsGroup,SimpleForm,TextInput}from'soapbox/features/forms';import Column from'soapbox/features/ui/components/column';const messages=defineMessages({heading:{\"id\":\"column.migration\",\"defaultMessage\":\"Account migration\"},submit:{\"id\":\"migration.submit\",\"defaultMessage\":\"Move followers\"},moveAccountSuccess:{\"id\":\"migration.move_account.success\",\"defaultMessage\":\"Account successfully moved.\"},moveAccountFail:{\"id\":\"migration.move_account.fail\",\"defaultMessage\":\"Account migration failed.\"},acctFieldLabel:{\"id\":\"migration.fields.acct.label\",\"defaultMessage\":\"Handle of the new account\"},acctFieldPlaceholder:{\"id\":\"migration.fields.acct.placeholder\",\"defaultMessage\":\"username@domain\"},currentPasswordFieldLabel:{\"id\":\"migration.fields.confirm_password.label\",\"defaultMessage\":\"Current password\"}});let Migration=(_dec=connect(),_dec(_class=injectIntl(_class=(_temp=_class2=class Migration extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{targetAccount:'',password:'',isLoading:false});_defineProperty(this,\"handleInputChange\",e=>{this.setState({[e.target.name]:e.target.value});});_defineProperty(this,\"clearForm\",()=>{this.setState({targetAccount:'',password:''});});_defineProperty(this,\"handleSubmit\",e=>{const{targetAccount,password}=this.state;const{dispatch,intl}=this.props;this.setState({isLoading:true});return dispatch(moveAccount(targetAccount,password)).then(()=>{this.clearForm();dispatch(snackbar.success(intl.formatMessage(messages.moveAccountSuccess)));}).catch(error=>{dispatch(snackbar.error(intl.formatMessage(messages.moveAccountFail)));}).then(()=>{this.setState({isLoading:false});});});}render(){const{intl}=this.props;return/*#__PURE__*/_jsx(Column,{heading:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(SimpleForm,{onSubmit:this.handleSubmit},void 0,/*#__PURE__*/_jsx(\"fieldset\",{disabled:this.state.isLoading},void 0,/*#__PURE__*/_jsx(FieldsGroup,{},void 0,/*#__PURE__*/_jsx(\"p\",{className:\"hint\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"migration.hint\",defaultMessage:\"This will move your followers to the new account. No other data will be moved. To perform migration, you need to {link} on your new account first.\",values:{link:/*#__PURE__*/_jsx(Link,{to:\"/settings/aliases\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"migration.hint.link\",defaultMessage:\"create an account alias\"}))}})),/*#__PURE__*/_jsx(TextInput,{label:intl.formatMessage(messages.acctFieldLabel),placeholder:intl.formatMessage(messages.acctFieldPlaceholder),name:\"targetAccount\",value:this.state.targetAccount,onChange:this.handleInputChange}),/*#__PURE__*/_jsx(ShowablePassword,{label:intl.formatMessage(messages.currentPasswordFieldLabel),name:\"password\",value:this.state.password,onChange:this.handleInputChange}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\"},void 0,/*#__PURE__*/_jsx(\"button\",{name:\"button\",type:\"submit\",className:\"btn button button-primary\",disabled:!this.state.password||!this.state.targetAccount},void 0,intl.formatMessage(messages.submit)))))));}},_defineProperty(_class2,\"propTypes\",{dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_temp))||_class)||_class);export{Migration as default};"],"names":["_class","_class2","_temp","messages","heading","submit","moveAccountSuccess","moveAccountFail","acctFieldLabel","acctFieldPlaceholder","currentPasswordFieldLabel","Migration","_dec","args","targetAccount","password","isLoading","e","setState","target","name","value","state","props","dispatch","intl","then","clearForm","formatMessage","catch","error","render","this","onSubmit","handleSubmit","disabled","className","id","defaultMessage","values","link","to","label","placeholder","onChange","handleInputChange","type"],"sourceRoot":""}