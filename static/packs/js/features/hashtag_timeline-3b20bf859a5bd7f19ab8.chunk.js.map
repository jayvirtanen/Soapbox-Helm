{"version":3,"file":"packs/js/features/hashtag_timeline-3b20bf859a5bd7f19ab8.chunk.js","mappings":"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","sources":["webpack://soapbox-fe/./node_modules/lodash/isEqual.js","webpack://soapbox-fe/./app/soapbox/features/hashtag_timeline/index.js"],"sourcesContent":["var baseIsEqual = require('./_baseIsEqual');\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\n\n\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";import _isEqual from\"lodash/isEqual\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import React from'react';import{FormattedMessage}from'react-intl';import{connect}from'react-redux';import{connectHashtagStream}from'../../actions/streaming';import{expandHashtagTimeline,clearTimeline}from'../../actions/timelines';import Column from'../../components/column';import ColumnHeader from'../../components/column_header';import StatusListContainer from'../ui/containers/status_list_container';const mapStateToProps=(state,props)=>({hasUnread:state.getIn(['timelines',\"hashtag:\".concat(props.params.id),'unread'])>0});let HashtagTimeline=(_dec=connect(mapStateToProps),_dec(_class=class HashtagTimeline extends React.PureComponent{constructor(...args){super(...args);_defineProperty(this,\"disconnects\",[]);_defineProperty(this,\"title\",()=>{const title=[\"#\".concat(this.props.params.id)];// TODO: wtf is all this?\n// It exists in Mastodon's codebase, but undocumented\nif(this.additionalFor('any')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.any\",values:{additional:this.additionalFor('any')},defaultMessage:\"or {additional}\"},\"any\"));}if(this.additionalFor('all')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.all\",values:{additional:this.additionalFor('all')},defaultMessage:\"and {additional}\"},\"all\"));}if(this.additionalFor('none')){title.push(' ',/*#__PURE__*/_jsx(FormattedMessage,{id:\"hashtag.column_header.tag_mode.none\",values:{additional:this.additionalFor('none')},defaultMessage:\"without {additional}\"},\"none\"));}return title;});_defineProperty(this,\"additionalFor\",mode=>{const{tags}=this.props.params;if(tags&&(tags[mode]||[]).length>0){return tags[mode].map(tag=>tag.value).join('/');}else{return'';}});_defineProperty(this,\"handleLoadMore\",maxId=>{const{id,tags}=this.props.params;this.props.dispatch(expandHashtagTimeline(id,{maxId,tags}));});}_subscribe(dispatch,id,tags={}){const any=(tags.any||[]).map(tag=>tag.value);const all=(tags.all||[]).map(tag=>tag.value);const none=(tags.none||[]).map(tag=>tag.value);[id,...any].map(tag=>{this.disconnects.push(dispatch(connectHashtagStream(id,tag,status=>{const tags=status.tags.map(tag=>tag.name);return all.filter(tag=>tags.includes(tag)).length===all.length&&none.filter(tag=>tags.includes(tag)).length===0;})));});}_unsubscribe(){this.disconnects.map(disconnect=>disconnect());this.disconnects=[];}componentDidMount(){const{dispatch}=this.props;const{id,tags}=this.props.params;this._subscribe(dispatch,id,tags);dispatch(expandHashtagTimeline(id,{tags}));}componentDidUpdate(prevProps){const{dispatch}=this.props;const{id,tags}=this.props.params;const{id:prevId,tags:prevTags}=prevProps.params;if(id!==prevId||!_isEqual(tags,prevTags)){this._unsubscribe();this._subscribe(dispatch,id,tags);dispatch(clearTimeline(\"hashtag:\".concat(id)));dispatch(expandHashtagTimeline(id,{tags}));}}componentWillUnmount(){this._unsubscribe();}render(){const{hasUnread}=this.props;const{id}=this.props.params;return/*#__PURE__*/_jsx(Column,{label:\"#\".concat(id),transparent:true},void 0,/*#__PURE__*/_jsx(ColumnHeader,{active:hasUnread,title:this.title()}),/*#__PURE__*/_jsx(StatusListContainer,{scrollKey:\"hashtag_timeline\",timelineId:\"hashtag:\".concat(id),onLoadMore:this.handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.hashtag\",defaultMessage:\"There is nothing in this hashtag yet.\"})}));}})||_class);export{HashtagTimeline as default};"],"names":["baseIsEqual","module","exports","value","other","_class","HashtagTimeline","state","props","hasUnread","getIn","concat","params","id","_dec","args","title","additionalFor","push","values","additional","defaultMessage","mode","tags","length","map","tag","join","maxId","dispatch","_subscribe","any","all","none","disconnects","status","name","filter","includes","_unsubscribe","this","disconnect","componentDidMount","componentDidUpdate","prevProps","prevId","prevTags","componentWillUnmount","render","label","transparent","active","scrollKey","timelineId","onLoadMore","handleLoadMore","emptyMessage"],"sourceRoot":""}