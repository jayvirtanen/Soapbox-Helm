{"version":3,"file":"packs/js/features/home_timeline-a8a6ef8bcbb04054ccb0.chunk.js","mappings":"+JAAiIA,E,ukBAAikB,SAASC,IAAiC,OAAO,6BAAwJ,IAAMC,GAAS,QAAe,CAACC,MAAM,CAAC,GAAK,cAAc,eAAiB,UAAyfC,GAAmB,SAA5e,SAAAC,GAAQ,IAAMC,EAASD,EAAME,IAAI,YAAkBC,GAAS,QAAYF,GAAU,MAAM,CAACG,UAAUJ,EAAMK,MAAM,CAAC,YAAY,OAAO,WAAW,EAAEC,UAAUN,EAAMK,MAAM,CAAC,YAAY,OAAO,cAAcE,UAAUP,EAAMK,MAAM,CAAC,WAAW,UAAUG,UAAUR,EAAMK,MAAM,CAAC,YAAY,OAAO,cAAa,GAAMI,cAAcT,EAAMK,MAAM,CAAC,YAAY,OAAO,kBAAiB,GAAOK,QAAQV,EAAMK,MAAM,CAAC,YAAY,OAAO,UAAS,mBAAuBK,UAAUP,SAAQ,KAAoDQ,CAAKhB,GAAO,QAAWA,EAAM,YAAgD,a,IAAY,sDAAZ,mBAA8BiB,IAAI,K,OAAE,OAAgB,EAAK,QAAQ,CAACC,MAAK,KAAQ,OAAgB,EAAK,kBAAiB,SAAAC,GAAQ,EAAKC,MAAMC,UAAS,QAAmB,CAACF,MAAK,SAAO,OAAgB,EAAK,cAAa,SAAAG,GAAI,EAAKF,MAAMC,UAAS,WAAsB,EAAKE,SAAS,CAACL,MAAK,QAAU,OAAgB,EAAK,iBAAgB,WAAgC,OAAOG,EAAlB,EAAKD,MAAK,WAAiB,c,EAAmjD,OAA37D,OAAka,YAAAI,kBAAA,WAAoBC,KAAKC,sBAAqB,EAAMD,KAAKL,MAAMT,YAAY,YAAAgB,mBAAA,SAAmBC,GAAWH,KAAKC,qBAAqBE,EAAUjB,UAAUc,KAAKL,MAAMT,YAAY,YAAAkB,qBAAA,WAAuBJ,KAAKK,gBAAgB,YAAAJ,qBAAA,SAAqBK,EAAWpB,GAAiB,IAAAU,EAAUI,KAAKL,MAAK,SAAIW,IAAapB,KAA4BoB,GAAYpB,EAAWc,KAAKO,QAAQC,aAAY,WAAKZ,GAAS,aAAwB,KAAeU,IAAapB,GAAWc,KAAKK,iBAAiB,YAAAA,aAAA,WAAkBL,KAAKO,UAASE,cAAcT,KAAKO,SAASP,KAAKO,QAAQ,OAAO,YAAAG,OAAA,sBAAc,EAA0DV,KAAKL,MAA9DgB,EAAI,OAACxB,EAAS,YAACC,EAAS,YAACC,EAAa,gBAACC,EAAO,UAACP,EAAQ,WAAmBU,EAAMO,KAAKpB,MAAK,KAAOgC,EAAgB7B,EAAS8B,aAAavB,IAAUF,IAAYC,IAAgBI,EAAK,OAAmB,OAAK,IAAO,CAACqB,MAAMH,EAAKI,cAActC,EAASC,OAAOsC,aAAaJ,QAAiB,EAAOA,GAA6B,OAAK,IAAgB,CAACK,eAAezC,QAAgC,GAAO,SAAA0C,GAAwB,cAAKA,EAAU,CAACC,OAAO,EAAKC,iBAA2B,OAAK,IAAoB,CAACC,UAAU,gBAAgBC,WAAWtB,KAAKuB,eAAeC,UAAUxB,KAAKyB,cAAcC,WAAW,OAAOC,cAA0B,OAAK,IAAiB,CAACC,GAAG,oBAAoBC,eAAe,mFAAmFC,OAAO,CAACC,QAAoB,OAAK,KAAK,CAACC,GAAG,wBAAmB,GAAoB,OAAK,IAAiB,CAACJ,GAAG,8BAA8BC,eAAe,uBAAuBC,OAAO,CAACG,WAAW9C,aAAqB,EAAv9D,CAA4B,mBAA+7DZ,IAASA","sources":["webpack://soapbox-fe/./app/soapbox/features/home_timeline/index.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class;import\"core-js/modules/web.dom-collections.iterator.js\";import{OrderedSet as ImmutableOrderedSet}from'immutable';import React from'react';import{defineMessages,injectIntl,FormattedMessage}from'react-intl';import{connect}from'react-redux';import{Link}from'react-router-dom';import BundleContainer from'soapbox/features/ui/containers/bundle_container';import{getFeatures}from'soapbox/utils/features';import{expandHomeTimeline}from'../../actions/timelines';import Column from'../../components/column';import StatusListContainer from'../ui/containers/status_list_container';function FollowRecommendationsContainer(){return import(/* webpackChunkName: \"features/follow_recommendations\" */'soapbox/features/follow_recommendations/components/follow_recommendations_container');}const messages=defineMessages({title:{\"id\":\"column.home\",\"defaultMessage\":\"Home\"}});const mapStateToProps=state=>{const instance=state.get('instance');const features=getFeatures(instance);return{hasUnread:state.getIn(['timelines','home','unread'])>0,isPartial:state.getIn(['timelines','home','isPartial']),siteTitle:state.getIn(['instance','title']),isLoading:state.getIn(['timelines','home','isLoading'],true),loadingFailed:state.getIn(['timelines','home','loadingFailed'],false),isEmpty:state.getIn(['timelines','home','items'],ImmutableOrderedSet()).isEmpty(),features};};let HomeTimeline=(_dec=connect(mapStateToProps),_dec(_class=injectIntl(_class=class HomeTimeline extends React.PureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{done:false});_defineProperty(this,\"handleLoadMore\",maxId=>{this.props.dispatch(expandHomeTimeline({maxId}));});_defineProperty(this,\"handleDone\",e=>{this.props.dispatch(expandHomeTimeline());this.setState({done:true});});_defineProperty(this,\"handleRefresh\",()=>{const{dispatch}=this.props;return dispatch(expandHomeTimeline());});}componentDidMount(){this._checkIfReloadNeeded(false,this.props.isPartial);}componentDidUpdate(prevProps){this._checkIfReloadNeeded(prevProps.isPartial,this.props.isPartial);}componentWillUnmount(){this._stopPolling();}_checkIfReloadNeeded(wasPartial,isPartial){const{dispatch}=this.props;if(wasPartial===isPartial){return;}else if(!wasPartial&&isPartial){this.polling=setInterval(()=>{dispatch(expandHomeTimeline());},3000);}else if(wasPartial&&!isPartial){this._stopPolling();}}_stopPolling(){if(this.polling){clearInterval(this.polling);this.polling=null;}}render(){const{intl,siteTitle,isLoading,loadingFailed,isEmpty,features}=this.props;const{done}=this.state;const showSuggestions=features.suggestions&&isEmpty&&!isLoading&&!loadingFailed&&!done;return/*#__PURE__*/_jsx(Column,{label:intl.formatMessage(messages.title),transparent:!showSuggestions},void 0,showSuggestions?/*#__PURE__*/_jsx(BundleContainer,{fetchComponent:FollowRecommendationsContainer},void 0,Component=>/*#__PURE__*/_jsx(Component,{onDone:this.handleDone})):/*#__PURE__*/_jsx(StatusListContainer,{scrollKey:\"home_timeline\",onLoadMore:this.handleLoadMore,onRefresh:this.handleRefresh,timelineId:\"home\",emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.home\",defaultMessage:\"Your home timeline is empty! Visit {public} to get started and meet other users.\",values:{public:/*#__PURE__*/_jsx(Link,{to:\"/timeline/local\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.home.local_tab\",defaultMessage:\"the {site_title} tab\",values:{site_title:siteTitle}}))}})}));}})||_class)||_class);export{HomeTimeline as default};"],"names":["_class","FollowRecommendationsContainer","messages","title","HomeTimeline","state","instance","get","features","hasUnread","getIn","isPartial","siteTitle","isLoading","loadingFailed","isEmpty","_dec","args","done","maxId","props","dispatch","e","setState","componentDidMount","this","_checkIfReloadNeeded","componentDidUpdate","prevProps","componentWillUnmount","_stopPolling","wasPartial","polling","setInterval","clearInterval","render","intl","showSuggestions","suggestions","label","formatMessage","transparent","fetchComponent","Component","onDone","handleDone","scrollKey","onLoadMore","handleLoadMore","onRefresh","handleRefresh","timelineId","emptyMessage","id","defaultMessage","values","public","to","site_title"],"sourceRoot":""}