{"version":3,"file":"packs/js/modals/report_modal-b34fa5a50e4e9f7234be.chunk.js","mappings":"+JAAiIA,EAAOC,EAAQC,E,grBCA2K,2B,+CACgpC,OADpmC,OAAoB,YAAAC,OAAA,WAAc,MAAmCC,KAAKC,MAAvCC,EAAM,SAACC,EAAO,UAACC,EAAQ,WAACC,EAAQ,WAAiBC,EAAM,KAAK,GAAGJ,EAAOK,IAAI,UAAW,OAAO,KAAM,GAAGL,EAAOK,IAAI,qBAAqBC,KAAK,EAAG,GAAGN,EAAOK,IAAI,qBAAqBE,MAAK,SAAAC,GAAM,MAAmB,YAAnBA,EAAKH,IAAI,iBACxkB,GAAkD,UAA/CL,EAAOS,MAAM,CAAC,oBAAoB,EAAE,SAAmB,CAAC,IAAM,EAAMT,EAAOS,MAAM,CAAC,oBAAoB,IAAIL,GAAmB,OAAK,IAAO,CAACM,eAAe,KAAMC,QAAQb,KAAKc,+BAA0B,GAAO,SAAAC,GAAwB,cAAKA,EAAU,CAACC,QAAQ,EAAMT,IAAI,eAAeU,SAAS,EAAMV,IAAI,YAAYW,IAAI,EAAMX,IAAI,OAAOY,IAAI,EAAMZ,IAAI,eAAea,YAAY,EAAMT,MAAM,CAAC,OAAO,WAAW,WAAWU,MAAM,IAAIC,OAAO,IAAIC,QAAO,EAAKC,UAAUtB,EAAOK,IAAI,aAAakB,YAAY,cAAc,GAAkD,UAA/CvB,EAAOS,MAAM,CAAC,oBAAoB,EAAE,SAAmB,CAAC,IAAM,EAAMT,EAAOS,MAAM,CAAC,oBAAoB,IAAIL,GAAmB,OAAK,IAAO,CAACM,eAAe,KAAMC,QAAQb,KAAK0B,+BAA0B,GAAO,SAAAX,GAAwB,cAAKA,EAAU,CAACG,IAAI,EAAMX,IAAI,OAAOY,IAAI,EAAMZ,IAAI,eAAegB,QAAO,EAAKC,UAAUtB,EAAOK,IAAI,aAAaoB,YAAY,cAAcrB,GAAmB,OAAK,IAAO,CAACM,eAAe,KAAaC,QAAQb,KAAK4B,gCAA2B,GAAO,SAAAb,GAAwB,cAAKA,EAAU,CAACT,MAAMJ,EAAOK,IAAI,qBAAqBiB,UAAUtB,EAAOK,IAAI,aAAae,OAAO,IAAIO,YAAY,SAAU,OAAmB,OAAK,MAAM,CAACC,UAAU,yBAAoB,GAAoB,OAAK,MAAM,CAACA,UAAU,iCAA4B,GAAoB,OAAK,IAAc,CAAC5B,OAAOA,IAASI,IAAoB,OAAK,MAAM,CAACwB,UAAU,gCAA2B,GAAoB,OAAK,IAAO,CAAC3B,QAAQA,EAAQ4B,SAAS3B,EAASC,SAASA,OAAc,EADhpC,CAA4C,iB,ICAmG,GAAe,SAAnQ,SAAC2B,EAAM,G,IAACC,EAAE,KAAI,OAAE/B,OAAO8B,EAAMrB,MAAM,CAAC,WAAWsB,IAAK9B,QAAQ6B,EAAMrB,MAAM,CAAC,UAAU,MAAM,eAAc,YAAgBuB,SAASD,OAA+B,SAACE,EAAS,G,IAACF,EAAE,KAAI,OAAE7B,SAAQ,SAACgC,GAAGD,GAAS,QAAmBF,EAAGG,EAAEC,OAAOlC,cAAc,CAA2D,G,0dFAylBmC,GAAS,QAAe,CAACC,MAAM,CAAC,GAAK,iBAAiB,eAAiB,SAASC,YAAY,CAAC,GAAK,qBAAqB,eAAiB,uBAAuBC,OAAO,CAAC,GAAK,gBAAgB,eAAiB,YAA+tBC,GAAkB,SAA3sB,WAAK,IAAMC,GAAW,UAAsoB,OAA/lB,SAAAX,GAAQ,IAAMY,EAAUZ,EAAMrB,MAAM,CAAC,UAAU,MAAM,eAAqBkC,EAAQF,EAAWX,EAAMY,GAAiBE,EAASd,EAAMzB,IAAI,YAAkBwC,GAAS,QAAYD,GAAU,MAAM,CAACE,aAAahB,EAAMrB,MAAM,CAAC,UAAU,MAAM,iBAAiBkC,QAAO,EAACI,QAAQjB,EAAMrB,MAAM,CAAC,UAAU,MAAM,YAAYuC,QAAQlB,EAAMrB,MAAM,CAAC,UAAU,MAAM,YAAYwC,MAAMnB,EAAMrB,MAAM,CAAC,UAAU,MAAM,UAAUyC,WAAU,IAAAC,YAAWrB,EAAMrB,MAAM,CAAC,YAAY,WAAW2C,OAAOV,EAAU,iBAAiB,WAAWW,MAAMvB,EAAMrB,MAAM,CAAC,UAAU,MAAM,gBAAgB6C,YAAW,QAASX,IAAUE,EAASU,eAA0FC,CAAK9D,GAAO,EAAA+D,EAAA,KAAmB7D,EAAMD,EAAO,YAAkD,a,IAAY,sDAAZ,mBAA8B+D,IAAI,K,OAAE,OAAgB,EAAK,uBAAsB,SAAAxB,GAAI,EAAKnC,MAAMkC,UAAS,QAAoBC,EAAEC,OAAOwB,YAAW,OAAgB,EAAK,uBAAsB,SAAAzB,GAAI,EAAKnC,MAAMkC,UAAS,QAAoBC,EAAEC,OAAOlC,cAAa,OAAgB,EAAK,qBAAoB,SAAAiC,GAAI,EAAKnC,MAAMkC,UAAS,QAAkBC,EAAEC,OAAOlC,cAAa,OAAgB,EAAK,gBAAe,WAAK,EAAKF,MAAMkC,UAAS,WAAmB,EAAKlC,MAAMkD,OAAO,EAAKlD,MAAMkC,UAAS,QAAa,EAAKlC,MAAM4C,QAAQtC,IAAI,YAAY,OAAgB,EAAK,iBAAgB,SAAA6B,GAAmB,KAAZA,EAAE0B,UAAe1B,EAAE2B,SAAS3B,EAAE4B,UAAU,EAAKC,kB,EAA4/F,OAAvnH,OAA+oB,YAAAC,kBAAA,WAAoBlE,KAAKC,MAAMkC,UAAS,QAAsBnC,KAAKC,MAAM4C,QAAQtC,IAAI,MAAM,CAAC4D,aAAY,MAAS,YAAAC,mBAAA,SAAmBC,GAAiB,IAAAxB,EAAS7C,KAAKC,MAAK,QAAIoE,EAAUxB,UAAUA,GAASA,GAAS7C,KAAKC,MAAMkC,UAAS,QAAsBU,EAAQtC,IAAI,MAAM,CAAC4D,aAAY,MAAU,YAAApE,OAAA,WAAc,MAA+EC,KAAKC,MAAnF4C,EAAO,UAACI,EAAO,UAACqB,EAAI,OAAClB,EAAS,YAACJ,EAAY,eAACE,EAAO,UAACC,EAAK,QAACK,EAAU,aAACe,EAAO,UAAa,OAAI1B,GAAyC,OAAK,MAAM,CAACf,UAAU,uCAAkC,GAAoB,OAAK,MAAM,CAACA,UAAU,6BAAwB,GAAoB,OAAK,IAAW,CAACA,UAAU,qBAAqB0C,MAAMF,EAAKG,cAAcnC,EAASC,OAAOrB,IAAI,EAAQ,IAA6BwD,QAAQH,KAAuB,OAAK,IAAiB,CAACtC,GAAG,gBAAgB0C,eAAe,qBAAqBC,OAAO,CAACvC,QAAoB,OAAK,SAAS,QAAG,EAAOQ,EAAQtC,IAAI,cAA0B,OAAK,MAAM,CAACuB,UAAU,gCAA2B,GAAoB,OAAK,MAAM,CAACA,UAAU,8BAAyB,GAAoB,OAAK,IAAI,QAAG,GAAoB,OAAK,IAAiB,CAACG,GAAG,cAAc0C,eAAe,qIAAiJ,OAAK,WAAW,CAAC7C,UAAU,qBAAqBU,YAAY8B,EAAKG,cAAcnC,EAASE,aAAaqB,MAAMZ,EAAQlB,SAAS/B,KAAK6E,oBAAoBC,UAAU9E,KAAK+E,cAAc1E,SAAS2C,EAAagC,WAAU,IAAOxB,IAAyB,OAAK,MAAM,QAAG,GAAoB,OAAK,IAAI,QAAG,GAAoB,OAAK,IAAiB,CAACvB,GAAG,sBAAsB0C,eAAe,mFAA+F,OAAK,MAAM,CAAC7C,UAAU,uBAAkB,GAAoB,OAAK,IAAO,CAACG,GAAG,iBAAiB9B,QAAQ+C,EAAQ7C,SAAS2C,EAAajB,SAAS/B,KAAKiF,uBAAmC,OAAK,QAAQ,CAACC,QAAQ,iBAAiBpD,UAAU,8BAAyB,GAAoB,OAAK,IAAiB,CAACG,GAAG,iBAAiB0C,eAAe,sBAAsBC,OAAO,CAACvC,QAAO,IAAA8C,IAAUtC,UAA4B,OAAK,MAAM,QAAG,GAAoB,OAAK,IAAI,QAAG,GAAoB,OAAK,IAAiB,CAACZ,GAAG,oBAAoB0C,eAAe,8CAA0D,OAAK,MAAM,CAAC7C,UAAU,uBAAkB,GAAoB,OAAK,IAAO,CAACG,GAAG,eAAe9B,QAAQgD,EAAM9C,SAAS2C,EAAajB,SAAS/B,KAAKoF,qBAAiC,OAAK,QAAQ,CAACF,QAAQ,eAAepD,UAAU,8BAAyB,GAAoB,OAAK,IAAiB,CAACG,GAAG,eAAe0C,eAAe,iBAAiBC,OAAO,CAACvC,OAAOQ,EAAQtC,IAAI,eAA2B,OAAK,IAAO,CAACF,SAAS2C,EAAaqC,KAAKf,EAAKG,cAAcnC,EAASG,QAAQiC,QAAQ1E,KAAKiE,iBAA6B,OAAK,MAAM,CAACnC,UAAU,+BAA0B,GAAoB,OAAK,MAAM,QAAG,EAAOsB,EAAUkC,KAAI,SAAAC,GAAuB,cAAK,EAAe,CAACtD,GAAGsD,EAASlF,SAAS2C,GAAcuC,UAAvjF,MAAukF,EAAlpH,CAA2B,OAAynH,OAAgB1F,EAAQ,YAAY,CAACmD,aAAa,SAAeH,QAAQ,QAAuBO,UAAU,0BAAyCH,QAAQ,sBAA4BC,QAAQ,SAAeC,MAAM,SAAeK,WAAW,SAAerB,SAAS,oBAA0BmC,KAAK,wBAA98H1E,EAA4+HE,KAASF,IAASA","sources":["webpack://soapbox-fe/./app/soapbox/features/ui/components/report_modal.js","webpack://soapbox-fe/./app/soapbox/features/report/components/status_check_box.js","webpack://soapbox-fe/./app/soapbox/features/report/containers/status_check_box_container.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _dec,_class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import{OrderedSet}from'immutable';import PropTypes from'prop-types';import React from'react';import ImmutablePropTypes from'react-immutable-proptypes';import ImmutablePureComponent from'react-immutable-pure-component';import{defineMessages,FormattedMessage,injectIntl}from'react-intl';import{connect}from'react-redux';import Toggle from'react-toggle';import{isRemote,getDomain}from'soapbox/utils/accounts';import{getFeatures}from'soapbox/utils/features';import{blockAccount}from'../../../actions/accounts';import{changeReportComment,changeReportForward,changeReportBlock,submitReport}from'../../../actions/reports';import{expandAccountTimeline}from'../../../actions/timelines';import Button from'../../../components/button';import IconButton from'../../../components/icon_button';import{makeGetAccount}from'../../../selectors';import StatusCheckBox from'../../report/containers/status_check_box_container';const messages=defineMessages({close:{\"id\":\"lightbox.close\",\"defaultMessage\":\"Close\"},placeholder:{\"id\":\"report.placeholder\",\"defaultMessage\":\"Additional comments\"},submit:{\"id\":\"report.submit\",\"defaultMessage\":\"Submit\"}});const makeMapStateToProps=()=>{const getAccount=makeGetAccount();const mapStateToProps=state=>{const accountId=state.getIn(['reports','new','account_id']);const account=getAccount(state,accountId);const instance=state.get('instance');const features=getFeatures(instance);return{isSubmitting:state.getIn(['reports','new','isSubmitting']),account,comment:state.getIn(['reports','new','comment']),forward:state.getIn(['reports','new','forward']),block:state.getIn(['reports','new','block']),statusIds:OrderedSet(state.getIn(['timelines',\"account:\".concat(accountId,\":with_replies\"),'items'])).union(state.getIn(['reports','new','status_ids'])),canForward:isRemote(account)&&features.federating};};return mapStateToProps;};let ReportModal=(_dec=connect(makeMapStateToProps),_dec(_class=injectIntl(_class=(_temp=_class2=class ReportModal extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"handleCommentChange\",e=>{this.props.dispatch(changeReportComment(e.target.value));});_defineProperty(this,\"handleForwardChange\",e=>{this.props.dispatch(changeReportForward(e.target.checked));});_defineProperty(this,\"handleBlockChange\",e=>{this.props.dispatch(changeReportBlock(e.target.checked));});_defineProperty(this,\"handleSubmit\",()=>{this.props.dispatch(submitReport());if(this.props.block){this.props.dispatch(blockAccount(this.props.account.get('id')));}});_defineProperty(this,\"handleKeyDown\",e=>{if(e.keyCode===13&&(e.ctrlKey||e.metaKey)){this.handleSubmit();}});}componentDidMount(){this.props.dispatch(expandAccountTimeline(this.props.account.get('id'),{withReplies:true}));}componentDidUpdate(prevProps){const{account}=this.props;if(prevProps.account!==account&&account){this.props.dispatch(expandAccountTimeline(account.get('id'),{withReplies:true}));}}render(){const{account,comment,intl,statusIds,isSubmitting,forward,block,canForward,onClose}=this.props;if(!account){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"modal-root__modal report-modal\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"report-modal__target\"},void 0,/*#__PURE__*/_jsx(IconButton,{className:\"media-modal__close\",title:intl.formatMessage(messages.close),src:require('@tabler/icons/icons/x.svg'),onClick:onClose}),/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.target\",defaultMessage:\"Reporting {target}\",values:{target:/*#__PURE__*/_jsx(\"strong\",{},void 0,account.get('acct'))}})),/*#__PURE__*/_jsx(\"div\",{className:\"report-modal__container\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"report-modal__comment\"},void 0,/*#__PURE__*/_jsx(\"p\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.hint\",defaultMessage:\"The report will be sent to your server moderators. You can provide an explanation of why you are reporting this account below:\"})),/*#__PURE__*/_jsx(\"textarea\",{className:\"setting-text light\",placeholder:intl.formatMessage(messages.placeholder),value:comment,onChange:this.handleCommentChange,onKeyDown:this.handleKeyDown,disabled:isSubmitting,autoFocus:true}),canForward&&/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"p\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.forward_hint\",defaultMessage:\"The account is from another server. Send a copy of the report there as well?\"})),/*#__PURE__*/_jsx(\"div\",{className:\"setting-toggle\"},void 0,/*#__PURE__*/_jsx(Toggle,{id:\"report-forward\",checked:forward,disabled:isSubmitting,onChange:this.handleForwardChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"report-forward\",className:\"setting-toggle__label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.forward\",defaultMessage:\"Forward to {target}\",values:{target:getDomain(account)}})))),/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(\"p\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.block_hint\",defaultMessage:\"Do you also want to block this account?\"})),/*#__PURE__*/_jsx(\"div\",{className:\"setting-toggle\"},void 0,/*#__PURE__*/_jsx(Toggle,{id:\"report-block\",checked:block,disabled:isSubmitting,onChange:this.handleBlockChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"report-block\",className:\"setting-toggle__label\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"report.block\",defaultMessage:\"Block {target}\",values:{target:account.get('acct')}})))),/*#__PURE__*/_jsx(Button,{disabled:isSubmitting,text:intl.formatMessage(messages.submit),onClick:this.handleSubmit})),/*#__PURE__*/_jsx(\"div\",{className:\"report-modal__statuses\"},void 0,/*#__PURE__*/_jsx(\"div\",{},void 0,statusIds.map(statusId=>/*#__PURE__*/_jsx(StatusCheckBox,{id:statusId,disabled:isSubmitting},statusId))))));}},_defineProperty(_class2,\"propTypes\",{isSubmitting:PropTypes.bool,account:ImmutablePropTypes.map,statusIds:ImmutablePropTypes.orderedSet.isRequired,comment:PropTypes.string.isRequired,forward:PropTypes.bool,block:PropTypes.bool,canForward:PropTypes.bool,dispatch:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_temp))||_class)||_class);export{ReportModal as default};","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import noop from'lodash/noop';import React from'react';import Toggle from'react-toggle';import StatusContent from'../../../components/status_content';import Bundle from'../../ui/components/bundle';import{MediaGallery,Video,Audio}from'../../ui/util/async-components';export default class StatusCheckBox extends React.PureComponent{render(){const{status,checked,onToggle,disabled}=this.props;let media=null;if(status.get('reblog')){return null;}if(status.get('media_attachments').size>0){if(status.get('media_attachments').some(item=>item.get('type')==='unknown')){// Do nothing\n}else if(status.getIn(['media_attachments',0,'type'])==='video'){const video=status.getIn(['media_attachments',0]);media=/*#__PURE__*/_jsx(Bundle,{fetchComponent:Video,loading:this.renderLoadingVideoPlayer},void 0,Component=>/*#__PURE__*/_jsx(Component,{preview:video.get('preview_url'),blurhash:video.get('blurhash'),src:video.get('url'),alt:video.get('description'),aspectRatio:video.getIn(['meta','original','aspect']),width:239,height:110,inline:true,sensitive:status.get('sensitive'),onOpenVideo:noop}));}else if(status.getIn(['media_attachments',0,'type'])==='audio'){const audio=status.getIn(['media_attachments',0]);media=/*#__PURE__*/_jsx(Bundle,{fetchComponent:Audio,loading:this.renderLoadingAudioPlayer},void 0,Component=>/*#__PURE__*/_jsx(Component,{src:audio.get('url'),alt:audio.get('description'),inline:true,sensitive:status.get('sensitive'),onOpenAudio:noop}));}else{media=/*#__PURE__*/_jsx(Bundle,{fetchComponent:MediaGallery,loading:this.renderLoadingMediaGallery},void 0,Component=>/*#__PURE__*/_jsx(Component,{media:status.get('media_attachments'),sensitive:status.get('sensitive'),height:110,onOpenMedia:noop}));}}return/*#__PURE__*/_jsx(\"div\",{className:\"status-check-box\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"status-check-box__status\"},void 0,/*#__PURE__*/_jsx(StatusContent,{status:status}),media),/*#__PURE__*/_jsx(\"div\",{className:\"status-check-box-toggle\"},void 0,/*#__PURE__*/_jsx(Toggle,{checked:checked,onChange:onToggle,disabled:disabled})));}}","import{Set as ImmutableSet}from'immutable';import{connect}from'react-redux';import{toggleStatusReport}from'../../../actions/reports';import StatusCheckBox from'../components/status_check_box';const mapStateToProps=(state,{id})=>({status:state.getIn(['statuses',id]),checked:state.getIn(['reports','new','status_ids'],ImmutableSet()).includes(id)});const mapDispatchToProps=(dispatch,{id})=>({onToggle(e){dispatch(toggleStatusReport(id,e.target.checked));}});export default connect(mapStateToProps,mapDispatchToProps)(StatusCheckBox);"],"names":["_class","_class2","_temp","render","this","props","status","checked","onToggle","disabled","media","get","size","some","item","getIn","fetchComponent","loading","renderLoadingVideoPlayer","Component","preview","blurhash","src","alt","aspectRatio","width","height","inline","sensitive","onOpenVideo","renderLoadingAudioPlayer","onOpenAudio","renderLoadingMediaGallery","onOpenMedia","className","onChange","state","id","includes","dispatch","e","target","messages","close","placeholder","submit","ReportModal","getAccount","accountId","account","instance","features","isSubmitting","comment","forward","block","statusIds","OrderedSet","concat","union","canForward","federating","_dec","injectIntl","args","value","keyCode","ctrlKey","metaKey","handleSubmit","componentDidMount","withReplies","componentDidUpdate","prevProps","intl","onClose","title","formatMessage","onClick","defaultMessage","values","handleCommentChange","onKeyDown","handleKeyDown","autoFocus","handleForwardChange","htmlFor","ge","handleBlockChange","text","map","statusId"],"sourceRoot":""}