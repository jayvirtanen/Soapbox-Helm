"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[199],{525:function(e,t,o){o.r(t),o.d(t,{default:function(){return B}});var n,r,a,i,s=o(1019),c=o(1018),d=(o(1),o(320)),l=o(3),u=o.n(l),p=o(5),g=o.n(p),h=o(4),f=o(1797),m=o(1017),v=o(1021),Z=o(2),b=o(113),_=o(17),w=o(10),y=o(15),k=o(126),C=o(33),I=o(35),M=o(11),N=o(12),O=o(260),S=o.n(O),x=o(0),j=o(105),F=o(136),P=o(34),R=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),t.prototype.render=function(){var e=this.props,t=e.status,o=e.checked,n=e.onToggle,r=e.disabled,a=null;if(t.get("reblog"))return null;if(t.get("media_attachments").size>0)if(t.get("media_attachments").some((function(e){return"unknown"===e.get("type")})));else if("video"===t.getIn(["media_attachments",0,"type"])){var i=t.getIn(["media_attachments",0]);a=(0,s.Z)(F.Z,{fetchComponent:P.nk,loading:this.renderLoadingVideoPlayer},void 0,(function(e){return(0,s.Z)(e,{preview:i.get("preview_url"),blurhash:i.get("blurhash"),src:i.get("url"),alt:i.get("description"),aspectRatio:i.getIn(["meta","original","aspect"]),width:239,height:110,inline:!0,sensitive:t.get("sensitive"),onOpenVideo:S()})}))}else if("audio"===t.getIn(["media_attachments",0,"type"])){var c=t.getIn(["media_attachments",0]);a=(0,s.Z)(F.Z,{fetchComponent:P.Bb,loading:this.renderLoadingAudioPlayer},void 0,(function(e){return(0,s.Z)(e,{src:c.get("url"),alt:c.get("description"),inline:!0,sensitive:t.get("sensitive"),onOpenAudio:S()})}))}else a=(0,s.Z)(F.Z,{fetchComponent:P.ew,loading:this.renderLoadingMediaGallery},void 0,(function(e){return(0,s.Z)(e,{media:t.get("media_attachments"),sensitive:t.get("sensitive"),height:110,onOpenMedia:S()})}));return(0,s.Z)("div",{className:"status-check-box"},void 0,(0,s.Z)("div",{className:"status-check-box__status"},void 0,(0,s.Z)(j.Z,{status:t}),a),(0,s.Z)("div",{className:"status-check-box-toggle"},void 0,(0,s.Z)(b.Z,{checked:o,onChange:n,disabled:r})))},t}(x.PureComponent),D=T,A=(0,Z.$j)((function(e,t){var o=t.id;return{status:e.getIn(["statuses",o]),checked:e.getIn(["reports","new","status_ids"],(0,d.Set)()).includes(o)}}),(function(e,t){var o=t.id;return{onToggle:function(t){e((0,k.cm)(o,t.target.checked))}}}))(D),K=function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),q=(0,f.vU)({close:{id:"lightbox.close",defaultMessage:"Close"},placeholder:{id:"report.placeholder",defaultMessage:"Additional comments"},submit:{id:"report.submit",defaultMessage:"Submit"}}),B=(0,Z.$j)((function(){var e=(0,N.Tm)();return function(t){var o=t.getIn(["reports","new","account_id"]),n=e(t,o),r=t.get("instance"),a=(0,w.N$)(r);return{isSubmitting:t.getIn(["reports","new","isSubmitting"]),account:n,comment:t.getIn(["reports","new","comment"]),forward:t.getIn(["reports","new","forward"]),block:t.getIn(["reports","new","block"]),statusIds:(0,d.OrderedSet)(t.getIn(["timelines","account:".concat(o,":with_replies"),"items"])).union(t.getIn(["reports","new","status_ids"])),canForward:(0,_.Q1)(n)&&a.federating}}}))(r=(0,m.ZP)((i=a=function(e){function t(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var n=e.apply(this,t)||this;return(0,c.Z)(n,"handleCommentChange",(function(e){n.props.dispatch((0,k.Ck)(e.target.value))})),(0,c.Z)(n,"handleForwardChange",(function(e){n.props.dispatch((0,k.$p)(e.target.checked))})),(0,c.Z)(n,"handleBlockChange",(function(e){n.props.dispatch((0,k.LG)(e.target.checked))})),(0,c.Z)(n,"handleSubmit",(function(){n.props.dispatch((0,k.ZD)()),n.props.block&&n.props.dispatch((0,y.Gy)(n.props.account.get("id")))})),(0,c.Z)(n,"handleKeyDown",(function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)&&n.handleSubmit()})),n}return K(t,e),t.prototype.componentDidMount=function(){this.props.dispatch((0,C.Cn)(this.props.account.get("id"),{withReplies:!0}))},t.prototype.componentDidUpdate=function(e){var t=this.props.account;e.account!==t&&t&&this.props.dispatch((0,C.Cn)(t.get("id"),{withReplies:!0}))},t.prototype.render=function(){var e=this.props,t=e.account,n=e.comment,r=e.intl,a=e.statusIds,i=e.isSubmitting,c=e.forward,d=e.block,l=e.canForward,u=e.onClose;return t?(0,s.Z)("div",{className:"modal-root__modal report-modal"},void 0,(0,s.Z)("div",{className:"report-modal__target"},void 0,(0,s.Z)(M.Z,{className:"media-modal__close",title:r.formatMessage(q.close),src:o(18),onClick:u}),(0,s.Z)(v.Z,{id:"report.target",defaultMessage:"Reporting {target}",values:{target:(0,s.Z)("strong",{},void 0,t.get("acct"))}})),(0,s.Z)("div",{className:"report-modal__container"},void 0,(0,s.Z)("div",{className:"report-modal__comment"},void 0,(0,s.Z)("p",{},void 0,(0,s.Z)(v.Z,{id:"report.hint",defaultMessage:"The report will be sent to your server moderators. You can provide an explanation of why you are reporting this account below:"})),(0,s.Z)("textarea",{className:"setting-text light",placeholder:r.formatMessage(q.placeholder),value:n,onChange:this.handleCommentChange,onKeyDown:this.handleKeyDown,disabled:i,autoFocus:!0}),l&&(0,s.Z)("div",{},void 0,(0,s.Z)("p",{},void 0,(0,s.Z)(v.Z,{id:"report.forward_hint",defaultMessage:"The account is from another server. Send a copy of the report there as well?"})),(0,s.Z)("div",{className:"setting-toggle"},void 0,(0,s.Z)(b.Z,{id:"report-forward",checked:c,disabled:i,onChange:this.handleForwardChange}),(0,s.Z)("label",{htmlFor:"report-forward",className:"setting-toggle__label"},void 0,(0,s.Z)(v.Z,{id:"report.forward",defaultMessage:"Forward to {target}",values:{target:(0,_.ge)(t)}})))),(0,s.Z)("div",{},void 0,(0,s.Z)("p",{},void 0,(0,s.Z)(v.Z,{id:"report.block_hint",defaultMessage:"Do you also want to block this account?"})),(0,s.Z)("div",{className:"setting-toggle"},void 0,(0,s.Z)(b.Z,{id:"report-block",checked:d,disabled:i,onChange:this.handleBlockChange}),(0,s.Z)("label",{htmlFor:"report-block",className:"setting-toggle__label"},void 0,(0,s.Z)(v.Z,{id:"report.block",defaultMessage:"Block {target}",values:{target:t.get("acct")}})))),(0,s.Z)(I.Z,{disabled:i,text:r.formatMessage(q.submit),onClick:this.handleSubmit})),(0,s.Z)("div",{className:"report-modal__statuses"},void 0,(0,s.Z)("div",{},void 0,a.map((function(e){return(0,s.Z)(A,{id:e,disabled:i},e)})))))):null},t}(h.ZP),(0,c.Z)(a,"propTypes",{isSubmitting:u().bool,account:g().map,statusIds:g().orderedSet.isRequired,comment:u().string.isRequired,forward:u().bool,block:u().bool,canForward:u().bool,dispatch:u().func.isRequired,intl:u().object.isRequired}),r=i))||r)||r}}]);
//# sourceMappingURL=report_modal-b34fa5a50e4e9f7234be.chunk.js.map