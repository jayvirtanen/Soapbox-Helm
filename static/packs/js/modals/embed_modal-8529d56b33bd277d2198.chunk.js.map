{"version":3,"file":"packs/js/modals/embed_modal-8529d56b33bd277d2198.chunk.js","mappings":"+JAA4HA,EAAOC,EAAQC,E,kiBAA6QC,GAAW,SAAmBD,EAAMD,EAAO,YAAiD,a,IAAY,sDAAZ,mBAA8BG,IAAI,K,OAAE,OAAgB,EAAK,QAAQ,CAACC,SAAQ,EAAMC,OAAO,QAAO,OAAgB,EAAK,gBAAe,SAAAC,GAAI,EAAKC,OAAOD,MAAK,OAAgB,EAAK,uBAAsB,SAAAE,GAAIA,EAAEC,OAAOC,Y,EAAu6C,OAA7oD,OAAmP,YAAAC,kBAAA,sBAA0BC,EAAKC,KAAKC,MAAK,IAACD,KAAKE,SAAS,CAACX,SAAQ,IAAO,SAAW,iBAAiB,CAACQ,IAAG,IAAGI,MAAK,SAAAC,GAAM,EAAKF,SAAS,CAACX,SAAQ,EAAMC,OAAOY,EAAIC,OAAO,IAAMC,EAAe,EAAKZ,OAAOa,cAAcC,SAASF,EAAeG,OAAOH,EAAeI,MAAMN,EAAIC,KAAKM,MAAML,EAAeM,QAAQN,EAAeO,KAAKC,MAAMC,OAAO,EAAE,EAAKrB,OAAOsB,MAAMV,EAAeO,KAAKI,YAAY,EAAKvB,OAAOwB,OAAOZ,EAAeO,KAAKM,gBAAgBC,OAAM,SAAAC,GAAQ,EAAKpB,MAAMqB,QAAQD,OAAW,YAAAE,OAAA,WAAe,IAAA/B,EAAQQ,KAAKwB,MAAK,OAAC,OAAmB,OAAK,MAAM,CAACC,UAAU,sCAAiC,GAAoB,OAAK,KAAK,QAAG,GAAoB,OAAK,IAAiB,CAACC,GAAG,eAAeC,eAAe,YAAwB,OAAK,MAAM,CAACF,UAAU,+BAA0B,GAAoB,OAAK,IAAI,CAACA,UAAU,aAAQ,GAAoB,OAAK,IAAiB,CAACC,GAAG,qBAAqBC,eAAe,iEAA6E,OAAK,QAAQ,CAACC,KAAK,OAAOH,UAAU,oBAAoBI,UAAS,EAAKC,MAAMtC,GAAQA,EAAOmB,MAAM,GAAGoB,QAAQ/B,KAAKgC,uBAAmC,OAAK,IAAI,CAACP,UAAU,aAAQ,GAAoB,OAAK,IAAiB,CAACC,GAAG,gBAAgBC,eAAe,qCAAkD,gBAAoB,SAAS,CAACF,UAAU,sBAAsBQ,YAAY,IAAIC,IAAIlC,KAAKmC,aAAaC,QAAQ,oBAAoBC,MAAM,eAAe,EAAvqD,CAA0B,OAA+oD,OAAgBlD,EAAQ,YAAY,CAACY,IAAI,sBAA4BuC,QAAQ,oBAA0BhB,QAAQ,oBAA0BiB,KAAK,wBAA50DrD,EAA02DE,KAASF","sources":["webpack://soapbox-fe/./app/soapbox/features/ui/components/embed_modal.js"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _defineProperty from\"@babel/runtime/helpers/esm/defineProperty\";var _class,_class2,_temp;import\"core-js/modules/web.dom-collections.iterator.js\";import axios from'axios';import PropTypes from'prop-types';import React from'react';import ImmutablePureComponent from'react-immutable-pure-component';import{FormattedMessage,injectIntl}from'react-intl';let EmbedModal=injectIntl(_class=(_temp=_class2=class EmbedModal extends ImmutablePureComponent{constructor(...args){super(...args);_defineProperty(this,\"state\",{loading:false,oembed:null});_defineProperty(this,\"setIframeRef\",c=>{this.iframe=c;});_defineProperty(this,\"handleTextareaClick\",e=>{e.target.select();});}componentDidMount(){const{url}=this.props;this.setState({loading:true});axios.post('/api/web/embed',{url}).then(res=>{this.setState({loading:false,oembed:res.data});const iframeDocument=this.iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(res.data.html);iframeDocument.close();iframeDocument.body.style.margin=0;this.iframe.width=iframeDocument.body.scrollWidth;this.iframe.height=iframeDocument.body.scrollHeight;}).catch(error=>{this.props.onError(error);});}render(){const{oembed}=this.state;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-root__modal embed-modal\"},void 0,/*#__PURE__*/_jsx(\"h4\",{},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"status.embed\",defaultMessage:\"Embed\"})),/*#__PURE__*/_jsx(\"div\",{className:\"embed-modal__container\"},void 0,/*#__PURE__*/_jsx(\"p\",{className:\"hint\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"embed.instructions\",defaultMessage:\"Embed this post on your website by copying the code below.\"})),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"embed-modal__html\",readOnly:true,value:oembed&&oembed.html||'',onClick:this.handleTextareaClick}),/*#__PURE__*/_jsx(\"p\",{className:\"hint\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"embed.preview\",defaultMessage:\"Here is what it will look like:\"})),/*#__PURE__*/React.createElement(\"iframe\",{className:\"embed-modal__iframe\",frameBorder:\"0\",ref:this.setIframeRef,sandbox:\"allow-same-origin\",title:\"preview\"})));}},_defineProperty(_class2,\"propTypes\",{url:PropTypes.string.isRequired,onClose:PropTypes.func.isRequired,onError:PropTypes.func.isRequired,intl:PropTypes.object.isRequired}),_temp))||_class;export{EmbedModal as default};"],"names":["_class","_class2","_temp","EmbedModal","args","loading","oembed","c","iframe","e","target","select","componentDidMount","url","this","props","setState","then","res","data","iframeDocument","contentWindow","document","open","write","html","close","body","style","margin","width","scrollWidth","height","scrollHeight","catch","error","onError","render","state","className","id","defaultMessage","type","readOnly","value","onClick","handleTextareaClick","frameBorder","ref","setIframeRef","sandbox","title","onClose","intl"],"sourceRoot":""}