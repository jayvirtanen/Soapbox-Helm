"use strict";(self.webpackChunksoapbox_fe=self.webpackChunksoapbox_fe||[]).push([[197],{803:function(e,t,o){o.r(t),o.d(t,{default:function(){return v}});var n,r,i,a,s=o(1019),l=o(1018),d=(o(1),o(171)),c=o.n(d),u=o(3),f=o.n(u),p=o(0),m=o(4),h=o(1017),b=o(1021),y=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),v=(0,h.ZP)((a=i=function(e){function t(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var n=e.apply(this,t)||this;return(0,l.Z)(n,"state",{loading:!1,oembed:null}),(0,l.Z)(n,"setIframeRef",(function(e){n.iframe=e})),(0,l.Z)(n,"handleTextareaClick",(function(e){e.target.select()})),n}return y(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.url;this.setState({loading:!0}),c().post("/api/web/embed",{url:t}).then((function(t){e.setState({loading:!1,oembed:t.data});var o=e.iframe.contentWindow.document;o.open(),o.write(t.data.html),o.close(),o.body.style.margin=0,e.iframe.width=o.body.scrollWidth,e.iframe.height=o.body.scrollHeight})).catch((function(t){e.props.onError(t)}))},t.prototype.render=function(){var e=this.state.oembed;return(0,s.Z)("div",{className:"modal-root__modal embed-modal"},void 0,(0,s.Z)("h4",{},void 0,(0,s.Z)(b.Z,{id:"status.embed",defaultMessage:"Embed"})),(0,s.Z)("div",{className:"embed-modal__container"},void 0,(0,s.Z)("p",{className:"hint"},void 0,(0,s.Z)(b.Z,{id:"embed.instructions",defaultMessage:"Embed this post on your website by copying the code below."})),(0,s.Z)("input",{type:"text",className:"embed-modal__html",readOnly:!0,value:e&&e.html||"",onClick:this.handleTextareaClick}),(0,s.Z)("p",{className:"hint"},void 0,(0,s.Z)(b.Z,{id:"embed.preview",defaultMessage:"Here is what it will look like:"})),p.createElement("iframe",{className:"embed-modal__iframe",frameBorder:"0",ref:this.setIframeRef,sandbox:"allow-same-origin",title:"preview"})))},t}(m.ZP),(0,l.Z)(i,"propTypes",{url:f().string.isRequired,onClose:f().func.isRequired,onError:f().func.isRequired,intl:f().object.isRequired}),r=a))||r}}]);
//# sourceMappingURL=embed_modal-8529d56b33bd277d2198.chunk.js.map